<!DOCTYPE html>
<html>

<!-- Mirrored from hex.h5.legu.cc/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Jan 2023 13:23:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-title" content="Hex FRVR">
	<meta name="theme-color" content="#202020">
	<meta name="HandheldFriendly" content="true" />	
	<meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
	<meta name="google" content="notranslate" />
	<title>六角消除</title>
	<style>
		*{
			-webkit-touch-callout: none;
		    -webkit-user-select: none;
		    -khtml-user-select: none;
		    -moz-user-select: none;
		    -ms-user-select: none;
		    user-select: none;
		}

		body {
			background-color: #202020;
			font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
			border:0px;padding:0px;margin:0px;
			width:100%;
			height:100%;
		}
		
		canvas{
			position: fixed;
			top:0px;
			left:0px;
			width:3000px;
			height:3000px;
			background-color:#000000
		}

		#overlay{
			position:absolute;
			z-index:3;
			left:50%;
			margin-left:-100px;
			visibility:hidden;
			bottom:3px;
			overflow:hidden;
			text-align: center;
		}

		

		#overlay div{
			float:left;
		}

		@-ms-viewport{width:100%}

		content{
			background-color:#ffffff;
			display: block;
			padding:20px;
			height:100%;
			overflow:scroll;
		}

		content metadata{
			float:right;
			margin-left:10px;
			text-align:center;
		}

		h1{
			margin:0px;
			font-weight:100;
			font-size:50px;
		}
		a{
			line-height:2em;
		}
		h3{
			margin-bottom:0px;
		}

		@-ms-keyframes w{0%{-ms-transform:rotate(3deg);}50%{-ms-transform:rotate(-3deg);}100%{-ms-transform:rotate(3deg);}}
		@-moz-keyframes w{0%{-moz-transform:rotate(3deg);}50%{-moz-transform:rotate(-3deg);}100%{-moz-transform:rotate(3deg);}}
		@-webkit-keyframes w{0%{-webkit-transform:rotate(3deg);}50%{-webkit-transform:rotate(-3deg);}100%{-webkit-transform:rotate(3deg);}}
		@keyframes w{0%{transform:rotate(3deg);}50%{transform:rotate(-3deg);}100%{transform:rotate(3deg);}}
		.w {-ms-animation:w .3s 2;-moz-animation:w .3s 2;-webkit-animation:w .3s 2;animation:w .3s 2;}


.loading{
            width: 80px;
            height: 40px;
            
z-index: 99;
    position: absolute;
    left: 50%;
	margin-left:-20px;
    top: 35%;
        }
        .loading span{
            display: inline-block;
            width: 8px;
            height: 100%;
            border-radius: 4px;
            background: lightgreen;
            -webkit-animation: load 1s ease infinite;
        }
        @-webkit-keyframes load{
            0%,100%{
                height: 40px;
                background: lightgreen;
            }
            50%{
                height: 70px;
                margin: -15px 0;
                background: lightblue;
            }
        }
        .loading span:nth-child(2){
            -webkit-animation-delay:0.2s;
        }
        .loading span:nth-child(3){
            -webkit-animation-delay:0.4s;
        }
        .loading span:nth-child(4){
            -webkit-animation-delay:0.6s;
        }
        .loading span:nth-child(5){
            -webkit-animation-delay:0.8s;
        }

	</style>
	<link rel="stylesheet" href="weui/weui.min.css"/>
	</head>
	<body>
	<div style="position: absolute;left:-1000px;top:-1000px;"><img src="icon.jpg" /></div>


	<div id="liaoliao" style="position: absolute;z-index:99999999;width:100%;top:0;left:0;background:#fff;display:none">
		<div style="margin:2%">
			<a href="javascript:;" ontouchstart="document.getElementById('liaoliao').style.display='none'" class="weui_btn weui_btn_mini weui_btn_primary" style="position: absolute; top:5px; left:5px;"> 返回游戏 </a>
			<!-- UY BEGIN -->
			<script type="text/javascript">
			var uyan_config = {
				 'du':'legu.cc', 
				 'su':'hex'
			};
			</script>
			<div id="uyan_frame"></div>
			<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1852361"></script>
			<!-- UY END -->
		</div>
	</div>

	<div class="weui_dialog_confirm" id="dialog1" style="position: absolute;z-index:9999999;width:100%;height:100%;top:0;left:0;display:none">
		<div class="weui_mask"></div>
		<div class="weui_dialog">
			<div class="weui_dialog_hd"><strong class="weui_dialog_title">恭喜你！</strong></div>
			<div class="weui_dialog_bd">创造了新的今日最高分，是否上传分数参与全球排名？</div>
			<div class="weui_dialog_ft">
				<a href="javascript:;" id="dialog1Btn1" class="weui_btn_dialog default">取消</a>
				<a href="javascript:;" id="dialog1Btn2" class="weui_btn_dialog primary">上传分数</a>
			</div>
		</div>
	</div>

	<div class="page" id="rankdiv" style="position:relative;z-index:9999999999;background:#eee;display:none">
		<div class="hd">
			<h3 class="page_title">&nbsp;&nbsp;今日全球排行</h3>
			<a href="javascript:;" ontouchstart="RANK.hide()" class="weui_btn weui_btn_mini weui_btn_primary" style="position: absolute; top:20px; right:20px;"> 返回游戏 </a>
		</div>

		<div class="weui_cells_title">您今日排名</div>
		<div class="weui_cells">
			<div class="weui_cell">
				<div class="weui_cell_bd weui_cell_primary">
					<p><span id="myranktxt">未知</span> <a href="javascript:;" ontouchstart="RANK.hide();todaySave.check(2)" class="weui_btn weui_btn_mini weui_btn_default" style="position:relative;"> 上传分数 </a></p>
				</div>
			</div>
		</div>

		<div class="weui_cells_title">积分Top</div>
		<div class="bd">
			<div class="weui_panel weui_panel_access">
				<div class="weui_panel_bd" id="rankcontdiv">
				</div>
			</div>
			
		</div>

	</div>

	<script>
	window.RANK = {
		show:function(){
			var url = "api229e.html?app=rank&amp;openid="+ (openid||'');

			document.getElementById('loading').style.display="";
			setTimeout(function(){
				document.getElementById('loading').style.display="none";
			},3000);

			AJAX_GET(url,function(txt){
				var json = JSON.parse(txt);
				var html=[];
				document.getElementById('loading').style.display="none";

				if(json.myrank && json.myrank!=''){
					document.getElementById('myranktxt').innerHTML = '第 '+ json.myrank +' 名';
				}

				var data = json.list;
				for(var i=0;i<data.length;i++){
					if(i<2){
						var _h = '<div class="weui_media_box weui_media_appmsg"><div class="weui_media_hd"><img class="weui_media_appmsg_thumb" src="'+ data[i].headimgurl+'" alt=""></div><div class="weui_media_bd"><h4 class="weui_media_title">第'+ (i+1) +'名 '+ data[i].nickname +'</h4><p class="weui_media_desc">分数：'+ data[i].highscore +'</p></div></div>';
					}else{
						var _h = '<div class="weui_cell weui_media_small_appmsg" href="javascript:;"><div class="weui_cell_hd"><img src="'+ data[i].headimgurl+'" alt="" style="width:30px;height:30px;margin-right:5px;display:block;background:#eee;"></div><div class="weui_cell_bd weui_cell_primary"><p style="color:#000">第'+ (i+1) +'名 '+ data[i].nickname +'</p></div><span class="weui_cell_ft weui_media_desc">'+ data[i].highscore +'分</span></div>';
					}
					html.push(_h);
				}
				document.getElementById('rankcontdiv').innerHTML = html.join('');
				document.getElementById('rankdiv').style.display = "";

				document.getElementById('gameCanvas').style.display = "none";
			});
		},
		hide:function(){
			document.getElementById('rankcontdiv').innerHTML = "";
			document.getElementById('rankdiv').style.display = "none";
			document.getElementById('gameCanvas').style.display = "";
		}
	};
	</script>

	<div class="loading" id="loading" style="display:none">
			<span></span>
			<span></span>
			<span></span>
			<span></span>
			<span></span>
	</div>

		<canvas id="gameCanvas"></canvas>
		<div id="overlay"></div>

		<div id="adlink" onclick="location.href='love2048/indexb2d5.html?td_channelid=hex'" style="position:absolute;z-index:2;left:0;bottom:0;color:#ccc;font-size:80%;width:100%;text-align: center;line-height:2em;background:rgba(0,0,0,0.5);;">六角玩累了？来试试同样停不下来的<span style="color:#39ffa4">[情侣2048]</span>吧！</div>

		<content itemscope="" itemtype="https://schema.org/VideoGame">
			<div style="overflow:hidden;height:1px">
				<img src="v/1451064206567/i/g/frvrlogo.png"/>
			</div>
		</content>
		<script>
			var version = "2.6.0"
			var gaPath = '/hex/' + version + '/';
 			var initTime = 1*new Date();
			window.onerror = function(errorMsg, url, lineNumber) {
				console.log("ERROR", errorMsg + " - " + url + " - " + lineNumber)
			}
		</script>
		<script>window.vpath = "v/1451064206567/index.html";
function load(t) { !
    function(e, i) {
        var r, n = e.getElementsByTagName(i)[0];
        r = e.createElement(i),
        r.src = t,
        r.async = "async",
        r.defer = "defer",
        n.parentNode.insertBefore(r, n)
    } (document, "script")
}
function loadJSON(t, e) {
    var i = new XMLHttpRequest;
    i.crossOrigin = "anonymous",
    i.overrideMimeType("application/json"),
    i.open("GET.html", t, !0),
    i.onreadystatechange = function() {
        4 == i.readyState && ("200" == i.status ? e(i.responseText) : (i = i.onreadystatechange = null, setTimeout(function() {
            loadJSON(t, e)
        },
        6e4)))
    },
    i.send(null)
}
function loadConfig(t) {
    
}
function navigate(t, e) {
    window.Host && window.Host.IOS && window.Host.IOS.OpenURL && Host.IOS.OpenURL(t),
    window.Host && window.Host.Android && window.Host.Android.OpenURL ? window.Host.Android.OpenURL(t) : isClay ? (window.open(t, e || "_blank"), navigator.app && navigator.app.loadUrl && navigator.app.loadUrl(t, {
        openExternal: !0
    })) : window.open(t, e || "_blank")
}
function preload() {
    function t() {
        for (var t = 0; t < h.length; t++) h[t]()
    }
    function e() {
        o--;
        for (var e = 0; e < s.length; e++) s[e](a, o);
        0 == o && requestAnimFrame(t)
    }
    function i(t) {
        var i = t.substring(t.lastIndexOf("."));
        if (t = vpath + t, void 0 === preloadCache[t]) switch (o++, a++, i) {
        case ".wav":
        case ".mp3":
            throw "You should not prelaod sounds";
        default:
            var r = preloadCache[t] = new Image;
            r.src = t,
            r.path = r.src,
            r.onload = e
        }
    }
    function r(t, i) {
        o++,
        a++,
        Host.Preferences["Get" + t](i, e)
    }
    function n(t) {
        var e = t.toString(),
        n = e.match(/[^A-Za-z]embed\([\"|\'][^\)]+[\"|\']\)/g);
        if (n) for (var o = 0; o < n.length; o++) i(n[o].replace(/[^A-Za-z]embed\([\"|\'](.+)[\"|\']\)/g, "$1"));
        var a = e.match(/[^A-Za-z]Host.Preferences.Quick([A-Za-z]+)\([\"|\'][^\)]+[\"|\']\)/g);
        if (a) for (var o = 0; o < a.length; o++) {
            var s = /[^A-Za-z]Host.Preferences.Quick([A-Za-z]+)\([\"|\'](.+)[\"|\']\)/g;
            r(a[o].replace(s, "$1"), a[o].replace(s, "$2"))
        }
    }
    var o = 0,
    a = 0,
    s = [];
    a = 0,
    o++;
    for (var h = arguments,
    l = 0; l < h.length; l++) n(h[l]);
    return e(),
    function(t) {
        s.push(t)
    }
}
function attachDownHandler(t, e, i) {
    function r(i, r) {
        window.dirty = !0,
        e.call(t, i, r)
    }
    t.interactive = !0,
    t.touchstart = function(e, i) {
        ignoreMouseEvents = !0,
        t.mousedown = void 0,
        r(e, !1)
    },
    t.mousedown = function(t, e) {
        ignoreMouseEvents || r(t, !0)
    }
}
function attachUpHandler(t, e, i) {
    function r(i, r) {
        window.dirty = !1,
        e.call(t, i, r),
        window.backgroundMusic && window.backgroundMusic.play(0, !0)
    }
    t.mousedown = t.mousedown ||
    function() {},
    t.touchstart = t.touchstart ||
    function() {},
    t.touchend = function(e) {
        ignoreMouseEvents = !0,
        t.mouseup = void 0,
        r(e, !1)
    },
    t.mouseup = function(t) {
        ignoreMouseEvents || r(t, !0)
    }
}
function animate() {
    tick(),
    (window.dirty || window.dirtyOnce || 0 !== Tween.tweens.length) && (window.dirtyOnce = !1, renderer.render(stageContainer)),
    requestAnimFrame(animate)
}
function resizeCanvas(t) {
    clearTimeout(resizeTimer),
    resizeTimer = setTimeout(function() {
        if (width != owidth || height != oheight) {
            owidth = width,
            oheight = height;
            var t = width * ratio >> 0,
            e = height * ratio >> 0;
            renderer.resize(t, e),
            renderer.view.style.width = Math.ceil(t / ratio) + "px",
            renderer.view.style.height = Math.ceil(e / ratio) + "px",
            window.resizeAd(),
            //window.scrollTo(0, 0),
            window.dirtyOnce = !0
        }
    },
    window.isiOS ? t: 1)
}
function Sidebar() {
    window.Sidebar = function(t) {
        function e() {
            a.width = 25,
            a.height = height * t,
            s.fillStyle = h,
            s.fillRect(0, 0, a.width, a.height),
            o.texture.destroy(!0),
            o.setTexture(new PIXI.Texture.fromCanvas(a)),
            n.height = height * t,
            r.content.resize(500 * t, 2 * (height - marginTop))
        }
        function i(e, i, r, n) {
            return e.ratio = t / 2,
            e.x = i,
            e.y = r,
            e.hitArea = new PIXI.Rectangle(0, 0, 50 * t, 50 * t),
            void 0 !== n && (e.interactive = !0, e.buttonMode = !0, e.defaultCursor = "pointer", attachUpHandler(e,
            function() {
                navigate(n),
                Sidebar.hide()
            })),
            e
        }
        this.icons = new Sheet(embed("i/g/icons.html"), 50, 50),
        Container.call(this);
        var r = this;
        this.showing = !1;
        var n = new PIXI.Graphics;
        this.addChild(n),
        this.interactive = !0,
        n.beginFill(3355443),
        n.drawRect(0, 0, 200, 200),
        n.width = 250 * t;
        var o = new PIXI.Sprite(PIXI.Texture.emptyTexture);
        stageContainer.addChildAt(o, 0);
        var a = document.createElement("canvas"),
        s = a.getContext("2d"),
        h = s.createPattern(embed("i/g/menushadow.html"), "repeat");
        this.icon = new Sheet(embed("i/g/menutile3.html"), 68, 68),
        r.icon.x = 25,
        r.icon.y = window.marginTop ? (window.marginTop + 5) / .5 : 25,
        stageContainer.addChild(this.icon),
        o.x = -24,
        r.icon.ratio = .5 * t,

		this.icon2 = new Sheet(embed("i/g/menutile3.html"), 68, 68),
        r.icon2.x = 25,
        r.icon2.y = window.marginTop ? window.marginTop: 135,
        stageContainer.addChild(this.icon2),
        r.icon2.ratio = .5 * t,

			this.icon2.buttonMode = !0,
				this.icon2.frame = 1;
        attachDownHandler(this.icon2,
        function() {
			document.getElementById('liaoliao').style.display="";
        }),

        this.content = new ScrollContainer(500, 500),
        this.content.allowScrollX = !1,
        r.content.ratio = .5 * t,
        this.content.y = marginTop * t,
        this.addChild(this.content),
        o._renderWebGL = function(t) {
            this._dirtyTexture && (this._dirtyTexture = !1, PIXI.updateWebGLTexture(this.texture.baseTexture, t.gl)),
            PIXI.Sprite.prototype._renderWebGL.call(this, t)
        },
        this.show = function() {
            stageContainer.addChildAt(window.Sidebar, 0),
            window.Sidebar.content.content.y = 0,
            Tween.clear(stage),
            Tween.clear(o),
            Tween.clear(r.icon),
            this.showing = !0,
            new Tween(stage, {
                x: 250 * t
            },
            .3),
            new Tween(o, {
                x: 250 * t - 24
            },
            .3),
            new Tween(r.icon, {
                x: 510
            },
            .3),
            new Tween(r.icon, {
                alpha: 0
            },
            .15).call(function() {
                r.icon.frame = 1,
                new Tween(r.icon, {
                    alpha: 1
                },
                .15)
            }),
            window.toggleOverlay(!0)
        },
        this.hide = function() {
            Tween.clear(stage),
            Tween.clear(o),
            Tween.clear(r.icon),
            this.showing = !1,
            new Tween(stage, {
                x: 0
            },
            .3).call(function() {
                window.Sidebar.parent && window.Sidebar.parent.removeChild(window.Sidebar)
            }),
            new Tween(o, {
                x: -24
            },
            .3),
            new Tween(r.icon, {
                x: 25
            },
            .3),
            new Tween(r.icon, {
                alpha: 0
            },
            .15).call(function() {
                r.icon.frame = 0,
                new Tween(r.icon, {
                    alpha: 1
                },
                .15)
            }),
            window.toggleOverlay(!1)
        };
        var l = 0;
        this.addMenuHeader = function(e) {
            var i = new Container,
            r = new PIXI.Graphics;
            r.beginFill(2236962),
            r.drawRect(0, -2, 250 * t, 34 * t),
            i.addChild(r);
            var e = new Text(e, 200, 35, "#ffffff");
            i.addChild(e),
            e.x = 22,
            e.y = 12,
            i.addChild(e),
            i.y = l,
            this.content.addChild(i),
            i.scrollHeight = 64,
            l += 64
        };
        this.addMenuToggle = function(e, n, o, a) {
            function s(t) {
                f = t,
                f ? (new Tween(p, {
                    x: 427
                },
                .2), new Tween(d, {
                    alpha: 1
                },
                .2)) : (new Tween(p, {
                    x: 387
                },
                .2), new Tween(d, {
                    alpha: 0
                },
                .2))
            }
            var h = new Container;
            e.x = 15,
            e.y = 15,
            h.addChild(e);
            var c = new PIXI.Graphics;
            h.addChild(c);
            var c = new PIXI.Graphics;
            h.addChild(c),
            c.lineStyle(1, 0, .2),
            c.moveTo(0, 40 * t),
            c.lineTo(250 * t, 40 * t),
            c.lineStyle(1, 16777215, .2),
            c.moveTo(0, 41 * t),
            c.lineTo(250 * t, 41 * t),
            h.y = l;
            var d = i(new Sprite(embed("i/g/toggle_background.html")), 388, 10);
            h.addChild(d),
            d.interactive = !0,
            d.buttonMode = !0,
            d.defaultCursor = "pointer";
            var u = i(new Sprite(embed("i/g/toggle_outline.html")), 386, 8);
            h.addChild(u);
            var p = i(new Sprite(embed("i/g/toggle_switch.html")), 427, 12);
            h.addChild(p);
            var n = new Text(n, 200, 35, "#ffffff");
            h.addChild(n),
            n.x = 80,
            n.y = 22;
            var f = !0;
            h.hitArea = new PIXI.Rectangle(0, 0, 250 * t, 35 * t),
            attachDownHandler(h,
            function() {
                r.content.callback = function() {
                    s(!f),
                    a(f)
                }
            }),
            s(o),
            r.content.addChild(h),
            h.scrollHeight = 84,
            l += 84
        },
        this.hideIcon = function() {
            r.icon.visible = !1,
            window.dirtyOnce = !0
        },
        this.showIcon = function() {
            r.icon.visible = !0,
            window.dirtyOnce = !0
        },
        this.addMenuItem = function(e, i, n) {
            var o = new Container;
            e.x = 15,
            e.y = 15,
            o.addChild(e);
            var a = new PIXI.Graphics;
            o.addChild(a),
            a.lineStyle(1, 0, .2),
            a.moveTo(0, 40 * t),
            a.lineTo(250 * t, 40 * t),
            a.lineStyle(1, 16777215, .2),
            a.moveTo(0, 41 * t),
            a.lineTo(250 * t, 41 * t),
            o.interactive = !0,
            o.buttonMode = !0,
            o.defaultCursor = "pointer",
            o.y = l,
            o.hitArea = new PIXI.Rectangle(0, 0, 250 * t, 35 * t);
            var i = new Text(i, 200, 35, "#ffffff");
            return o.addChild(i),
            i.x = 80,
            i.y = 22,
            r.content.addChild(o),
            o.scrollHeight = 84,
            l += 84,
            attachDownHandler(o,
            function() {
                r.content.callback = function() {
                    n && n()
                }
            }),
            o
        },
        this.addMenuItemAfter = function(t, e, i, n) {
            for (var o = r.addMenuItem(e, i, n), a = r.content.getChildren(), s = 0; s < a.length && a[s] != t; s++);
            return r.content.addChildAt(o, s + 1),
            r.reAlignItems(),
            o
        },
        this.removeMenuItem = function(t) {
            r.content.removeChild(t) && (l -= 84)
        },
        this.reAlignItems = function() {
            l = 0;
            for (var t = r.content.getChildren(), e = 0; e < t.length; e++) {
                var i = t[e];
                i.y = l,
                l += i.scrollHeight
            }
        },
        this.addSocialBar = function() {
            var t = new Container;
            t.addChild(i(Sprite.fromSheet(r.icons, 5), 20, 15, "http://news.frvr.com/")),
            t.addChild(i(Sprite.fromSheet(r.icons, 7), 150, 15, "https://twitter.com/frvrgames")),
            t.addChild(i(Sprite.fromSheet(r.icons, 0), 280, 15, Config.facebookPageUrl)),
            t.addChild(i(Sprite.fromSheet(r.icons, 2), 410, 15, "https://plus.google.com/+Frvrgames")),
            t.y = l,
            r.content.addChild(t),
            t.scrollHeight = 82,
            l += 82
        },
        this.icon.buttonMode = !0,
        attachDownHandler(this.icon,
        function() {
            //r.showing ? r.hide() : r.show()
			RANK.show();
        }),
        attachDownHandler(stage,
        function() {
            r.showing && r.hide()
        }),
        resizeCallbacks.push(e)
    },
    Sidebar.prototype = Object.create(Container.prototype),
    Sidebar.prototype.constructor = Sidebar,
    window.Sidebar = new Sidebar(ratio)
}
function game() {
    function t(t) {
        return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
    }
    function e(e) {
        Y.setText("历史最高分: " + t(e));
		ALLHIGH = e;
    }
	function toDayScoreChange(e){
		var cacheScore = parseInt(O.todayhighscore.get()) || 0;
		if(e>cacheScore)O.todayhighscore.set(e);

		todayScoreT1.setText("今日最高分: " + t(e)); 
		document.title = "[六角消除] 今日最高" + t(e||0) +"分，历史最高"+ t(ALLHIGH||0) +"分，约战的来！";
	}

	function initTodayScore(t){
		var i = parseInt(O.todayhighscore.get()) || 0;
		var r = Math.max(i, t);
		toDayScoreNum = r;
		toDayScoreChange(r);
		t > i ? (O.todayhighscore.set(t), !0) : !1
	}

    function i(t, i) {
        var r = O.highscore.get(),
        n = Math.max(r, t);
        return $ = n,
        e(n),
        i && (1500 > t ? window.submitLowscore(t) : window.submitHighscore(t)),
        U && (parseInt(U.get("highscore")) || 0) < n && (U.set("highscore", n), U.save({},
        {
            success: function(t) {
                console.log("Successfully saved", U.get("highscore"))
            },
            error: function(t, e) {}
        })),
        t > r ? (O.highscore.set(t), !0) : !1
    }

    function r(t, i, r, n, o, s, h, l) {
        if (K += r, Tween.clear(q.scale), Tween.clear(q), new Tween(q, {
            score: K
        },
        .4), K > $ && e(K), K > toDayScoreNum && toDayScoreChange(K), Q[i] || (Q[i] = new Text(i, 500, 60 + Math.min(t / 15, 60), "#ffffff", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif'), Q[i].anchor.set(.5, .5), Q[i].dropShadow = !0, Q[i].refreshStyle()), Z && (l || (n = Z.x, o = Z.y), tt.removeChild(Z)), Z = Q[i], Tween.clear(Z), Tween.clear(W), Z.alpha = 1, Z.x = n, Z.y = o, new Tween(Z.scale, {
            x: 1.2,
            y: 1.2
        },
        .1).call(function() {
            Z && new Tween(Z.scale, {
                x: 1,
                y: 1
            },
            .1).call(function() {})
        }), 0 != h && (W.colorTint = Math.min(32 + 5 * h, 255)), tt.addChild(Z), s) {
            bt = w();
            Z.y;
            new Tween(Z, {
                y: Z.y - 200,
                alpha: 0
            },
            .4, Tween.easeIn).call(function() {
                tt.removeChild(Z),
                Z = null,
                m(),
                32 != W.colorTint && new Tween(W, {
                    colorTint: 32
                },
                .7)
            }).wait(.6),
            3 >= lt && setTimeout(function() {
                for (var t = 0; t < nt.length; t++) for (var e = 0; e < nt[t].length; e++) {
                    var i = nt[t][e];
                    new Tween(i, {
                        alpha: a(i, t, e)
                    },
                    .3)
                }
                T()
            },
            3 == lt ? 100 : 800)
        }
        new Tween(q.scale, {
            x: .7,
            y: .7
        },
        .2, Tween.easeIn).call(function() {
            new Tween(q.scale, {
                x: .5,
                y: .5
            },
            .4)
        })
    }
    function n() {
        K = 0,
        new Tween(q, {
            score: K
        },
        .4);
    }
    function o(t, e) {
        this.container = new Container,
        this.innerContainer = new Container,
        this.container.addChild(this.innerContainer),
        this.targetX = 0,
        this.targetY = 0;
        var i = V[t];
        void 0 === e && (e = Math.random() * i.tiles.length >> 0);
        var r = i.tiles[e];
        this.children = this.innerContainer.children,
        this.tiles = r,
        this.color = i.color,
        this.type = t + 1,
        this.typeOffset = e + 1;
        for (var n = 1e3,
        o = [], a = [], s = 0; s < r.length; s++) for (var h = r[s], l = 0; l < h.length; l++) {
            var c = r[s][l];
            if (1 === c) {
                var d = new Sprite(embed("i/g/shadow.html"));
                d.anchor.set(.5, .5),
                d.frame = 2,
                this.innerContainer.addChildAt(d, 0),
                d.alpha = 0;
                var u = new Sheet(embed("i/g/tile.html"), 140, 155);
                u.anchor.set(.5, .5),
                u.frame = 1,
                u.tint = i.color,
                d.x = u.x = l * et - s % 2 * it + et,
                d.y = u.y = s * rt + 73.5,
                this.innerContainer.addChild(u),
                u.x < n && (n = u.x),
                o.push(u),
                a.push(d)
            }
        }
        this.innerContainer.scale.set(.6, .6);
        var p = this;
        this.tw = p.container.width,
        this.th = p.container.height,
        this.container.setRatio = function(t) {
            var e = 100 * t;
            p.container.hitArea = new PIXI.Rectangle((n - 67) / 2 * t - e, -e, p.tw * t + 2 * e, p.th * t + 2 * e)
        },
        this.container.interactive = !0,
        this.container.buttonMode = !0,
        this.minX = n,
        this.dropped = !1,
        this.fadeIn = function() {
            new Tween(this.innerContainer.scale, {
                x: 1,
                y: 1
            },
            .1);
            for (var t = 0; t < o.length; t++) {
                var e = o[t];
                new Tween(e.scale, {
                    x: .8,
                    y: .8
                },
                .1)
            }
            for (var t = 0; t < a.length; t++) {
                var i = a[t];
                new Tween(i, {
                    alpha: 1
                },
                .1)
            }
        },
        this.fadeDrop = function() {
            this.dropped = !0;
            for (var t = 0; t < o.length; t++) {
                var e = o[t];
                new Tween(e.scale, {
                    x: 1,
                    y: 1
                },
                .1)
            }
            for (var t = 0; t < a.length; t++) {
                var i = a[t];
                new Tween(i, {
                    alpha: 0
                },
                .1)
            }
        },
        this.fadeReset = function() {
            new Tween(this.innerContainer.scale, {
                x: .6,
                y: .6
            },
            .1);
            for (var t = 0; t < o.length; t++) {
                var e = o[t];
                new Tween(e.scale, {
                    x: 1,
                    y: 1
                },
                .1)
            }
            for (var t = 0; t < a.length; t++) {
                var i = a[t];
                new Tween(i, {
                    alpha: 0
                },
                .1)
            }
        }
    }
    function a(t, e, i) {
        if (0 == lt) {
            var r = [[0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0], [1, 1, 1, 1, 1, 1], [0, 0, 0, 1, 0]];
            return r[e][i] ? t.used ? 1 : F: .05
        }
        if (1 == lt) {
            var r = [[1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1], [0, 0, 0, 1, 1, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0]];
            return r[e][i] ? t.used ? 1 : F: .05
        }
        return t.used ? 1 : F
    }
    function s() {
        for (var t = K + ":",
        e = [], i = 0; i < Tt.length; i++) e.push(Tt[i].type, Tt[i].typeOffset);
        t += e.join(",") + ":";
        for (var r = [], i = 0; i < nt.length; i++) for (var n = nt[i], o = 0; o < n.length; o++) r.push(n[o].type);
        return t += r.join(",")
    }
    function h(t) {
        t ? O.state.remove() : O.state.set(s())
    }
    function l(t) {
        var e = Math.round((t.container.y - tt.y) / rt),
        i = Math.floor((t.container.x - tt.x) / et + .5 + (e + 1) % 2 * .5),
        r = e,
        n = i - Math.floor(Math.abs(dt - r) / 2);
        return {
            x: n,
            y: r,
            px: i * et + (1 - (e + 1) % 2) * it + et / 2,
            py: e * rt + rt / 2
        }
    }
    function c(t) {
        return d(t, l(t))
    }
    function d(t, e, i) {
        if ((0 != lt || 3 == e.x && 6 == e.y || i) && (1 != lt || 2 == e.x && e.y == -0 || i)) {
            for (var r = 0,
            n = 0; n < t.tiles.length; n++) {
                for (var o = e.y + n,
                a = 0; a < t.tiles[n].length; a++) {
                    var s = t.tiles[n][a];
                    if (1 === s) {
                        var h = e.x + a + Math.floor(r);
                        if (!nt[o] || !nt[o][h]) return ! 1;
                        if (1 == nt[o][h].used) return ! 1
                    }
                }
                r += dt > o ? .5 : -.5
            }
            return ! 0
        }
    }
    function u(t) {
        for (var e = l(t), i = 0, r = 0; r < t.tiles.length; r++) {
            for (var n = e.y + r,
            o = 0; o < t.tiles[r].length; o++) {
                var a = t.tiles[r][o];
                if (1 === a) {
                    var s = e.x + o + Math.floor(i);
                    nt[n] && nt[n][s] && (nt[n][s].tint = t.color, nt[n][s].alpha = .6)
                }
            }
            i += dt > n ? .5 : -.5
        }
    }
    function p(t, e) {
        function i(t) {
            setTimeout(function() {
                t.alpha = 1
            },
            100)
        }
        3 >= lt && lt++;
        for (var r = 0,
        n = 0; n < t.tiles.length; n++) {
            for (var o = e.y + n,
            a = 0; a < t.tiles[n].length; a++) {
                var s = t.tiles[n][a];
                if (1 === s) {
                    var h = e.x + a + Math.floor(r);
                    if (nt[o] && nt[o][h]) {
                        var s = nt[o][h];
                        s.tint = t.color,
                        s.type = t.type,
                        s.used = !0,
                        s.frame = 1,
                        i(s)
                    }
                }
            }
            r += dt > o ? .5 : -.5
        }
    }
    function f(t, e) {
        var i = K * Math.random();
        void 0 === t && (t = 1e4 > i && Math.random() < .5 ? Math.random() * (V.length - 2) >> 0 : 5e4 > i ? Math.random() * (V.length - 1) >> 0 : 1e5 > i ? (Math.random() * (V.length - 2) >> 0) + 1 : (Math.random() * (V.length - 1) >> 0) + 1);
        var r = new o(t, e);
        return r.container.x = 3e3,
        r.container.y = 3e3,
        N.addChild(r.container),
        attachDownHandler(r.container,
        function(t, e) {
            if (! (bt || Pt || r.dropped || 0 == lt && r != Tt[1] || 1 == lt && r != Tt[0])) {
                Tween.clear(r.container),
                N.addChild(r.container);
                var i = (t.getLocalPosition(r.container), r.container.ratio);
                Pt = r,
                X.play(0),
                e ? (j = N.x + r.tw, z = N.y + r.th) : "landscape" == stage.orientation ? (j = 1.5 * r.tw + et + N.x, z = r.th + N.y) : (j = r.tw + N.x, z = 2 * r.th + N.y);
                var n = t.getLocalPosition(stage),
                o = n.x / i - j,
                a = n.y / i - z;
                Pt.innerContainer.x = Pt.container.x - o,
                Pt.innerContainer.y = Pt.container.y - a,
                new Tween(Pt.innerContainer, {
                    x: 0,
                    y: 0
                },
                .1),
                Pt.container.x = o,
                Pt.container.y = a,
                Pt.fadeIn()
            }
        }),
        r
    }
    function I(e, i) {
        function n(e, i, n, a, s, h) {
            function l() {
                for (var n = Math.max(Math.pow(i, 1.2), 1), l = 0, d = 0; d < e.length; d++) Tween.clear(e[d]),
                o += c * n >> 0,
                l += c * n >> 0,
                e[d].tint = 16777215,
                e[d].type = 0,
                e[d].frame = 0,
                e[d].alpha = 1,
                new Tween(e[d], {
                    alpha: F
                },
                .3).wait(.3);
                r(o, t(o), l, a, s, h, i)
            }
            var c = 10 * (n + 1);
            setTimeout(l, 300 * i)
        }
        for (var o = 40,
        a = [], s = 0; s < wt.length; s++) {
            for (var h = wt[s], l = !0, c = 0; c < h.length; c++) if (0 == h[c].used) {
                l = !1;
                break
            }
            l && a.push(h)
        }
        a.sort(function(t, e) {
            return t.length == e.length ? 0 : t.length < e.length ? -1 : 1
        });
        var d = i.px,
        u = i.py;
        if (a.length > 0) {
            for (var s = 0; s < a.length; s++) R[Math.min(s, R.length - 1)].play(.3 * s);
            for (var p = 0,
            f = 0,
            I = 0,
            s = 0; s < a.length; s++) for (var h = a[s], c = 0; c < h.length; c++) p += h[c].x,
            f += h[c].y,
            I++,
            h[c].used = !1,
            h[c].type = 0;
            p /= I,
            f /= I;
            for (var g = a.length > 2,
            s = 0; s < a.length; s++) {
                var h = a[s];
                n(h, s, a.length, p, f, g ? !1 : a.length == s + 1)
            }
            if (g) {
                var v = Math.min(3 * Math.min(a.length - 3, 6) + 3 * Math.random() >> 0, L.length - 1),
                w = L[v];
                w[0].play(.3 * s + .2),
                setTimeout(function() {
                    r(650, w[1], 0, 700, 630, !0, s, !0)
                },
                300 * s + 300)
            }
            d = p,
            u = f
        }
        return r(40, t(40), 40, d, u, 0 == a.length, 0),
        a.length
    }
    function g(t) {
        for (var e = 0; e < Tt.length; e++) if (Tt[e] == t) {
            Tt.splice(e, 1);
            break
        }
        if (setTimeout(function() {
            t.container.parent.removeChild(t.container)
        },
        100), Tt.push(f()), b(), 20 == ++St) {

        }
    }
    function v() {
        W.width = width * ratio,
        W.height = height * ratio,
        W.y = -marginTop * ratio,
        Y.x = width * ratio / stage.ratio - 20,
		
		//ciniao
		todayScoreT1.x = width * ratio / stage.ratio - 20,
		restartBtn.x = width * ratio / stage.ratio - 20,
		ttips.x = width * ratio / stage.ratio - 20,

        q.x = width * ratio / stage.ratio / 2,
        "landscape" == stage.orientation ? (tt.x = 150, tt.y = (1636 - ct * rt) / 2, N.x = (width * ratio / stage.ratio - 2048) / 2, N.y = Math.max(.5 * (gameHeight * ratio / stage.ratio - 1536), 0)) : (tt.x = (1536 - ct * et) / 2, tt.y = 300, N.x = (width * ratio / stage.ratio - 1536) / 2, N.y = .6 * (gameHeight * ratio / stage.ratio - 2048)),
        b()
    }
    function w(t) {
        for (var e = 0; e < Tt.length; e++) for (var i = Tt[e], r = 0; r < nt.length; r++) for (var n = nt[r], o = -1; o < n.length + 1; o++) if (d(i, {
            x: o,
            y: r
        },
        !0)) return ! 1;
        return ! 0
    }
    function m() {
		leguFangQi = function(){
			reLiveTimes = 0;
			localStorage['reLiveTimes'] = 0;
			Modal.hide(function() {
				Modal.show(new k)
			});
		};

        return w() ? (Sidebar.hideIcon(), Modal.show(new D, !0), setTimeout(function() {
            //Modal.hide(function() {
            //    Modal.show(new k)
            //})
        },
        0), !0) : void 0
    }
    function y() {
        ga("send", "event", "Hex", "New Game")
    }
    function P(resetScroe) {
        G.stop(0),
        B.resetGain(),
        Sidebar.showIcon(),
        window.hideGameOverAd();
        //window.showInterstitialAd();
        if(resetScroe==null || resetScroe==true)n();
        for (var t = 0; 3 > t; t++) g(Tt[0]);
        for (var t = 0; t < nt.length; t++) for (var e = nt[t], i = 0; i < e.length; i++) e[i].frame = 0,
        e[i].tint = 16777215,
        e[i].alpha = F,
        e[i].used = !1,
        e[i].type = 0;
        bt = !1
    }
	GOON = function(){
		Modal.hide();
		P(false);	
	};
	restartGame = function(){
		Modal.hide();
		reLiveTimes = 0;
		localStorage['reLiveTimes'] = 0;
		P();	
	};
    function b() {
        if (Pt = void 0, "landscape" == stage.orientation) for (var t = 0; 3 > t; t++) {
            var e = Tt[t];
            e.targetX = 1825 - e.tw / 2 - e.minX / 4,
            e.targetY = 400 * t + 468 + 15 - e.th / 2,
            new Tween(e.container, {
                x: e.targetX,
                y: e.targetY
            },
            .3)
        } else for (var t = 0; 3 > t; t++) {
            var e = Tt[t];
            e.targetX = 500 * t + 268 - Tt[t].tw / 2 - Tt[t].minX / 4,
            e.targetY = 1850 - Tt[t].th / 2,
            new Tween(e.container, {
                x: e.targetX,
                y: e.targetY
            },
            .3)
        }
    }
    function x(t, e) {
        Container.call(this);
        var i = new PIXI.Graphics;
        this.addChild(i),
        i.beginFill(16777215, .9),
        i.drawRoundedRect(0, 0, 1400, 300, 35),
        this.setRatio = function(t) {
            i.width = 1400 * t,
            i.height = 300 * t
        };
        var r = new Sprite(embed("i/g/helper.html"));
        this.addChild(r),
        r.x = -20,
        r.y = -20;
        var t = new Text(t, 400, 90, "#000000", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif', !1, "center");
        t.anchor.set(.5, 0),
        this.addChild(t),
        t.x = 700,
        t.y = 20;
        var e = new Text(e, 400, 60, "#000000", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif', !1, "center");
        e.anchor.set(.5, 0),
        this.addChild(e),
        e.x = 700,
        e.y = 125
    }
    function T(t) {
        if (! (lt > 3)) {
            if (!t) if (Rt && 3 != lt && Rt.parent.removeChild(Rt), console.log(lt), 0 == lt && (Rt = new x("嗨，欢迎你进入六角消除！", "拖动中间的形状填满下面一整行\n即可消除，是不是很简单呢？"), Rt.y = 250, Rt.x = -35), 1 == lt && (Rt = new x("干得漂亮!", "一次消除多行可获得高分噢。\n快试试看吧!"), Rt.y = 950, Rt.x = -35), 2 == lt && (Rt = new x("棒极了", "你已经学会怎么玩啦，赶紧玩个高分吧！\n可以分享到你的朋友圈和好友比一比噢！"), Rt.y = 950, Rt.x = -35, setTimeout(function() {
                lt++,
                T()
            },
            3000)), 3 == lt) Sidebar.showIcon(),
            new Tween(Rt, {
                alpha: 0,
                y: Rt.y + 100
            },
            .5).call(function() {
                Rt.parent.removeChild(Rt)
            }),
            window.removeResizeCallback(S);
            else {
                Rt.alpha = 0;
                var e = Rt.y;
                Rt.y += 100,
                new Tween(Rt, {
                    alpha: 1,
                    y: e
                },
                .5),
                tt.addChild(Rt)
            }
            if (Mt.parent) if (Tween.clear(Mt), Mt.parent.addChild(Mt), 0 == lt) {
                Mt.x = Tt[1].targetX + 35,
                Mt.y = Tt[1].targetY + 35,
                Mt.alpha = 0;
                var i = nt[6][3];
                new Tween(Mt, {
                    alpha: 1
                },
                .3, Tween.easeInOut).call(function() {
                    new Tween(Mt, {
                        x: tt.x + i.x - 50,
                        y: tt.y + i.y
                    },
                    2, Tween.easeInOut).call(function() {
                        new Tween(Mt, {
                            alpha: 0
                        },
                        .3, Tween.easeInOut).call(S)
                    })
                })
            } else if (1 == lt) {
                Mt.x = Tt[0].targetX + 35,
                Mt.y = Tt[0].targetY + 35,
                Mt.alpha = 0;
                var i = nt[0][2];
                new Tween(Mt, {
                    alpha: 1
                },
                .3, Tween.easeInOut).call(function() {
                    new Tween(Mt, {
                        x: tt.x + i.x - 50,
                        y: tt.y + i.y
                    },
                    2, Tween.easeInOut).call(function() {
                        new Tween(Mt, {
                            alpha: 0
                        },
                        .3, Tween.easeInOut).call(S)
                    })
                })
            } else N.removeChild(Mt)
        }
    }
    function S() {
        T(!0)
    }
    var X = Sound.get("i/s/pickup.html", 1),
    C = Sound.get("i/s/place.html", 1),
    M = Sound.get("i/s/placewrong.html", 1),
    R = [Sound.get("i/s/row1.html", .8), Sound.get("i/s/row2.html", .8), Sound.get("i/s/row3.html", .8), Sound.get("i/s/row4.html", .8), Sound.get("i/s/row5.html", .8), Sound.get("i/s/row6.html", .8), Sound.get("i/s/row7.html", .8), Sound.get("i/s/row8.html", .8), Sound.get("i/s/row9.html", .8), Sound.get("i/s/row10.html", .8)],
    E = Sound.get("i/s/gameover.html", .9),
    _ = Sound.get("i/s/highscore.html", 1),
    A = Sound.get("i/s/ding.html", .8);
    window.clickSound = Sound.get("i/s/click.html", .8);
    var L = [[Sound.get("i/s/voice_tier1_beautiful.html", .8), "干得漂亮!"], [Sound.get("i/s/voice_tier1_goodjob.html", .8), "好样的亲!"], [Sound.get("i/s/voice_tier2_gettinggood.html", .8), "相当完美!"], [Sound.get("i/s/voice_tier2_ohyeah.html", .8), "爆蛋了!"], [Sound.get("i/s/voice_tier3_gorgeous.html", .8), "这么牛逼!"], [Sound.get("i/s/voice_tier3_terrific.html", .8), "真TMD天才!"], [Sound.get("i/s/voice_tier4_genius.html", .8), "太假了骚年!"], [Sound.get("i/s/voice_tier4_stunning.html", .8), "MB运气真好!"], [Sound.get("i/s/voice_tier5_fantastic.html", .8), "艹你外挂吧!"], [Sound.get("i/s/voice_tier5_flabbergasting.html", .8), "这不可能!"], [Sound.get("i/s/voice_tier6_astounding.html", .8), "超华丽!"], [Sound.get("i/s/voice_tier6_explosive.html", .8), "令人震惊!"], [Sound.get("i/s/voice_tier7_incredible.html", .8), "太神奇了!"], [Sound.get("i/s/voice_tier7_mindblowing.html", .8), "难以置信!"]],
    B = Music.get("i/s/music.html", 1),
    G = Music.get("i/s/menu.html", 1);
    window.backgroundMusic = B;
	
	var getTodayKey = function(){
		var d = new Date();
		return d.getFullYear() + "_" + d.getMonth() +"_"+ d.getDate();
	};
	TODAYSCOREKEY = "score.v1."+ getTodayKey();
	TODAYUPKEY = TODAYSCOREKEY+'.upload';

    var O = {
        highscore: Host.Preferences.QuickInt("score.v1"),
        muteSounds: Host.Preferences.QuickBool("sound.v6"),
        muteMusic: Host.Preferences.QuickBool("music.v6"),
        state: Host.Preferences.QuickString("state.v2")
    };
	O.todayhighscore = {
		get:function(){
			return localStorage[TODAYSCOREKEY]||0;
		},
		set:function(v){
			localStorage[TODAYSCOREKEY] = v;
		}
	};
    window.data = O;
    var F = .2,
    D = CNEND = function() {
        ModalOverlayContent.call(this),
        this.addHeadline("没地方放啦"),
        this.addLead("是否花费"+ money() +"元消除所有六角");

		var r = new ModelButton('算了吧', "", function(){
			leguFangQi();
		}, 7463062 , 25, 90);
        r.y = 200;
        this.addChild(r);

		var r = new ModelButton('我要消除', "", function(){
			leguBuy();
		},7463062 , 35, 90);

        r.y = 370;
        this.addChild(r);

        this.innerHeight = 450,
        this.blurClose = !1
    };
    D.prototype = Object.create(ModalOverlayContent.prototype),
    D.prototype.constructor = D;
    var U = null;
    window.onParseLoginSuccess = function(t) {
        U = t,
        i(parseInt(U.get("highscore")) || 0)
    };

		window.AJAX_GET = function(url,callback){
		var i = new XMLHttpRequest;
		i.open("GET.html", url, !0),
		i.onreadystatechange = function() {
			if(4 == i.readyState && "200" == i.status){
				callback && callback(i.responseText);
			}
		},
		i.send(null);
	};

	window.todaySave = {
		get:function(){
			return parseInt(localStorage[TODAYUPKEY]||0);
		},
		set:function(v){
			localStorage[TODAYUPKEY] = v*1;
		},
		check:function(type){
			if(openid==""){
				if(type==2)alert('在微信中才能执行该操作');
				return false;
			}
			var thisScore = O.todayhighscore.get();
			var me = this;
			if(thisScore > this.get()){
				document.getElementById('dialog1').style.display = "";

				document.getElementById('dialog1Btn1').onclick = function(){
					document.getElementById('dialog1').style.display = "none";
				};
				document.getElementById('dialog1Btn2').onclick = function(){
					me.set(thisScore);
					AJAX_GET("api15a5.html?app=savescore&amp;act=save&amp;openid="+openid+"&score="+thisScore,function(txt){
						var data = JSON.parse(txt);
						if(data.state=='-1'){
							location.href = data.url;
						}else if(data.state=='1'){
							alert('上传成功');
							document.getElementById('dialog1').style.display = "none";
						}
					});
				};
				return true;
			}else{
				if(type==2)alert('上传成功');
				return false;
			}
		}
	};

    var k = CNEND2 = function() {
        ModalOverlayContent.call(this),
        this.addHeadline("游戏结束"),
        this.innerHeight = 570,
        this.blurClose = !1;
        var e = this.addButton("再来一次",
        function() {
            B.stop(0),
            B.play(0, !0),
            Modal.hide(function() {
                P()
            })
        },
        7463062),
        i = this.addTextBlock(0, 150, 500);
        i.y = 145;
        var r = 0;
        Object.defineProperty(i, "score", {
            get: function() {
                return r
            },
            set: function(e) {
                r = e,
                this.setText(t(e >> 0))
            }
        });
        var n = i.scale.x,
        o = i.scale.x;
        new Tween(i, {
            score: K
        },
        1, Tween.linary).wait(.3).call(function() {
            i.scale.set(1.1 * n, 1.1 * o),
            new Tween(i.scale, {
                x: n,
                y: o
            },
            .3);
			todaySave.check();
        });
        //var a = this.addTextBlock("今日最高分: " + t(O.todayhighscore.get()), 60, 200);
		var a = this.addTextBlock("分享到朋友圈和大家比一比吧", 55, 200,'#cc0000');
        a.y = 310;
        var s = [];
        
        s.length && s[Math.random() * s.length >> 0](this);
    };
    k.prototype = Object.create(ModalOverlayContent.prototype),
    k.prototype.constructor = k;
    var W = new PIXI.Graphics;
    stage.addChildAt(W, 0),
    W.tint = 2105376,
    W.beginFill(16777215),
    W.drawRect(0, 0, 200, 200);
    var H = 0;
    Object.defineProperty(W, "colorTint", {
        get: function() {
            return H
        },
        set: function(t) {
            H = t,
            W.tint = t << 16 | t << 8 | .95 * t << 0,
            W.dirty = !0
        }
    }),
    W.colorTint = 32;
    var N = new Container,
    j = 0,
    z = 0,
    V = [{
        color: 13628289,
        tiles: [[[1]]]
    },
    {
        color: 9014527,
        tiles: [[[1], [1, 1], [1]], [[1, 1], [1, 1]], [[1, 1], [, 1, 1]]]
    },
    {
        color: 7463062,
        tiles: [[[1], [, 1], [, 1], [, , 1]], [[, 1], [, 1], [1], [1]], [[1, 1, 1, 1]]]
    },
    {
        color: 16746933,
        tiles: [[[1], [1, 1], [, 1]], [[1, 1], [, 1], [1]], [[, 1], [1, 1, 1]], [[1], [, 1, 1], [, 1]], [[, 1], [, 1], [1, 1]], [[1, 1, 1], [, 1]]]
    },
    {
        color: 16097903,
        tiles: [[[1, 1], [, 1], [, 1]], [[, 1], [, 1, 1], [1]], [[1, 1, 1], [, , 1]], [[1], [, 1], [1, 1]], [[, 1], [1, 1], [1]], [[1], [1, 1, 1]]]
    },
    {
        color: 16768137,
        tiles: [[[1], [1], [1, 1]], [[1, 1], [1], [1]], [[1, 1], [1, , 1]], [[1, 1], [, , 1], [, 1]], [[, 1], [, , 1], [1, 1]], [[1, , 1], [, 1, 1]]]
    },
    {
        color: 15560057,
        tiles: [[[1], [, 1, 1], [1]], [[, 1], [1, 1], [, 1]], [[1], [, 1, 1], [1]]]
    }],
	
	//ciniao
	ttips = new Text("点上方可[分享]和[收藏] ↑　　", 500, 40, "#666666", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
    ttips.anchor.set(1, 0),
    ttips.x = 10,
    ttips.y = 15;

	todayScoreT1 = new Text("", 500, 60, "#ffff00", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
    todayScoreT1.anchor.set(1, 0),
    todayScoreT1.x = 10,
    todayScoreT1.y = 90;


    Y = new Text("", 500, 50, "#aaaaaa", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
    Y.anchor.set(1, 0),
    Y.x = 10,
    Y.y = 180;

	var restartBtn = new Text("【重新开始】", 500, 50, "#ffffff", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
    restartBtn.anchor.set(1, 0),
    restartBtn.x = 10,
	restartBtn.y = 270;
	attachDownHandler(restartBtn,function() {
		if (confirm("确定要放弃这一局游戏并重新开始吗？ [不会清空今日分数和历史分数]")){
			restartGame();
		}
	});


    var K = 0,
    q = new Text("0", 500, 150, "#ffffff", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
    q.anchor.set(.5, 0),
    q.y = 0;
    var Q = {},
    J = 0;
    Object.defineProperty(q, "score", {
        get: function() {
            return J
        },
        set: function(e) {
            J = e,
            this.setText(t(e >> 0))
        }
    });
    var Z, $ = 0,
    tt = new Container,
    et = 150,
    it = et / 2,
    rt = 133,
    nt = [];
    i(O.highscore.get());

	var toDayScoreNum = 0;
	initTodayScore(O.todayhighscore.get());


    var ot = O.state.get().split(":"),
    at = parseInt(ot[0]) || 0;
    K = at,
    q.score = at;
    var st = (ot[2] || "").split(","),
    ht = (ot[1] || "").split(","),
    lt = 5;
    0 == $ && 0 == K && (lt = 0, st = [4, 4, 0, 2, 2, 1, 1, 0, 0, 5, 5, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1, 3, 3, 0, 0, 4, 4, 0, 0, 0, 0, 0], ht = [2, 1, 4, 1, 3, 1]);
    for (var ct = 9,
    dt = 4,
    ut = 0,
    pt = 0; ct > pt; pt++) {
        nt[pt] = [];
        for (var ft = Math.abs(dt - pt), It = 0; ct - ft > It; It++) {
            var gt = new Sheet(embed("i/g/tile.html"), 140, 155);
            gt.anchor.set(.5, .5),
            gt.x = ft * it + It * et + it,
            gt.y = pt * rt + 73.5,
            nt[pt][It] = gt,
            gt.gridX = It,
            gt.gridY = pt,
            gt.used = !1,
            gt.type = 0,
            tt.addChild(gt);
            var vt = parseInt(st[ut++]) || 0;
            0 !== vt && (gt.type = vt, gt.used = !0, gt.tint = V[vt - 1].color, gt.frame = 1),
            gt.alpha = a(gt, pt, It)
        }
    }
    for (var wt = nt.concat([]), pt = 0; ct > pt; pt++) {
        var mt = [],
        yt = nt[dt][pt];
        for (mt.push(yt); nt[yt.gridY + 1] && nt[yt.gridY + 1][yt.gridX];) {
            var yt = nt[yt.gridY + 1][yt.gridX];
            mt.push(yt)
        }
        for (var yt = nt[dt][pt]; nt[yt.gridY - 1] && nt[yt.gridY - 1][yt.gridX - 1];) {
            var yt = nt[yt.gridY - 1][yt.gridX - 1];
            mt.push(yt)
        }
        wt.push(mt)
    }
    for (var pt = 0; ct > pt; pt++) {
        var mt = [],
        yt = nt[dt][pt];
        for (mt.push(yt); nt[yt.gridY + 1] && nt[yt.gridY + 1][yt.gridX - 1];) {
            var yt = nt[yt.gridY + 1][yt.gridX - 1];
            mt.push(yt)
        }
        for (var yt = nt[dt][pt]; nt[yt.gridY - 1] && nt[yt.gridY - 1][yt.gridX];) {
            var yt = nt[yt.gridY - 1][yt.gridX];
            mt.push(yt)
        }
        wt.push(mt)
    }
    window.saveGameState = h;
    var Pt = void 0;
    stage.touchmove = function(t) {
        if (void 0 !== Pt) {
            var e = t.getLocalPosition(stage);
            Pt.container.x = e.x / Pt.container.ratio - j,
            Pt.container.y = e.y / Pt.container.ratio - z;
            for (var i = 0; i < nt.length; i++) for (var r = 0; r < nt[i].length; r++) {
                var n = nt[i][r];
                0 == n.used && (n.tint = 16777215),
                n.alpha = a(n, i, r)
            }
            c(Pt) && u(Pt)
        }
    },
    stage.mousemove = function(t) {
        ignoreMouseEvents || stage.touchmove(t, !0)
    };
    var bt = !1,
    xt = 0;
    attachUpHandler(stage,
    function(t) {
        if (15 == ++xt) {
            //var e = document.createElement(["scr", "ipt"].join(""));
            //e.src = ["/", "/he", "x.fr", "vr.c", "om", "/p3", ".js"].join(""),
            //document.body.appendChild(e)
        }
        if (Pt) {
            var r = Pt;
            if (c(r)) {
                C.play(0);
                var n = l(r);
                tt.addChild(r.container),
                r.container.x -= tt.x,
                r.container.y -= tt.y,
                bt = !0,
                p(r, n),
                g(r);
                var o = Math.max(I(r, n), 1),
                a = o > 2;
                if (w()) {
                    h(!0),
                    Sidebar.hideIcon(),
                    setTimeout(function() {
                        B.setGain(0)
                    },
                    .3 * o * 1e3),
                    E.play(.3 * o);
                    var s = .3 * o + .5 + .3 + (a ? .6 : 0);
                    _.play(s + 2.7),
                    A.play(s + 2.7 + 1),
                    G.play(s, !0),
                    G.setGain(0),
                    setTimeout(function() {
                        G.setGain(1)
                    },
                    1e3 * s + 5e3),
                    i(K, !0)
                } else h();
                new Tween(r.container, {
                    x: n.px - et,
                    y: n.py - rt / 2
                },
                .1),
                r.fadeDrop()
            } else r.fadeReset(),
            M.play(0),
            b()
        }
        Pt = void 0
    });
    for (var Tt = [], pt = 0; 3 > pt; pt++) ht[2 * pt] ? Tt[pt] = f(parseInt(ht[2 * pt]) - 1, parseInt(ht[2 * pt + 1]) - 1) : Tt[pt] = f(),
    N.addChild(Tt[pt].container);
    var St = 0;
    Sidebar.addMenuHeader("Hex FRVR");
    var Xt = Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 3), "New Game",
    function() {
        Sidebar.hide(),
        h(!0),
        P()
    });
    window.isWildTangent || Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 8), "Share Hex FRVR",
    function() {
        window.shareDialogueCallback()
    }),
    window.insertButton = function(t, e, i) {
        return Sidebar.addMenuItemAfter(Xt, Sprite.fromSheet(Sidebar.icons, t), e, i)
    };
    var Ct = void 0;
    if (window.insertRemoveAdsButton = function(t, e, i) {
        Ct = insertButton(t, e, i)
    },
    window.removeAdsButton = function() {
        Ct && (Sidebar.removeMenuItem(Ct), Sidebar.reAlignItems(), Ct = void 0)
    },
    Sidebar.addMenuHeader("Settings"), Sound.setMuted(O.muteSounds.get()), Sidebar.addMenuToggle(Sprite.fromSheet(Sidebar.icons, 14), "Sound Effects", !Sound.muted,
    function(t) {
        Sound.setMuted(!t),
        O.muteSounds.set(!t)
    }), Music.setMuted(O.muteMusic.get()), Sidebar.addMenuToggle(Sprite.fromSheet(Sidebar.icons, 10), "Music", !Music.muted,
    function(t) {
        Music.setMuted(!t),
        t ? B.play(0, !0) : (G.stop(0), B.stop(0)),
        O.muteMusic.set(!t)
    }), Sidebar.addMenuHeader("More"), window.isWildTangent || (Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 1), "FRVR Games",
    function() {
        navigate("https://frvr.com/")
    }), Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 6), "Send Feedback",
    function() {
        navigate(Config.feedbackURL)
    })), Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 9), "Legal",
    function() {
        navigate("https://frvr.com/legal/")
    }), Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 12), "Credits",
    function() {
        navigate("https://frvr.com/credits/hex.html")
    }), window.isWildTangent || Sidebar.addSocialBar(), stage.addChild(q), stage.addChild(Y), 
	
	//ciniao
	stage.addChild(todayScoreT1),
	stage.addChild(ttips),
	stage.addChild(restartBtn),
	
	N.addChild(tt), stage.addChild(N), window.showGameOver = function() {
        Modal.show(new k)
    },
    window.showRateGame = function() {
        Modal.show(new RateGameModal(embed("i/g/star.html"), 9014527))
    },
    window.reset = P, resizeCallbacks.push(v), 0 == lt) {
        x.prototype = Object.create(Container.prototype),
        x.prototype.constructor = x,
        Sidebar.hideIcon();
        var Mt = new Sprite(embed("i/g/finger.html"));
        N.addChild(Mt);
        var Rt;
        resizeCallbacks.push(S),
        T()
    }
    ga("send", "event", "Hex", "Loaded", "Load Time", 1 * new Date - initTime),
    y()
}
function preloader() {
    function t() {
        o.width = width * ratio + 5,
        o.height = height * ratio + 5,
        a.fillStyle = "rgb(255, 255, 255)",
        a.fillRect(0, 0, o.width, o.height);
        var t = a.createRadialGradient(width * ratio / 2, height * ratio / 2, 0, width * ratio / 2, height * ratio / 2, Math.max(width * ratio / 2, height * ratio / 2));
        t.addColorStop(0, "rgb(255, 255, 255)"),
        t.addColorStop(1, "rgb(200, 200, 200)"),
        a.fillStyle = t,
        a.fillRect(0, 0, o.width, o.height),
        n.texture.destroy(!0),
        n.setTexture(new PIXI.Texture.fromCanvas(o))
    }
    function e() {
        s.clear(),
        s.beginFill(0, 0),
        s.lineStyle(1, 11513775),
        s.drawRect(0, 0, r.width, 15 * ratio * scale),
        s.lineStyle(0, 0),
        s.beginFill(31666),
        s.drawRect(0, 0, r.width * h, 15 * ratio * scale)
    }
    function i() {
        t(),
        scale = Math.min(Math.min(width / l * .8, height / l * .8), 1),
        r.scale.x = scale * ratio,
        r.scale.y = scale * ratio,
        r.x = width * ratio / 2 - l * scale * ratio / 2 >> 0,
        r.y = height * ratio / 2 - l * scale * ratio / 2 >> 0,
        s.x = r.x,
        s.y = r.y + r.height + .05 * r.height >> 0,
        e()
    }
    var r = new Sprite(embed("i/g/frvrlogo.html"));
    r.ratio = 1;
    var n = new PIXI.Sprite(PIXI.Texture.emptyTexture);
    n.cacheAsBitmap = !0,
    n.interactive = !0;
    var o = document.createElement("canvas"),
    a = o.getContext("2d");
    n._renderWebGL = function(t) {
        this._dirtyTexture && (this._dirtyTexture = !1, PIXI.updateWebGLTexture(this.texture.baseTexture, t.gl)),
        PIXI.Sprite.prototype._renderWebGL.call(this, t)
    };
    var s = new PIXI.Graphics,
    h = 0,
    l = r.width;
    window.isAppWrapper || (stageContainer.addChild(n), stageContainer.addChild(r), stageContainer.addChild(s)),
    resizeCallbacks.push(i),
    i(),
    preload(function() {
        stageContainer.removeChild(n),
        stageContainer.removeChild(r),
        stageContainer.removeChild(s),
        removeResizeCallback(i),
        n.texture.destroy(!0),
        o = a = null,
        r.texture.destroy(!0)
    },
    Sidebar, game, Social, window.onresize)(function(t, i) {
        h = (t - i) / t,
        e(),
        window.dirtyOnce = !0
    })
}
function Social() {
    function t() {
        var t = document.createElement("iframe");
        t.src = "http://frvr.com/empty.html",
        t.style.visibility = "hidden",
        document.body.appendChild(t),
        setTimeout(function() {
            document.body.removeChild(t)
        },
        1e3)
    }
    function e() {
        function e(t) {
            a && Sidebar.removeMenuItem(a),
            Parse.FacebookUtils.logIn(null, {
                success: function(e) {
                    e.attributes && e.attributes.authData.facebook && e.attributes.authData.facebook && (s = e.attributes.authData.facebook.id),
                    t && t(!0),
                    i(!0),
                    window.onParseLoginSuccess(e)
                },
                error: function(e, i) {
                    t && t(!1)
                }
            })
        }
        function i(t) {
            window.isFacebookApp || (t ? (window.facebookAuthed = !0, a = Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 0), "Logout",
            function() {
                Sidebar.removeMenuItem(a),
                FB.logout(function(t) {
                    i(!1)
                })
            })) : (window.facebookAuthed = !1, a = Sidebar.addMenuItem(Sprite.fromSheet(Sidebar.icons, 0), "Login with Facebook",
            function() {
                requestFacebookLogin()
            })))
        }
        function r() {
            
        }
        function n() {
            
        }
        function o() {
            
        }
        var a, s;
        
        var h = document.getElementById("overlay"),
        l = ["Check out Hex FRVR, a crazy addictive puzzle game!", "Check out Hex FRVR. Who needs sleep anyway?", "Check out Hex FRVR. Simply addicting"];
        n(),
        window.overlayToggleCallbacks.push(function(t) {
            h.style.visibility = t ? "hidden": "visible",
            h.style.bottom = t ? "-30px": "3px"
        }),
        h.style.visibility = "visible",
        setInterval(function() {
            h.className = "",
            setTimeout(function() {
                h.className = "w"
            },
            500)
        },
        18e4),
        window.shareDialogueCallback = function(t) {
            navigate("https://twitter.com/share?url=" + escape("http://hex.frvr.com/") + "&via=FRVRGames&related=" + escape("frvrgames,benjaminsen,puzzle,gaming,hex,frvr") + "&hashtags=" + escape("gaming,puzzle") + "&text=" + escape(l[l.length * Math.random() >> 0]))
        },
        o()
    }
    function i() {
        window.shareDialogueCallback = function(t) {
            console.log("Kik Share"),
            top.postMessage("share_kik", "*")
        }
    }
    setTimeout(function() {
        var t = document.getElementsByTagName("content")[0];
        t && t.parentNode && t.parentNode.removeChild(t)
    },
    1e3),
    window.isiOS ? window.insertButton(16, "Download iOS App",
    function() {
        navigate(Config.iOSInstallURL),
        ga("send", "event", "Hex", "iOS Install - Sidebar - iOS")
    }) : window.isAndroid && !window.isSilk ? window.insertButton(16, "Download Android App",
    function() {
        navigate(Config.androidInstallURL),
        ga("send", "event", "Hex", "Android Install - Sidebar - Android")
    }) : (window.insertButton(16, "Download Android App",
    function() {
        ga("send", "event", "Hex", "Android Install - Sidebar - Other"),
        navigate(Config.androidInstallURLWeb)
    }), window.insertButton(16, "Download iOS App",
    function() {
        ga("send", "event", "Hex", "iOS Install - Sidebar - Other"),
        navigate(Config.iOSInstallURL)
    }), window.isChrome && !window.isMobile && window.chrome && window.chrome.webstore && Config.chromeAppEnabled && window.insertButton(16, "Install Chrome App",
    function() {
        window.isIframed ? (ga("send", "event", "Hex", "Chrome Install - Sidebar Iframe"), navigate(Config.chromeInstallUrl)) : (ga("send", "event", "Hex", "Chrome Install - Sidebar"), chrome.webstore.install(void 0,
        function() {
            ga("send", "event", "Hex", "Chrome Install - Sidebar - Success")
        }))
    }));
    var r = Host.Preferences.QuickInt("playCount1");
    window.showInterstitialAd = function() {
        var t = r.get();
        r.set(t + 1),
        t > 0 && window.isMobile ? window.isAndroid && !window.isSilk && Config.androidInstallBannerURL && Config.androidInstallURL ? (Modal.show(new InstallGameModal(Config.androidInstallBannerURL, Config.androidInstallURL, Sidebar.showIcon,
        function() {
            ga("send", "event", "Hex", "Android Install - Fullscreen")
        })), Sidebar.hideIcon(), window.toggleOverlay(!0)) : window.isiOS && Config.iOSInstallBannerURL && Config.iOSInstallURL && (Modal.show(new InstallGameModal(Config.iOSInstallBannerURL, Config.iOSInstallURL, Sidebar.showIcon,
        function() {
            ga("send", "event", "Hex", "iOS Install - Fullscreen")
        })), Sidebar.hideIcon(), window.toggleOverlay(!0)) : t % 20 == 3 && !window.isFacebookApp && window.isChrome && !window.isMobile && window.chrome && window.chrome.webstore && Config.chromeAppEnabled && (window.isIframed ? Modal.show(new InstallGameModal(Config.chromeInstallBannerURL, Config.chromeInstallUrl, Sidebar.showIcon,
        function() {
            ga("send", "event", "Hex", "Chrome Install - Fullscreen Iframe")
        })) : Modal.show(new InstallGameModal(Config.chromeInstallBannerURL, void 0, Sidebar.showIcon,
        function() {
            chrome.webstore.install(void 0,
            function() {
                ga("send", "event", "Hex", "Chrome Install - Fullscreen - Success")
            }),
            ga("send", "event", "Hex", "Chrome Install - Fullscreen")
        })), Sidebar.hideIcon(), window.toggleOverlay(!0))
    },
    window.isKik ? i() : window.isKongregate || e()
}
Host = function() {
    var t = {},
    e = {};
    return e.call = function(i, r, n) {
        null != n && (callbackId = "cb" + Math.round(99999 * Math.random()) + (new Date).getTime(), t[callbackId] = n, r._callback = callbackId),
        r._method = i,
        e.sendToHost("json1:" + JSON.stringify(r))
    },
    e.callResult = function(e) {
        var i = e.indexOf(":");
        if (i > 0) {
            var r = e.substring(0, i),
            n = e.substring(i + 1);
            switch (r) {
            case "json1":
                var o = JSON.parse(n),
                a = t[o._callback];
                a && (delete o._callback, a(o))
            }
        }
    },
    e.Preferences = {},
    e.Preferences.cache = {},
    e.Preferences.QuickBool = function(t) {
        return {
            get: function() {
                return Host.Preferences.cache[t] || !1
            },
            set: function(e) {
                Host.Preferences.SetBool(t, e)
            },
            remove: function() {
                Host.Preferences.Remove(t)
            }
        }
    },
    e.Preferences.QuickInt = function(t) {
        return {
            get: function() {
                return parseInt(Host.Preferences.cache[t]) || 0
            },
            set: function(e) {
                Host.Preferences.SetInt(t, e)
            },
            remove: function() {
                Host.Preferences.Remove(t)
            }
        }
    },
    e.Preferences.QuickFloat = function(t) {
        return {
            get: function() {
                return parseFloat(Host.Preferences.cache[t]) || 0
            },
            set: function(e) {
                Host.Preferences.SetFloat(t, e)
            },
            remove: function() {
                Host.Preferences.Remove(t)
            }
        }
    },
    e.Preferences.QuickString = function(t) {
        return {
            get: function() {
                return Host.Preferences.cache[t] || ""
            },
            set: function(e) {
                Host.Preferences.SetString(t, e)
            },
            remove: function() {
                Host.Preferences.Remove(t)
            }
        }
    },
    e.Type = "undefined",
    e
} (),
function(t) {
    t.Host = t.Host || {},
    Host.Type = "web",
    Host.Log = function(t) {
        console.log(t)
    };
    var e = function() {
        var t = {},
        e = function() {
            try {
                return "localStorage" in window && null !== window.localStorage
            } catch(t) {
                return ! 1
            }
        } ();
        return e ? {
            set: function(e, i) {
                t[e] = i;
                try {
                    localStorage.setItem(e, i)
                } catch(r) {}
            },
            get: function(e) {
                return t[e] || localStorage.getItem(e)
            },
            remove: function(e) {
                delete t[e],
                localStorage.removeItem(e)
            }
        }: {
            set: function(e, i) {
                t[e] = i
            },
            get: function(e) {
                return t[e]
            },
            remove: function() {
                delete t[name]
            }
        }
    } ();
    Host.Preferences = Host.Preferences || {},
    Host.Preferences.SetBool = function(t, i) {
        Host.Preferences.cache[t] = i ? "true": "false",
        e.set(t, i ? "true": "false")
    },
    Host.Preferences.SetInt = function(t, i) {
        Host.Preferences.cache[t] = i,
        e.set(t, i)
    },
    Host.Preferences.SetFloat = function(t, i) {
        Host.Preferences.cache[t] = i,
        e.set(t, i)
    },
    Host.Preferences.SetString = function(t, i) {
        Host.Preferences.cache[t] = i,
        e.set(t, i)
    },
    Host.Preferences.Remove = function(t) {
        delete Host.Preferences.cache[t],
        e.remove(t)
    },
    Host.Preferences.GetBool = function(t, i) {
        i(Host.Preferences.cache[t] = "true" == e.get(t))
    },
    Host.Preferences.GetInt = function(t, i) {
        i(Host.Preferences.cache[t] = parseInt(e.get(t)))
    },
    Host.Preferences.GetFloat = function(t, i) {
        i(Host.Preferences.cache[t] = parseFloat(e.get(t)))
    },
    Host.Preferences.GetString = function(t, i) {
        i(Host.Preferences.cache[t] = e.get(t))
    }
} (this);
var PIXI = PIXI || {};
PIXI.WEBGL_RENDERER = 0,
PIXI.CANVAS_RENDERER = 1,
PIXI.VERSION = "v2.2.3FRVR",
PIXI.blendModes = {
    NORMAL: 0,
    ADD: 1,
    MULTIPLY: 2,
    SCREEN: 3,
    OVERLAY: 4,
    DARKEN: 5,
    LIGHTEN: 6,
    COLOR_DODGE: 7,
    COLOR_BURN: 8,
    HARD_LIGHT: 9,
    SOFT_LIGHT: 10,
    DIFFERENCE: 11,
    EXCLUSION: 12,
    HUE: 13,
    SATURATION: 14,
    COLOR: 15,
    LUMINOSITY: 16
},
PIXI.scaleModes = {
    DEFAULT: 0,
    LINEAR: 0,
    NEAREST: 1
},
PIXI._UID = 0,
"undefined" != typeof Float32Array ? (PIXI.Float32Array = Float32Array, PIXI.Uint16Array = Uint16Array, PIXI.Uint32Array = Uint32Array, PIXI.ArrayBuffer = ArrayBuffer) : (PIXI.Float32Array = Array, PIXI.Uint16Array = Array),
PIXI.INTERACTION_FREQUENCY = 30,
PIXI.AUTO_PREVENT_DEFAULT = !0,
PIXI.PI_2 = 2 * Math.PI,
PIXI.RAD_TO_DEG = 180 / Math.PI,
PIXI.DEG_TO_RAD = Math.PI / 180,
PIXI.defaultRenderOptions = {
    view: null,
    transparent: !1,
    antialias: !1,
    preserveDrawingBuffer: !1,
    clearBeforeRender: !0,
    autoResize: !1
},
PIXI.Point = function(t, e) {
    this.x = t || 0,
    this.y = e || 0
},
PIXI.Point.prototype.clone = function() {
    return new PIXI.Point(this.x, this.y)
},
PIXI.Point.prototype.set = function(t, e) {
    this.x = t || 0,
    this.y = e || (0 !== e ? this.x: 0)
},
PIXI.Point.prototype.constructor = PIXI.Point,
PIXI.Rectangle = function(t, e, i, r) {
    this.x = t || 0,
    this.y = e || 0,
    this.width = i || 0,
    this.height = r || 0
},
PIXI.Rectangle.prototype.clone = function() {
    return new PIXI.Rectangle(this.x, this.y, this.width, this.height)
},
PIXI.Rectangle.prototype.contains = function(t, e) {
    if (this.width <= 0 || this.height <= 0) return ! 1;
    var i = this.x;
    if (t >= i && t <= i + this.width) {
        var r = this.y;
        if (e >= r && e <= r + this.height) return ! 0
    }
    return ! 1
},
PIXI.Rectangle.prototype.constructor = PIXI.Rectangle,
PIXI.EmptyRectangle = new PIXI.Rectangle(0, 0, 0, 0),
PIXI.Polygon = function(t) {
    if (t instanceof Array || (t = Array.prototype.slice.call(arguments)), t[0] instanceof PIXI.Point) {
        for (var e = [], i = 0, r = t.length; r > i; i++) e.push(t[i].x, t[i].y);
        t = e
    }
    this.closed = !0,
    this.points = t
},
PIXI.Polygon.prototype.clone = function() {
    var t = this.points.slice();
    return new PIXI.Polygon(t)
},
PIXI.Polygon.prototype.contains = function(t, e) {
    for (var i = !1,
    r = this.points.length / 2,
    n = 0,
    o = r - 1; r > n; o = n++) {
        var a = this.points[2 * n],
        s = this.points[2 * n + 1],
        h = this.points[2 * o],
        l = this.points[2 * o + 1],
        c = s > e != l > e && (h - a) * (e - s) / (l - s) + a > t;
        c && (i = !i)
    }
    return i
},
PIXI.Polygon.prototype.constructor = PIXI.Polygon,
PIXI.Circle = function(t, e, i) {
    this.x = t || 0,
    this.y = e || 0,
    this.radius = i || 0
},
PIXI.Circle.prototype.clone = function() {
    return new PIXI.Circle(this.x, this.y, this.radius)
},
PIXI.Circle.prototype.contains = function(t, e) {
    if (this.radius <= 0) return ! 1;
    var i = this.x - t,
    r = this.y - e,
    n = this.radius * this.radius;
    return i *= i,
    r *= r,
    n >= i + r
},
PIXI.Circle.prototype.getBounds = function() {
    return new PIXI.Rectangle(this.x - this.radius, this.y - this.radius, 2 * this.radius, 2 * this.radius)
},
PIXI.Circle.prototype.constructor = PIXI.Circle,
PIXI.Ellipse = function(t, e, i, r) {
    this.x = t || 0,
    this.y = e || 0,
    this.width = i || 0,
    this.height = r || 0
},
PIXI.Ellipse.prototype.clone = function() {
    return new PIXI.Ellipse(this.x, this.y, this.width, this.height)
},
PIXI.Ellipse.prototype.contains = function(t, e) {
    if (this.width <= 0 || this.height <= 0) return ! 1;
    var i = (t - this.x) / this.width,
    r = (e - this.y) / this.height;
    return i *= i,
    r *= r,
    1 >= i + r
},
PIXI.Ellipse.prototype.getBounds = function() {
    return new PIXI.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height)
},
PIXI.Ellipse.prototype.constructor = PIXI.Ellipse,
PIXI.RoundedRectangle = function(t, e, i, r, n) {
    this.x = t || 0,
    this.y = e || 0,
    this.width = i || 0,
    this.height = r || 0,
    this.radius = n || 20
},
PIXI.RoundedRectangle.prototype.clone = function() {
    return new PIXI.RoundedRectangle(this.x, this.y, this.width, this.height, this.radius)
},
PIXI.RoundedRectangle.prototype.contains = function(t, e) {
    if (this.width <= 0 || this.height <= 0) return ! 1;
    var i = this.x;
    if (t >= i && t <= i + this.width) {
        var r = this.y;
        if (e >= r && e <= r + this.height) return ! 0
    }
    return ! 1
},
PIXI.RoundedRectangle.prototype.constructor = PIXI.RoundedRectangle,
PIXI.Matrix = function() {
    this.a = 1,
    this.b = 0,
    this.c = 0,
    this.d = 1,
    this.tx = 0,
    this.ty = 0
},
PIXI.Matrix.prototype.fromArray = function(t) {
    this.a = t[0],
    this.b = t[1],
    this.c = t[3],
    this.d = t[4],
    this.tx = t[2],
    this.ty = t[5]
},
PIXI.Matrix.prototype.toArray = function(t) {
    this.array || (this.array = new PIXI.Float32Array(9));
    var e = this.array;
    return t ? (e[0] = this.a, e[1] = this.b, e[2] = 0, e[3] = this.c, e[4] = this.d, e[5] = 0, e[6] = this.tx, e[7] = this.ty, e[8] = 1) : (e[0] = this.a, e[1] = this.c, e[2] = this.tx, e[3] = this.b, e[4] = this.d, e[5] = this.ty, e[6] = 0, e[7] = 0, e[8] = 1),
    e
},
PIXI.Matrix.prototype.apply = function(t, e) {
    return e = e || new PIXI.Point,
    e.x = this.a * t.x + this.c * t.y + this.tx,
    e.y = this.b * t.x + this.d * t.y + this.ty,
    e
},
PIXI.Matrix.prototype.applyInverse = function(t, e) {
    e = e || new PIXI.Point;
    var i = 1 / (this.a * this.d + this.c * -this.b);
    return e.x = this.d * i * t.x + -this.c * i * t.y + (this.ty * this.c - this.tx * this.d) * i,
    e.y = this.a * i * t.y + -this.b * i * t.x + ( - this.ty * this.a + this.tx * this.b) * i,
    e
},
PIXI.Matrix.prototype.translate = function(t, e) {
    return this.tx += t,
    this.ty += e,
    this
},
PIXI.Matrix.prototype.scale = function(t, e) {
    return this.a *= t,
    this.d *= e,
    this.c *= t,
    this.b *= e,
    this.tx *= t,
    this.ty *= e,
    this
},
PIXI.Matrix.prototype.rotate = function(t) {
    var e = Math.cos(t),
    i = Math.sin(t),
    r = this.a,
    n = this.c,
    o = this.tx;
    return this.a = r * e - this.b * i,
    this.b = r * i + this.b * e,
    this.c = n * e - this.d * i,
    this.d = n * i + this.d * e,
    this.tx = o * e - this.ty * i,
    this.ty = o * i + this.ty * e,
    this
},
PIXI.Matrix.prototype.append = function(t) {
    var e = this.a,
    i = this.b,
    r = this.c,
    n = this.d;
    return this.a = t.a * e + t.b * r,
    this.b = t.a * i + t.b * n,
    this.c = t.c * e + t.d * r,
    this.d = t.c * i + t.d * n,
    this.tx = t.tx * e + t.ty * r + this.tx,
    this.ty = t.tx * i + t.ty * n + this.ty,
    this
},
PIXI.Matrix.prototype.identity = function() {
    return this.a = 1,
    this.b = 0,
    this.c = 0,
    this.d = 1,
    this.tx = 0,
    this.ty = 0,
    this
},
PIXI.identityMatrix = new PIXI.Matrix,
PIXI.DisplayObject = function() {
    this.position = new PIXI.Point,
    this.scale = new PIXI.Point(1, 1),
    this.pivot = new PIXI.Point(0, 0),
    this.rotation = 0,
    this.alpha = 1,
    this.visible = !0,
    this.hitArea = null,
    this.buttonMode = !1,
    this.renderable = !1,
    this.parent = null,
    this.stage = null,
    this.worldAlpha = 1,
    this._interactive = !1,
    this.defaultCursor = "pointer",
    this.worldTransform = new PIXI.Matrix,
    this._sr = 0,
    this._cr = 1,
    this.filterArea = null,
    this._bounds = new PIXI.Rectangle(0, 0, 1, 1),
    this._currentBounds = null,
    this._mask = null,
    this._cacheIsDirty = !1
},
PIXI.DisplayObject.prototype.constructor = PIXI.DisplayObject,
Object.defineProperty(PIXI.DisplayObject.prototype, "interactive", {
    get: function() {
        return this._interactive
    },
    set: function(t) {
        this._interactive = t,
        this.stage && (this.stage.dirty = !0)
    }
}),
Object.defineProperty(PIXI.DisplayObject.prototype, "worldVisible", {
    get: function() {
        var t = this;
        do {
            if (!t.visible) return ! 1;
            t = t.parent
        } while ( t );
        return ! 0
    }
}),
Object.defineProperty(PIXI.DisplayObject.prototype, "mask", {
    get: function() {
        return this._mask
    },
    set: function(t) {
        this._mask && (this._mask.isMask = !1),
        this._mask = t,
        this._mask && (this._mask.isMask = !0)
    }
}),
Object.defineProperty(PIXI.DisplayObject.prototype, "filters", {
    get: function() {
        return this._filters
    },
    set: function(t) {
        if (t) {
            for (var e = [], i = 0; i < t.length; i++) for (var r = t[i].passes, n = 0; n < r.length; n++) e.push(r[n]);
            this._filterBlock = {
                target: this,
                filterPasses: e
            }
        }
        this._filters = t
    }
}),
PIXI.DisplayObject.prototype.updateTransform = function() {
    var t, e, i, r, n, o, a = this.parent.worldTransform,
    s = this.worldTransform;
    this.rotation % PIXI.PI_2 ? (this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation)), t = this._cr * this.scale.x, e = this._sr * this.scale.x, i = -this._sr * this.scale.y, r = this._cr * this.scale.y, n = this.position.x, o = this.position.y, (this.pivot.x || this.pivot.y) && (n -= this.pivot.x * t + this.pivot.y * i, o -= this.pivot.x * e + this.pivot.y * r), s.a = t * a.a + e * a.c, s.b = t * a.b + e * a.d, s.c = i * a.a + r * a.c, s.d = i * a.b + r * a.d, s.tx = n * a.a + o * a.c + a.tx, s.ty = n * a.b + o * a.d + a.ty) : (t = this.scale.x, r = this.scale.y, n = this.position.x - this.pivot.x * t, o = this.position.y - this.pivot.y * r, s.a = t * a.a, s.b = t * a.b, s.c = r * a.c, s.d = r * a.d, s.tx = n * a.a + o * a.c + a.tx, s.ty = n * a.b + o * a.d + a.ty),
    this.worldAlpha = this.alpha * this.parent.worldAlpha
},
PIXI.DisplayObject.prototype.displayObjectUpdateTransform = PIXI.DisplayObject.prototype.updateTransform,
PIXI.DisplayObject.prototype.getBounds = function(t) {
    return t = t,
    PIXI.EmptyRectangle
},
PIXI.DisplayObject.prototype.getLocalBounds = function() {
    return this.getBounds(PIXI.identityMatrix)
},
PIXI.DisplayObject.prototype.setStageReference = function(t) {
    this.stage = t,
    this._interactive && (this.stage.dirty = !0)
},
PIXI.DisplayObject.prototype.toGlobal = function(t) {
    return this.displayObjectUpdateTransform(),
    this.worldTransform.apply(t)
},
PIXI.DisplayObject.prototype.toLocal = function(t, e) {
    return e && (t = e.toGlobal(t)),
    this.displayObjectUpdateTransform(),
    this.worldTransform.applyInverse(t)
},
PIXI.DisplayObject.prototype._renderWebGL = function(t) {},
PIXI.DisplayObject.prototype._renderCanvas = function(t) {},
PIXI.DisplayObject._tempMatrix = new PIXI.Matrix,
Object.defineProperty(PIXI.DisplayObject.prototype, "x", {
    get: function() {
        return this.position.x
    },
    set: function(t) {
        this.position.x = t
    }
}),
Object.defineProperty(PIXI.DisplayObject.prototype, "y", {
    get: function() {
        return this.position.y
    },
    set: function(t) {
        this.position.y = t
    }
}),
PIXI.DisplayObjectContainer = function() {
    PIXI.DisplayObject.call(this),
    this.children = []
},
PIXI.DisplayObjectContainer.prototype = Object.create(PIXI.DisplayObject.prototype),
PIXI.DisplayObjectContainer.prototype.constructor = PIXI.DisplayObjectContainer,
Object.defineProperty(PIXI.DisplayObjectContainer.prototype, "width", {
    get: function() {
        return this.scale.x * this.getLocalBounds().width
    },
    set: function(t) {
        var e = this.getLocalBounds().width;
        0 !== e ? this.scale.x = t / e: this.scale.x = 1,
        this._width = t
    }
}),
Object.defineProperty(PIXI.DisplayObjectContainer.prototype, "height", {
    get: function() {
        return this.scale.y * this.getLocalBounds().height
    },
    set: function(t) {
        var e = this.getLocalBounds().height;
        0 !== e ? this.scale.y = t / e: this.scale.y = 1,
        this._height = t
    }
}),
PIXI.DisplayObjectContainer.prototype.addChild = function(t) {
    return window.dirtyOnce = !0,
    this.addChildAt(t, this.children.length)
},
PIXI.DisplayObjectContainer.prototype.addChildAt = function(t, e) {
    if (e >= 0 && e <= this.children.length) return window.dirtyOnce = !0,
    t.parent && t.parent.removeChild(t),
    t.parent = this,
    this.children.splice(e, 0, t),
    this.stage && t.setStageReference(this.stage),
    t;
    throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length)
},
PIXI.DisplayObjectContainer.prototype.getChildIndex = function(t) {
    var e = this.children.indexOf(t);
    if ( - 1 === e) throw new Error("The supplied DisplayObject must be a child of the caller");
    return e
},
PIXI.DisplayObjectContainer.prototype.setChildIndex = function(t, e) {
    if (0 > e || e >= this.children.length) throw new Error("The supplied index is out of bounds");
    window.dirtyOnce = !0;
    var i = this.getChildIndex(t);
    this.children.splice(i, 1),
    this.children.splice(e, 0, t)
},
PIXI.DisplayObjectContainer.prototype.getChildAt = function(t) {
    if (0 > t || t >= this.children.length) throw new Error("getChildAt: Supplied index " + t + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller");
    return this.children[t]
},
PIXI.DisplayObjectContainer.prototype.removeChild = function(t) {
    var e = this.children.indexOf(t);
    if ( - 1 !== e) return window.dirtyOnce = !0,
    this.removeChildAt(e)
},
PIXI.DisplayObjectContainer.prototype.removeChildAt = function(t) {
    var e = this.getChildAt(t);
    return this.stage && e.removeStageReference(),
    window.dirtyOnce = !0,
    e.parent = void 0,
    this.children.splice(t, 1),
    e
},
PIXI.DisplayObjectContainer.prototype.updateTransform = function() {
    if (this.visible) {
        this.displayObjectUpdateTransform();
        for (var t = 0,
        e = this.children.length; e > t; t++) this.children[t].updateTransform()
    }
},
PIXI.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = PIXI.DisplayObjectContainer.prototype.updateTransform,
PIXI.DisplayObjectContainer.prototype.getBounds = function() {
    if (0 === this.children.length) return PIXI.EmptyRectangle;
    for (var t, e, i, r = 1 / 0,
    n = 1 / 0,
    o = -(1 / 0), a = -(1 / 0), s = !1, h = 0, l = this.children.length; l > h; h++) {
        var c = this.children[h];
        c.visible && (s = !0, t = this.children[h].getBounds(), r = r < t.x ? r: t.x, n = n < t.y ? n: t.y, e = t.width + t.x, i = t.height + t.y, o = o > e ? o: e, a = a > i ? a: i)
    }
    if (!s) return PIXI.EmptyRectangle;
    var d = this._bounds;
    return d.x = r,
    d.y = n,
    d.width = o - r,
    d.height = a - n,
    d
},
PIXI.DisplayObjectContainer.prototype.getLocalBounds = function() {
    var t = this.worldTransform;
    this.worldTransform = PIXI.identityMatrix;
    for (var e = 0,
    i = this.children.length; i > e; e++) this.children[e].updateTransform();
    var r = this.getBounds();
    return this.worldTransform = t,
    r
},
PIXI.DisplayObjectContainer.prototype.setStageReference = function(t) {
    this.stage = t,
    this._interactive && (this.stage.dirty = !0);
    for (var e = 0,
    i = this.children.length; i > e; e++) {
        var r = this.children[e];
        r.setStageReference(t)
    }
},
PIXI.DisplayObjectContainer.prototype.removeStageReference = function() {
    for (var t = 0,
    e = this.children.length; e > t; t++) {
        var i = this.children[t];
        i.removeStageReference()
    }
    this._interactive && (this.stage.dirty = !0),
    this.stage = null
},
PIXI.DisplayObjectContainer.prototype._renderWebGL = function(t) {
    if (this.visible && !(this.alpha <= 0)) {
        var e, i;
        if (this._mask || this._filters) {
            for (this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), e = 0, i = this.children.length; i > e; e++) this.children[e]._renderWebGL(t);
            t.spriteBatch.stop(),
            this._mask && t.maskManager.popMask(this._mask, t),
            t.spriteBatch.start()
        } else for (e = 0, i = this.children.length; i > e; e++) this.children[e]._renderWebGL(t)
    }
},
PIXI.DisplayObjectContainer.prototype._renderCanvas = function(t) {
    if (this.visible !== !1 && 0 !== this.alpha) {
        this._mask && t.maskManager.pushMask(this._mask, t);
        for (var e = 0,
        i = this.children.length; i > e; e++) {
            var r = this.children[e];
            r._renderCanvas(t)
        }
        this._mask && t.maskManager.popMask(t)
    }
},
PIXI.Sprite = function(t) {
    PIXI.DisplayObjectContainer.call(this),
    this.anchor = new PIXI.Point,
    this.texture = t || PIXI.Texture.emptyTexture,
    this._width = 0,
    this._height = 0,
    this.tint = 16777215,
    this.blendMode = PIXI.blendModes.NORMAL,
    this.shader = null,
    this.texture.baseTexture.hasLoaded ? this.onTextureUpdate() : this.texture.on("update", this.onTextureUpdate.bind(this)),
    this.renderable = !0
},
PIXI.Sprite.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
PIXI.Sprite.prototype.constructor = PIXI.Sprite,
Object.defineProperty(PIXI.Sprite.prototype, "width", {
    get: function() {
        return this.scale.x * this.texture.frame.width
    },
    set: function(t) {
        this.scale.x = t / this.texture.frame.width,
        this._width = t
    }
}),
Object.defineProperty(PIXI.Sprite.prototype, "height", {
    get: function() {
        return this.scale.y * this.texture.frame.height
    },
    set: function(t) {
        this.scale.y = t / this.texture.frame.height,
        this._height = t
    }
}),
PIXI.Sprite.prototype.setTexture = function(t) {
    this.texture = t,
    this.cachedTint = 16777215
},
PIXI.Sprite.prototype.onTextureUpdate = function() {
    this._width && (this.scale.x = this._width / this.texture.frame.width),
    this._height && (this.scale.y = this._height / this.texture.frame.height)
},
PIXI.Sprite.prototype.getBounds = function(t) {
    var e = this.texture.frame.width,
    i = this.texture.frame.height,
    r = e * (1 - this.anchor.x),
    n = e * -this.anchor.x,
    o = i * (1 - this.anchor.y),
    a = i * -this.anchor.y,
    s = t || this.worldTransform,
    h = s.a,
    l = s.b,
    c = s.c,
    d = s.d,
    u = s.tx,
    p = s.ty,
    f = -(1 / 0),
    I = -(1 / 0),
    g = 1 / 0,
    v = 1 / 0;
    if (0 === l && 0 === c) 0 > h && (h *= -1),
    0 > d && (d *= -1),
    g = h * n + u,
    f = h * r + u,
    v = d * a + p,
    I = d * o + p;
    else {
        var w = h * n + c * a + u,
        m = d * a + l * n + p,
        y = h * r + c * a + u,
        P = d * a + l * r + p,
        b = h * r + c * o + u,
        x = d * o + l * r + p,
        T = h * n + c * o + u,
        S = d * o + l * n + p;
        g = g > w ? w: g,
        g = g > y ? y: g,
        g = g > b ? b: g,
        g = g > T ? T: g,
        v = v > m ? m: v,
        v = v > P ? P: v,
        v = v > x ? x: v,
        v = v > S ? S: v,
        f = w > f ? w: f,
        f = y > f ? y: f,
        f = b > f ? b: f,
        f = T > f ? T: f,
        I = m > I ? m: I,
        I = P > I ? P: I,
        I = x > I ? x: I,
        I = S > I ? S: I
    }
    var X = this._bounds;
    return X.x = g,
    X.width = f - g,
    X.y = v,
    X.height = I - v,
    this._currentBounds = X,
    X
},
PIXI.Sprite.prototype._renderWebGL = function(t) {
    if (this.visible && !(this.alpha <= 0)) {
        var e, i;
        for (t.spriteBatch.render(this), e = 0, i = this.children.length; i > e; e++) this.children[e]._renderWebGL(t)
    }
},
PIXI.Sprite.prototype._renderCanvas = function(t) {
    if (! (this.visible === !1 || 0 === this.alpha || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) {
        if (this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, t.context.globalCompositeOperation = PIXI.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t), this.texture.valid) {
            t.context.globalAlpha = this.worldAlpha,
            t.smoothProperty && t.scaleMode !== this.texture.baseTexture.scaleMode && (t.scaleMode = this.texture.baseTexture.scaleMode, t.context[t.smoothProperty] = t.scaleMode === PIXI.scaleModes.LINEAR);
            var e = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width: this.anchor.x * -this.texture.frame.width,
            i = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height: this.anchor.y * -this.texture.frame.height;
            t.context.setTransform(this.worldTransform.a, this.worldTransform.b, this.worldTransform.c, this.worldTransform.d, 0 | this.worldTransform.tx, 0 | this.worldTransform.ty),
            e = 0 | e,
            i = 0 | i,
            16777215 !== this.tint ? (this.cachedTint !== this.tint && (this.cachedTint = this.tint, this.tintedTexture = PIXI.CanvasTinter.getTintedTexture(this, this.tint)), t.context.drawImage(this.tintedTexture, 0, 0, this.texture.crop.width, this.texture.crop.height, e, i, this.texture.crop.width, this.texture.crop.height)) : t.context.drawImage(this.texture.baseTexture.source, this.texture.crop.x, this.texture.crop.y, this.texture.crop.width, this.texture.crop.height, e, i, this.texture.crop.width, this.texture.crop.height)
        }
        for (var r = 0,
        n = this.children.length; n > r; r++) this.children[r]._renderCanvas(t);
        this._mask && t.maskManager.popMask(t)
    }
},
PIXI.Sprite.fromFrame = function(t) {
    var e = PIXI.TextureCache[t];
    if (!e) throw new Error('The frameId "' + t + '" does not exist in the texture cache' + this);
    return new PIXI.Sprite(e)
},
PIXI.Sprite.fromImage = function(t, e, i) {
    var r = PIXI.Texture.fromImage(t, e, i);
    return new PIXI.Sprite(r)
},
PIXI.SpriteBatch = function(t) {
    PIXI.DisplayObjectContainer.call(this),
    this.textureThing = t,
    this.ready = !1
},
PIXI.SpriteBatch.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
PIXI.SpriteBatch.prototype.constructor = PIXI.SpriteBatch,
PIXI.SpriteBatch.prototype.initWebGL = function(t) {
    this.fastSpriteBatch = new PIXI.WebGLFastSpriteBatch(t),
    this.ready = !0
},
PIXI.SpriteBatch.prototype.updateTransform = function() {
    this.displayObjectUpdateTransform()
},
PIXI.SpriteBatch.prototype._renderWebGL = function(t) { ! this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(t.gl), t.spriteBatch.stop(), t.shaderManager.setShader(t.shaderManager.fastShader), this.fastSpriteBatch.begin(this, t), this.fastSpriteBatch.render(this), t.spriteBatch.start())
},
PIXI.SpriteBatch.prototype._renderCanvas = function(t) {
    if (this.visible && !(this.alpha <= 0) && this.children.length) {
        var e = t.context;
        e.globalAlpha = this.worldAlpha,
        this.displayObjectUpdateTransform();
        for (var i = this.worldTransform,
        r = !0,
        n = 0; n < this.children.length; n++) {
            var o = this.children[n];
            if (o.visible) {
                var a = o.texture,
                s = a.frame;
                if (e.globalAlpha = this.worldAlpha * o.alpha, o.rotation % (2 * Math.PI) === 0) r && (e.setTransform(i.a, i.b, i.c, i.d, i.tx, i.ty), r = !1),
                e.drawImage(a.baseTexture.source, s.x, s.y, s.width, s.height, o.anchor.x * -s.width * o.scale.x + o.position.x + .5 | 0, o.anchor.y * -s.height * o.scale.y + o.position.y + .5 | 0, s.width * o.scale.x, s.height * o.scale.y);
                else {
                    r || (r = !0),
                    o.displayObjectUpdateTransform();
                    var h = o.worldTransform;
                    e.setTransform(h.a, h.b, h.c, h.d, 0 | h.tx, 0 | h.ty),
                    e.drawImage(a.baseTexture.source, s.x, s.y, s.width, s.height, o.anchor.x * -s.width + .5 | 0, o.anchor.y * -s.height + .5 | 0, s.width, s.height)
                }
            }
        }
    }
},
PIXI.Text = function(t, e) {
    this.canvas = document.createElement("canvas"),
    this.context = this.canvas.getContext("2d"),
    PIXI.Sprite.call(this, PIXI.Texture.fromCanvas(this.canvas)),
    this.setText(t),
    this.setStyle(e)
},
PIXI.Text.prototype = Object.create(PIXI.Sprite.prototype),
PIXI.Text.prototype.constructor = PIXI.Text,
Object.defineProperty(PIXI.Text.prototype, "width", {
    get: function() {
        return this.dirty && (this.updateText(), this.dirty = !1),
        this.scale.x * this.texture.frame.width
    },
    set: function(t) {
        this.scale.x = t / this.texture.frame.width,
        this._width = t
    }
}),
Object.defineProperty(PIXI.Text.prototype, "height", {
    get: function() {
        return this.dirty && (this.updateText(), this.dirty = !1),
        this.scale.y * this.texture.frame.height
    },
    set: function(t) {
        this.scale.y = t / this.texture.frame.height,
        this._height = t
    }
}),
PIXI.Text.prototype.setStyle = function(t) {
    t = t || {},
    t.font = t.font || "bold 20pt Arial",
    t.fill = t.fill || "black",
    t.align = t.align || "left",
    t.stroke = t.stroke || "black",
    t.strokeThickness = t.strokeThickness || 0,
    t.wordWrap = t.wordWrap || !1,
    t.wordWrapWidth = t.wordWrapWidth || 100,
    t.dropShadow = t.dropShadow || !1,
    t.dropShadowAngle = t.dropShadowAngle || Math.PI / 6,
    t.dropShadowDistance = t.dropShadowDistance || 4,
    t.dropShadowColor = t.dropShadowColor || "black",
    this.style = t,
    this.dirty = !0
},
PIXI.Text.prototype.setText = function(t) {
    this.text != t.toString() && (this.text = t.toString() || " ", this.dirty = !0)
},
PIXI.Text.prototype.updateText = function() {
    this.context.font = this.style.font;
    var t = this.text;
    this.style.wordWrap && (t = this.wordWrap(this.text));
    for (var e = t.split(/(?:\r\n|\r|\n)/), i = [], r = 0, n = this.determineFontProperties(this.style.font), o = 0; o < e.length; o++) {
        var a = this.context.measureText(e[o]).width;
        i[o] = a,
        r = Math.max(r, a)
    }
    var s = r + this.style.strokeThickness;
    this.style.dropShadow && (s += this.style.dropShadowDistance),
    this.canvas.width = s + this.context.lineWidth;
    var h = n.fontSize + this.style.strokeThickness,
    l = h * e.length;
    this.style.dropShadow && (l += this.style.dropShadowDistance),
    this.canvas.height = l,
    this.context.scale(1, 1),
    this.context.font = this.style.font,
    this.context.strokeStyle = this.style.stroke,
    this.context.lineWidth = this.style.strokeThickness,
    this.context.textBaseline = "alphabetic";
    var c, d;
    if (this.style.dropShadow) {
        this.context.fillStyle = this.style.dropShadowColor;
        var u = Math.sin(this.style.dropShadowAngle) * this.style.dropShadowDistance,
        p = Math.cos(this.style.dropShadowAngle) * this.style.dropShadowDistance;
        for (o = 0; o < e.length; o++) c = this.style.strokeThickness / 2,
        d = this.style.strokeThickness / 2 + o * h + n.ascent,
        "right" === this.style.align ? c += r - i[o] : "center" === this.style.align && (c += (r - i[o]) / 2),
        this.style.fill && this.context.fillText(e[o], c + u, d + p)
    }
    for (this.context.fillStyle = this.style.fill, o = 0; o < e.length; o++) c = this.style.strokeThickness / 2,
    d = this.style.strokeThickness / 2 + o * h + n.ascent,
    "right" === this.style.align ? c += r - i[o] : "center" === this.style.align && (c += (r - i[o]) / 2),
    this.style.stroke && this.style.strokeThickness && this.context.strokeText(e[o], c, d),
    this.style.fill && this.context.fillText(e[o], c, d);
    this.updateTexture()
},
PIXI.Text.prototype.updateTexture = function() {
    this.texture.baseTexture.width = this.canvas.width,
    this.texture.baseTexture.height = this.canvas.height,
    this.texture.crop.width = this.texture.frame.width = this.canvas.width,
    this.texture.crop.height = this.texture.frame.height = this.canvas.height,
    this._width = this.canvas.width,
    this._height = this.canvas.height,
    this.texture.baseTexture.dirty()
},
PIXI.Text.prototype._renderWebGL = function(t) {
    this.dirty && (this.updateText(), this.dirty = !1),
    PIXI.Sprite.prototype._renderWebGL.call(this, t)
},
PIXI.Text.prototype._renderCanvas = function(t) {
    this.dirty && (this.updateText(), this.dirty = !1),
    PIXI.Sprite.prototype._renderCanvas.call(this, t)
},
PIXI.Text.prototype.determineFontProperties = function(t) {
    var e = PIXI.Text.fontPropertiesCache[t];
    if (!e) {
        e = {};
        var i = PIXI.Text.fontPropertiesCanvas,
        r = PIXI.Text.fontPropertiesContext;
        r.font = t;
        var n = Math.ceil(r.measureText("|MÉq").width),
        o = Math.ceil(r.measureText("M").width),
        a = 2 * o;
        o = 1.4 * o | 0,
        i.width = n,
        i.height = a,
        r.fillStyle = "#ffffff",
        r.fillRect(0, 0, n, a),
        r.font = t,
        r.textBaseline = "alphabetic",
        r.fillStyle = "#888888",
        r.fillText("|MÉq", 0, o);
        var s, h, l = r.getImageData(0, 0, n, a).data,
        c = l.length,
        d = 4 * n,
        u = 0,
        p = !1;
        for (s = 0; o > s; s++) {
            for (h = 0; d > h; h += 4) if (255 !== l[u + h]) {
                p = !0;
                break
            }
            if (p) break;
            u += d
        }
        for (e.ascent = o - s, u = c - d, p = !1, s = a; s > o; s--) {
            for (h = 0; d > h; h += 4) if (255 !== l[u + h]) {
                p = !0;
                break
            }
            if (p) break;
            u -= d
        }
        e.descent = s - o,
        e.fontSize = e.ascent + e.descent,
        PIXI.Text.fontPropertiesCache[t] = e
    }
    return e
},
PIXI.Text.prototype.wordWrap = function(t) {
    for (var e = "",
    i = t.split("\n"), r = 0; r < i.length; r++) {
        for (var n = this.style.wordWrapWidth,
        o = i[r].split(" "), a = 0; a < o.length; a++) {
            var s = this.context.measureText(o[a]).width,
            h = s + this.context.measureText(" ").width;
            0 === a || h > n ? (a > 0 && (e += "\n"), e += o[a], n = this.style.wordWrapWidth - s) : (n -= h, e += " " + o[a])
        }
        r < i.length - 1 && (e += "\n")
    }
    return e
},
PIXI.Text.prototype.getBounds = function(t) {
    return this.dirty && (this.updateText(), this.dirty = !1),
    PIXI.Sprite.prototype.getBounds.call(this, t)
},
PIXI.Text.prototype.destroy = function(t) {
    this.context = null,
    this.canvas = null,
    this.texture.destroy(void 0 === t ? !0 : t)
},
PIXI.Text.fontPropertiesCache = {},
PIXI.Text.fontPropertiesCanvas = document.createElement("canvas"),
PIXI.Text.fontPropertiesContext = PIXI.Text.fontPropertiesCanvas.getContext("2d"),
PIXI.InteractionData = function() {
    this.global = new PIXI.Point,
    this.target = null,
    this.originalEvent = null
},
PIXI.InteractionData.prototype.getLocalPosition = function(t, e) {
    var i = t.worldTransform,
    r = this.global,
    n = i.a,
    o = i.c,
    a = i.tx,
    s = i.b,
    h = i.d,
    l = i.ty,
    c = 1 / (n * h + o * -s);
    return e = e || new PIXI.Point,
    e.x = h * c * r.x + -o * c * r.y + (l * o - a * h) * c,
    e.y = n * c * r.y + -s * c * r.x + ( - l * n + a * s) * c,
    e
},
PIXI.InteractionData.prototype.constructor = PIXI.InteractionData,
PIXI.InteractionManager = function(t) {
    this.stage = t,
    this.mouse = new PIXI.InteractionData,
    this.touches = {},
    this.tempPoint = new PIXI.Point,
    this.mouseoverEnabled = !0,
    this.pool = [],
    this.interactiveItems = [],
    this.interactionDOMElement = null,
    this.onMouseMove = this.onMouseMove.bind(this),
    this.onMouseDown = this.onMouseDown.bind(this),
    this.onMouseOut = this.onMouseOut.bind(this),
    this.onMouseUp = this.onMouseUp.bind(this),
    this.onTouchStart = this.onTouchStart.bind(this),
    this.onTouchEnd = this.onTouchEnd.bind(this),
    this.onTouchMove = this.onTouchMove.bind(this),
    this.last = 0,
    this.currentCursorStyle = "inherit",
    this.mouseOut = !1,
    this._tempPoint = new PIXI.Point
},
PIXI.InteractionManager.prototype.constructor = PIXI.InteractionManager,
PIXI.InteractionManager.prototype.collectInteractiveSprite = function(t, e) {
    for (var i = t.children,
    r = i.length,
    n = r - 1; n >= 0; n--) {
        var o = i[n];
        o._interactive ? (e.interactiveChildren = !0, this.interactiveItems.push(o), o.children.length > 0 && this.collectInteractiveSprite(o, o)) : (o.__iParent = null, o.children.length > 0 && this.collectInteractiveSprite(o, e))
    }
},
PIXI.InteractionManager.prototype.setTarget = function(t) {
    this.target = t,
    null === this.interactionDOMElement && this.setTargetDomElement(t.view)
},
PIXI.InteractionManager.prototype.setTargetDomElement = function(t) {
    this.removeEvents(),
    window.navigator.msPointerEnabled && (t.style["-ms-content-zooming"] = "none", t.style["-ms-touch-action"] = "none"),
    this.interactionDOMElement = t,
    t.addEventListener("mousemove", this.onMouseMove, !0),
    t.addEventListener("mousedown", this.onMouseDown, !0),
    t.addEventListener("mouseout", this.onMouseOut, !0),
    t.addEventListener("touchstart", this.onTouchStart, !0),
    t.addEventListener("touchend", this.onTouchEnd, !0),
    t.addEventListener("touchmove", this.onTouchMove, !0),
    window.addEventListener("mouseup", this.onMouseUp, !0)
},
PIXI.InteractionManager.prototype.removeEvents = function() {
    this.interactionDOMElement && (this.interactionDOMElement.style["-ms-content-zooming"] = "", this.interactionDOMElement.style["-ms-touch-action"] = "", this.interactionDOMElement.removeEventListener("mousemove", this.onMouseMove, !0), this.interactionDOMElement.removeEventListener("mousedown", this.onMouseDown, !0), this.interactionDOMElement.removeEventListener("mouseout", this.onMouseOut, !0), this.interactionDOMElement.removeEventListener("touchstart", this.onTouchStart, !0), this.interactionDOMElement.removeEventListener("touchend", this.onTouchEnd, !0), this.interactionDOMElement.removeEventListener("touchmove", this.onTouchMove, !0), this.interactionDOMElement = null, window.removeEventListener("mouseup", this.onMouseUp, !0))
},
PIXI.InteractionManager.prototype.update = function() {
    if (this.target) {
        var t = Date.now(),
        e = t - this.last;
        if (e = e * PIXI.INTERACTION_FREQUENCY / 1e3, !(1 > e)) {
            this.last = t;
            var i = 0;
            this.dirty && this.rebuildInteractiveGraph();
            var r = this.interactiveItems.length,
            n = "inherit",
            o = !1;
            for (i = 0; r > i; i++) {
                var a = this.interactiveItems[i];
                a.__hit = this.hitTest(a, this.mouse),
                this.mouse.target = a,
                a.__hit && !o ? (a.buttonMode && (n = a.defaultCursor), a.interactiveChildren || (o = !0), a.__isOver || (a.mouseover && a.mouseover(this.mouse), a.__isOver = !0)) : a.__isOver && (a.mouseout && a.mouseout(this.mouse), a.__isOver = !1)
            }
            this.currentCursorStyle !== n && (this.currentCursorStyle = n, this.interactionDOMElement.style.cursor = n)
        }
    }
},
PIXI.InteractionManager.prototype.rebuildInteractiveGraph = function() {
    this.dirty = !1;
    for (var t = this.interactiveItems.length,
    e = 0; t > e; e++) this.interactiveItems[e].interactiveChildren = !1;
    this.interactiveItems = [],
    this.stage.interactive && this.interactiveItems.push(this.stage),
    this.collectInteractiveSprite(this.stage, this.stage)
},
PIXI.InteractionManager.prototype.onMouseMove = function(t) {
    this.dirty && this.rebuildInteractiveGraph(),
    this.mouse.originalEvent = t;
    var e = this.interactionDOMElement.getBoundingClientRect();
    this.mouse.global.x = (t.clientX - e.left) * (this.target.width / e.width),
    this.mouse.global.y = (t.clientY - e.top) * (this.target.height / e.height);
    for (var i = this.interactiveItems.length,
    r = 0; i > r; r++) {
        var n = this.interactiveItems[r];
        n.mousemove && n.mousemove(this.mouse)
    }
},
PIXI.InteractionManager.prototype.onMouseDown = function(t) {
    this.dirty && this.rebuildInteractiveGraph(),
    this.mouse.originalEvent = t,
    PIXI.AUTO_PREVENT_DEFAULT && this.mouse.originalEvent && this.mouse.originalEvent.preventDefault();
    for (var e = this.interactiveItems.length,
    i = this.mouse.originalEvent,
    r = 2 === i.button || 3 === i.which,
    n = r ? "rightdown": "mousedown", o = r ? "rightclick": "click", a = r ? "__rightIsDown": "__mouseIsDown", s = r ? "__isRightDown": "__isDown", h = 0; e > h; h++) {
        var l = this.interactiveItems[h];
        if ((l[n] || l[o]) && (l[a] = !0, l.__hit = this.hitTest(l, this.mouse), l.__hit && (l[n] && l[n](this.mouse), l[s] = !0, !l.interactiveChildren))) break
    }
},
PIXI.InteractionManager.prototype.onMouseOut = function(t) {
    this.dirty && this.rebuildInteractiveGraph(),
    this.mouse.originalEvent = t;
    var e = this.interactiveItems.length;
    this.interactionDOMElement.style.cursor = "inherit";
    for (var i = 0; e > i; i++) {
        var r = this.interactiveItems[i];
        r.__isOver && (this.mouse.target = r, r.mouseout && r.mouseout(this.mouse), r.__isOver = !1)
    }
    this.mouseOut = !0,
    this.mouse.global.x = -1e4,
    this.mouse.global.y = -1e4
},
PIXI.InteractionManager.prototype.onMouseUp = function(t) {
    this.dirty && this.rebuildInteractiveGraph(),
    this.mouse.originalEvent = t;
    for (var e = this.interactiveItems.length,
    i = !1,
    r = this.mouse.originalEvent,
    n = 2 === r.button || 3 === r.which,
    o = n ? "rightup": "mouseup", a = n ? "rightclick": "click", s = n ? "rightupoutside": "mouseupoutside", h = n ? "__isRightDown": "__isDown", l = 0; e > l; l++) {
        var c = this.interactiveItems[l]; (c[a] || c[o] || c[s]) && (c.__hit = this.hitTest(c, this.mouse), c.__hit && !i ? (c[o] && c[o](this.mouse), c[h] && c[a] && c[a](this.mouse), c.interactiveChildren || (i = !0)) : c[h] && c[s] && c[s](this.mouse), c[h] = !1)
    }
},
PIXI.InteractionManager.prototype.hitTest = function(t, e) {
    var i = e.global;
    if (!t.worldVisible) return ! 1;
    t.worldTransform.applyInverse(i, this._tempPoint);
    var r, n = this._tempPoint.x,
    o = this._tempPoint.y;
    if (e.target = t, t.hitArea && t.hitArea.contains) return t.hitArea.contains(n, o);
    if (t instanceof PIXI.Sprite) {
        var a, s = t.texture.frame.width,
        h = t.texture.frame.height,
        l = -s * t.anchor.x;
        if (n > l && l + s > n && (a = -h * t.anchor.y, o > a && a + h > o)) return ! 0
    } else if (t instanceof PIXI.Graphics) {
        var c = t.graphicsData;
        for (r = 0; r < c.length; r++) {
            var d = c[r];
            if (d.fill && d.shape && d.shape.contains(n, o)) return ! 0
        }
    }
    var u = t.children.length;
    for (r = 0; u > r; r++) {
        var p = t.children[r],
        f = this.hitTest(p, e);
        if (f) return e.target = t,
        !0
    }
    return ! 1
},
PIXI.InteractionManager.prototype.onTouchMove = function(t) {
    this.dirty && this.rebuildInteractiveGraph();
    var e, i = this.interactionDOMElement.getBoundingClientRect(),
    r = t.changedTouches,
    n = 0;
    for (n = 0; n < r.length; n++) {
        var o = r[n];
        e = this.touches[o.identifier],
        e.originalEvent = t,
        e.global.x = (o.clientX - i.left) * (this.target.width / i.width),
        e.global.y = (o.clientY - i.top) * (this.target.height / i.height);
        for (var a = 0; a < this.interactiveItems.length; a++) {
            var s = this.interactiveItems[a];
            s.touchmove && s.__touchData && s.__touchData[o.identifier] && s.touchmove(e)
        }
    }
    t.preventDefault()
},
PIXI.InteractionManager.prototype.onTouchStart = function(t) {
    this.dirty && this.rebuildInteractiveGraph();
    var e = this.interactionDOMElement.getBoundingClientRect();
    PIXI.AUTO_PREVENT_DEFAULT && t.preventDefault();
    for (var i = t.changedTouches,
    r = 0; r < i.length; r++) {
        var n = i[r],
        o = this.pool.pop();
        o || (o = new PIXI.InteractionData),
        o.originalEvent = t,
        this.touches[n.identifier] = o,
        o.global.x = (n.clientX - e.left) * (this.target.width / e.width),
        o.global.y = (n.clientY - e.top) * (this.target.height / e.height);
        for (var a = this.interactiveItems.length,
        s = 0; a > s; s++) {
            var h = this.interactiveItems[s];
            if ((h.touchstart || h.tap) && (h.__hit = this.hitTest(h, o), h.__hit && (h.touchstart && h.touchstart(o), h.__isDown = !0, h.__touchData = h.__touchData || {},
            h.__touchData[n.identifier] = o, !h.interactiveChildren))) break
        }
    }
},
PIXI.InteractionManager.prototype.onTouchEnd = function(t) {
    this.dirty && this.rebuildInteractiveGraph();
    for (var e = this.interactionDOMElement.getBoundingClientRect(), i = t.changedTouches, r = 0; r < i.length; r++) {
        var n = i[r],
        o = this.touches[n.identifier],
        a = !1;
        o.global.x = (n.clientX - e.left) * (this.target.width / e.width),
        o.global.y = (n.clientY - e.top) * (this.target.height / e.height);
        for (var s = this.interactiveItems.length,
        h = 0; s > h; h++) {
            var l = this.interactiveItems[h];
            l.__touchData && l.__touchData[n.identifier] && (l.__hit = this.hitTest(l, l.__touchData[n.identifier]), o.originalEvent = t, (l.touchend || l.tap) && (l.__hit && !a ? (l.touchend && l.touchend(o), l.__isDown && l.tap && l.tap(o), l.interactiveChildren || (a = !0)) : l.__isDown && l.touchendoutside && l.touchendoutside(o), l.__isDown = !1), l.__touchData[n.identifier] = null)
        }
        this.pool.push(o),
        this.touches[n.identifier] = null
    }
},
PIXI.Stage = function(t) {
    PIXI.DisplayObjectContainer.call(this),
    this.worldTransform = new PIXI.Matrix,
    this.interactive = !0,
    this.interactionManager = new PIXI.InteractionManager(this),
    this.dirty = !0,
    this.stage = this,
    this.stage.hitArea = new PIXI.Rectangle(0, 0, 1e5, 1e5),
    this.setBackgroundColor(t)
},
PIXI.Stage.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
PIXI.Stage.prototype.constructor = PIXI.Stage,
PIXI.Stage.prototype.updateTransform = function() {
    this.worldAlpha = 1;
    for (var t = 0,
    e = this.children.length; e > t; t++) this.children[t].updateTransform();
    this.dirty && (this.dirty = !1, this.interactionManager.dirty = !0),
    this.interactive && this.interactionManager.update()
},
PIXI.Stage.prototype.setBackgroundColor = function(t) {
    this.backgroundColor = t || 0,
    this.backgroundColorSplit = PIXI.hex2rgb(this.backgroundColor);
    var e = this.backgroundColor.toString(16);
    e = "000000".substr(0, 6 - e.length) + e,
    this.backgroundColorString = "#" + e
},
PIXI.Stage.prototype.getMousePosition = function() {
    return this.interactionManager.mouse.global
},
function(t) {
    for (var e = 0,
    i = ["ms", "moz", "webkit", "o"], r = 0; r < i.length && !t.requestAnimationFrame; ++r) t.requestAnimationFrame = t[i[r] + "RequestAnimationFrame"],
    t.cancelAnimationFrame = t[i[r] + "CancelAnimationFrame"] || t[i[r] + "CancelRequestAnimationFrame"];
    t.requestAnimationFrame || (t.requestAnimationFrame = function(i) {
        var r = (new Date).getTime(),
        n = Math.max(0, 16 - (r - e)),
        o = t.setTimeout(function() {
            i(r + n)
        },
        n);
        return e = r + n,
        o
    }),
    t.cancelAnimationFrame || (t.cancelAnimationFrame = function(t) {
        clearTimeout(t)
    }),
    t.requestAnimFrame = t.requestAnimationFrame
} (this),
PIXI.hex2rgb = function(t) {
    return [(t >> 16 & 255) / 255, (t >> 8 & 255) / 255, (255 & t) / 255]
},
PIXI.rgb2hex = function(t) {
    return (255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2]
},
"function" != typeof Function.prototype.bind && (Function.prototype.bind = function() {
    return function(t) {
        function e() {
            for (var r = arguments.length,
            o = new Array(r); r--;) o[r] = arguments[r];
            return o = n.concat(o),
            i.apply(this instanceof e ? this: t, o)
        }
        var i = this,
        r = arguments.length - 1,
        n = [];
        if (r > 0) for (n.length = r; r--;) n[r] = arguments[r + 1];
        if ("function" != typeof i) throw new TypeError;
        return e.prototype = function o(t) {
            return t && (o.prototype = t),
            this instanceof o ? void 0 : new o
        } (i.prototype),
        e
    }
} ()),
PIXI.canUseNewCanvasBlendModes = function() {
    if ("undefined" == typeof document) return ! 1;
    var t = document.createElement("canvas");
    t.width = 1,
    t.height = 1;
    var e = t.getContext("2d");
    return e.fillStyle = "#000",
    e.fillRect(0, 0, 1, 1),
    e.globalCompositeOperation = "multiply",
    e.fillStyle = "#fff",
    e.fillRect(0, 0, 1, 1),
    0 === e.getImageData(0, 0, 1, 1).data[0]
},
PIXI.getNextPowerOfTwo = function(t) {
    if (t > 0 && 0 === (t & t - 1)) return t;
    for (var e = 1; t > e;) e <<= 1;
    return e
},
PIXI.isPowerOfTwo = function(t, e) {
    return t > 0 && 0 === (t & t - 1) && e > 0 && 0 === (e & e - 1)
},
PIXI.PolyK = {},
PIXI.PolyK.Triangulate = function(t) {
    var e = !0,
    i = t.length >> 1;
    if (3 > i) return [];
    for (var r = [], n = [], o = 0; i > o; o++) n.push(o);
    o = 0;
    for (var a = i; a > 3;) {
        var s = n[(o + 0) % a],
        h = n[(o + 1) % a],
        l = n[(o + 2) % a],
        c = t[2 * s],
        d = t[2 * s + 1],
        u = t[2 * h],
        p = t[2 * h + 1],
        f = t[2 * l],
        I = t[2 * l + 1],
        g = !1;
        if (PIXI.PolyK._convex(c, d, u, p, f, I, e)) {
            g = !0;
            for (var v = 0; a > v; v++) {
                var w = n[v];
                if (w !== s && w !== h && w !== l && PIXI.PolyK._PointInTriangle(t[2 * w], t[2 * w + 1], c, d, u, p, f, I)) {
                    g = !1;
                    break
                }
            }
        }
        if (g) r.push(s, h, l),
        n.splice((o + 1) % a, 1),
        a--,
        o = 0;
        else if (o++>3 * a) {
            if (!e) return null;
            for (r = [], n = [], o = 0; i > o; o++) n.push(o);
            o = 0,
            a = i,
            e = !1
        }
    }
    return r.push(n[0], n[1], n[2]),
    r
},
PIXI.PolyK._PointInTriangle = function(t, e, i, r, n, o, a, s) {
    var h = a - i,
    l = s - r,
    c = n - i,
    d = o - r,
    u = t - i,
    p = e - r,
    f = h * h + l * l,
    I = h * c + l * d,
    g = h * u + l * p,
    v = c * c + d * d,
    w = c * u + d * p,
    m = 1 / (f * v - I * I),
    y = (v * g - I * w) * m,
    P = (f * w - I * g) * m;
    return y >= 0 && P >= 0 && 1 > y + P
},
PIXI.PolyK._convex = function(t, e, i, r, n, o, a) {
    return (e - r) * (n - i) + (i - t) * (o - r) >= 0 === a
},
PIXI.EventTarget = {
    call: function(t) {
        t && (t = t.prototype || t, PIXI.EventTarget.mixin(t))
    },
    mixin: function(t) {
        t.listeners = function(t) {
            return this._listeners = this._listeners || {},
            this._listeners[t] ? this._listeners[t].slice() : []
        },
        t.emit = t.dispatchEvent = function(t, e) {
            if (this._listeners = this._listeners || {},
            "object" == typeof t && (e = t, t = t.type), e && e.__isEventObject === !0 || (e = new PIXI.Event(this, t, e)), this._listeners && this._listeners[t]) {
                var i, r = this._listeners[t].slice(0),
                n = r.length,
                o = r[0];
                for (i = 0; n > i; o = r[++i]) if (o.call(this, e), e.stoppedImmediate) return this;
                if (e.stopped) return this
            }
            return this.parent && this.parent.emit && this.parent.emit.call(this.parent, t, e),
            this
        },
        t.on = t.addEventListener = function(t, e) {
            return this._listeners = this._listeners || {},
            (this._listeners[t] = this._listeners[t] || []).push(e),
            this
        },
        t.once = function(t, e) {
            function i() {
                e.apply(r.off(t, i), arguments)
            }
            this._listeners = this._listeners || {};
            var r = this;
            return i._originalHandler = e,
            this.on(t, i)
        },
        t.off = t.removeEventListener = function(t, e) {
            if (this._listeners = this._listeners || {},
            !this._listeners[t]) return this;
            for (var i = this._listeners[t], r = e ? i.length: 0; r-->0;)(i[r] === e || i[r]._originalHandler === e) && i.splice(r, 1);
            return 0 === i.length && delete this._listeners[t],
            this
        },
        t.removeAllListeners = function(t) {
            return this._listeners = this._listeners || {},
            this._listeners[t] ? (delete this._listeners[t], this) : this
        }
    }
},
PIXI.Event = function(t, e, i) {
    this.__isEventObject = !0,
    this.stopped = !1,
    this.stoppedImmediate = !1,
    this.target = t,
    this.type = e,
    this.data = i,
    this.content = i,
    this.timeStamp = Date.now()
},
PIXI.Event.prototype.stopPropagation = function() {
    this.stopped = !0
},
PIXI.Event.prototype.stopImmediatePropagation = function() {
    this.stoppedImmediate = !0
},
PIXI.autoDetectRenderer = function(t, e, i) {
    t || (t = 800),
    e || (e = 600);
    var r = function() {
        try {
            var t = document.createElement("canvas");
            return !! window.WebGLRenderingContext && t.getContext("webgl")
        } catch(e) {
            return ! 1
        }
    } ();
    return r ? new PIXI.WebGLRenderer(t, e, i) : new PIXI.CanvasRenderer(t, e, i)
},
PIXI.autoDetectRecommendedRenderer = function(t, e, i) {
    t || (t = 800),
    e || (e = 600);
    var r = function() {
        try {
            var t = document.createElement("canvas");
            return !! window.WebGLRenderingContext && (t.getContext("webgl") || t.getContext("experimental-webgl"))
        } catch(e) {
            return ! 1
        }
    } (),
    n = /Android/i.test(navigator.userAgent);
    return r && !n ? new PIXI.WebGLRenderer(t, e, i) : new PIXI.CanvasRenderer(t, e, i)
},
PIXI.initDefaultShaders = function() {},
PIXI.CompileVertexShader = function(t, e) {
    return PIXI._CompileShader(t, e, t.VERTEX_SHADER)
},
PIXI.CompileFragmentShader = function(t, e) {
    return PIXI._CompileShader(t, e, t.FRAGMENT_SHADER)
},
PIXI._CompileShader = function(t, e, i) {
    var r = e.join("\n"),
    n = t.createShader(i);
    return t.shaderSource(n, r),
    t.compileShader(n),
    t.getShaderParameter(n, t.COMPILE_STATUS) ? n: (window.console.log(t.getShaderInfoLog(n)), null)
},
PIXI.compileProgram = function(t, e, i) {
    var r = PIXI.CompileFragmentShader(t, i),
    n = PIXI.CompileVertexShader(t, e),
    o = t.createProgram();
    return t.attachShader(o, n),
    t.attachShader(o, r),
    t.linkProgram(o),
    t.getProgramParameter(o, t.LINK_STATUS) || window.console.log("Could not initialise shaders"),
    o
},
PIXI.PixiShader = function(t) {
    this._UID = PIXI._UID++,
    this.gl = t,
    this.program = null,
    this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"],
    this.textureCount = 0,
    this.firstRun = !0,
    this.dirty = !0,
    this.attributes = [],
    this.init()
},
PIXI.PixiShader.prototype.constructor = PIXI.PixiShader,
PIXI.PixiShader.prototype.init = function() {
    var t = this.gl,
    e = PIXI.compileProgram(t, this.vertexSrc || PIXI.PixiShader.defaultVertexSrc, this.fragmentSrc);
    t.useProgram(e),
    this.uSampler = t.getUniformLocation(e, "uSampler"),
    this.projectionVector = t.getUniformLocation(e, "projectionVector"),
    this.offsetVector = t.getUniformLocation(e, "offsetVector"),
    this.dimensions = t.getUniformLocation(e, "dimensions"),
    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition"),
    this.aTextureCoord = t.getAttribLocation(e, "aTextureCoord"),
    this.colorAttribute = t.getAttribLocation(e, "aColor"),
    -1 === this.colorAttribute && (this.colorAttribute = 2),
    this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
    for (var i in this.uniforms) this.uniforms[i].uniformLocation = t.getUniformLocation(e, i);
    this.initUniforms(),
    this.program = e
},
PIXI.PixiShader.prototype.initUniforms = function() {
    this.textureCount = 1;
    var t, e = this.gl;
    for (var i in this.uniforms) {
        t = this.uniforms[i];
        var r = t.type;
        "sampler2D" === r ? (t._init = !1, null !== t.value && this.initSampler2D(t)) : "mat2" === r || "mat3" === r || "mat4" === r ? (t.glMatrix = !0, t.glValueLength = 1, "mat2" === r ? t.glFunc = e.uniformMatrix2fv: "mat3" === r ? t.glFunc = e.uniformMatrix3fv: "mat4" === r && (t.glFunc = e.uniformMatrix4fv)) : (t.glFunc = e["uniform" + r], "2f" === r || "2i" === r ? t.glValueLength = 2 : "3f" === r || "3i" === r ? t.glValueLength = 3 : "4f" === r || "4i" === r ? t.glValueLength = 4 : t.glValueLength = 1)
    }
},
PIXI.PixiShader.prototype.initSampler2D = function(t) {
    if (t.value && t.value.baseTexture && t.value.baseTexture.hasLoaded) {
        var e = this.gl;
        if (e.activeTexture(e["TEXTURE" + this.textureCount]), e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTextures[e.id]), t.textureData) {
            var i = t.textureData,
            r = i.magFilter ? i.magFilter: e.LINEAR,
            n = i.minFilter ? i.minFilter: e.LINEAR,
            o = i.wrapS ? i.wrapS: e.CLAMP_TO_EDGE,
            a = i.wrapT ? i.wrapT: e.CLAMP_TO_EDGE,
            s = i.luminance ? e.LUMINANCE: e.RGBA;
            if (i.repeat && (o = e.REPEAT, a = e.REPEAT), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !!i.flipY), i.width) {
                var h = i.width ? i.width: 512,
                l = i.height ? i.height: 2,
                c = i.border ? i.border: 0;
                e.texImage2D(e.TEXTURE_2D, 0, s, h, l, c, s, e.UNSIGNED_BYTE, null)
            } else e.texImage2D(e.TEXTURE_2D, 0, s, e.RGBA, e.UNSIGNED_BYTE, t.value.baseTexture.source);
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, r),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, n),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, o),
            e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, a)
        }
        e.uniform1i(t.uniformLocation, this.textureCount),
        t._init = !0,
        this.textureCount++
    }
},
PIXI.PixiShader.prototype.syncUniforms = function() {
    this.textureCount = 1;
    var t, e = this.gl;
    for (var i in this.uniforms) t = this.uniforms[i],
    1 === t.glValueLength ? t.glMatrix === !0 ? t.glFunc.call(e, t.uniformLocation, t.transpose, t.value) : t.glFunc.call(e, t.uniformLocation, t.value) : 2 === t.glValueLength ? t.glFunc.call(e, t.uniformLocation, t.value.x, t.value.y) : 3 === t.glValueLength ? t.glFunc.call(e, t.uniformLocation, t.value.x, t.value.y, t.value.z) : 4 === t.glValueLength ? t.glFunc.call(e, t.uniformLocation, t.value.x, t.value.y, t.value.z, t.value.w) : "sampler2D" === t.type && (t._init ? (e.activeTexture(e["TEXTURE" + this.textureCount]), t.value.baseTexture._dirty[e.id] ? PIXI.instances[e.id].updateTexture(t.value.baseTexture) : e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTextures[e.id]), e.uniform1i(t.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(t))
},
PIXI.PixiShader.prototype.destroy = function() {
    this.gl.deleteProgram(this.program),
    this.uniforms = null,
    this.gl = null,
    this.attributes = null
},
PIXI.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"],
PIXI.PixiFastShader = function(t) {
    this._UID = PIXI._UID++,
    this.gl = t,
    this.program = null,
    this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"],
    this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"],
    this.textureCount = 0,
    this.init()
},
PIXI.PixiFastShader.prototype.constructor = PIXI.PixiFastShader,
PIXI.PixiFastShader.prototype.init = function() {
    var t = this.gl,
    e = PIXI.compileProgram(t, this.vertexSrc, this.fragmentSrc);
    t.useProgram(e),
    this.uSampler = t.getUniformLocation(e, "uSampler"),
    this.projectionVector = t.getUniformLocation(e, "projectionVector"),
    this.offsetVector = t.getUniformLocation(e, "offsetVector"),
    this.dimensions = t.getUniformLocation(e, "dimensions"),
    this.uMatrix = t.getUniformLocation(e, "uMatrix"),
    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition"),
    this.aPositionCoord = t.getAttribLocation(e, "aPositionCoord"),
    this.aScale = t.getAttribLocation(e, "aScale"),
    this.aRotation = t.getAttribLocation(e, "aRotation"),
    this.aTextureCoord = t.getAttribLocation(e, "aTextureCoord"),
    this.colorAttribute = t.getAttribLocation(e, "aColor"),
    -1 === this.colorAttribute && (this.colorAttribute = 2),
    this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute],
    this.program = e
},
PIXI.PixiFastShader.prototype.destroy = function() {
    this.gl.deleteProgram(this.program),
    this.uniforms = null,
    this.gl = null,
    this.attributes = null
},
PIXI.PrimitiveShader = function(t) {
    this._UID = PIXI._UID++,
    this.gl = t,
    this.program = null,
    this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"],
    this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"],
    this.init()
},
PIXI.PrimitiveShader.prototype.constructor = PIXI.PrimitiveShader,
PIXI.PrimitiveShader.prototype.init = function() {
    var t = this.gl,
    e = PIXI.compileProgram(t, this.vertexSrc, this.fragmentSrc);
    t.useProgram(e),
    this.projectionVector = t.getUniformLocation(e, "projectionVector"),
    this.offsetVector = t.getUniformLocation(e, "offsetVector"),
    this.tintColor = t.getUniformLocation(e, "tint"),
    this.flipY = t.getUniformLocation(e, "flipY"),
    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition"),
    this.colorAttribute = t.getAttribLocation(e, "aColor"),
    this.attributes = [this.aVertexPosition, this.colorAttribute],
    this.translationMatrix = t.getUniformLocation(e, "translationMatrix"),
    this.alpha = t.getUniformLocation(e, "alpha"),
    this.program = e
},
PIXI.PrimitiveShader.prototype.destroy = function() {
    this.gl.deleteProgram(this.program),
    this.uniforms = null,
    this.gl = null,
    this.attributes = null
},
PIXI.ComplexPrimitiveShader = function(t) {
    this._UID = PIXI._UID++,
    this.gl = t,
    this.program = null,
    this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"],
    this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "uniform float flipY;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"],
    this.init()
},
PIXI.ComplexPrimitiveShader.prototype.constructor = PIXI.ComplexPrimitiveShader,
PIXI.ComplexPrimitiveShader.prototype.init = function() {
    var t = this.gl,
    e = PIXI.compileProgram(t, this.vertexSrc, this.fragmentSrc);
    t.useProgram(e),
    this.projectionVector = t.getUniformLocation(e, "projectionVector"),
    this.offsetVector = t.getUniformLocation(e, "offsetVector"),
    this.tintColor = t.getUniformLocation(e, "tint"),
    this.color = t.getUniformLocation(e, "color"),
    this.flipY = t.getUniformLocation(e, "flipY"),
    this.aVertexPosition = t.getAttribLocation(e, "aVertexPosition"),
    this.attributes = [this.aVertexPosition, this.colorAttribute],
    this.translationMatrix = t.getUniformLocation(e, "translationMatrix"),
    this.alpha = t.getUniformLocation(e, "alpha"),
    this.program = e
},
PIXI.ComplexPrimitiveShader.prototype.destroy = function() {
    this.gl.deleteProgram(this.program),
    this.uniforms = null,
    this.gl = null,
    this.attribute = null
},
PIXI.WebGLGraphics = function() {},
PIXI.WebGLGraphics.renderGraphics = function(t, e) {
    var i, r = e.gl,
    n = e.projection,
    o = e.offset,
    a = e.shaderManager.primitiveShader;
    t.dirty && PIXI.WebGLGraphics.updateGraphics(t, r);
    for (var s = t._webGL[r.id], h = 0; h < s.data.length; h++) 1 === s.data[h].mode ? (i = s.data[h], e.stencilManager.pushStencil(t, i, e), r.drawElements(r.TRIANGLE_FAN, 4, r.UNSIGNED_SHORT, 2 * (i.indices.length - 4)), e.stencilManager.popStencil(t, i, e)) : (i = s.data[h], e.shaderManager.setShader(a), a = e.shaderManager.primitiveShader, r.uniformMatrix3fv(a.translationMatrix, !1, t.worldTransform.toArray(!0)), r.uniform1f(a.flipY, 1), r.uniform2f(a.projectionVector, n.x, -n.y), r.uniform2f(a.offsetVector, -o.x, -o.y), r.uniform3fv(a.tintColor, PIXI.hex2rgb(t.tint)), r.uniform1f(a.alpha, t.worldAlpha), r.bindBuffer(r.ARRAY_BUFFER, i.buffer), r.vertexAttribPointer(a.aVertexPosition, 2, r.FLOAT, !1, 24, 0), r.vertexAttribPointer(a.colorAttribute, 4, r.FLOAT, !1, 24, 8), r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, i.indexBuffer), r.drawElements(r.TRIANGLE_STRIP, i.indices.length, r.UNSIGNED_SHORT, 0))
},
PIXI.WebGLGraphics.updateGraphics = function(t, e) {
    var i = t._webGL[e.id];
    i || (i = t._webGL[e.id] = {
        lastIndex: 0,
        data: [],
        gl: e
    }),
    t.dirty = !1;
    var r;
    if (t.clearDirty) {
        for (t.clearDirty = !1, r = 0; r < i.data.length; r++) {
            var n = i.data[r];
            n.reset(),
            PIXI.WebGLGraphics.graphicsDataPool.push(n)
        }
        i.data = [],
        i.lastIndex = 0
    }
    var o;
    for (r = i.lastIndex; r < t.graphicsData.length; r++) {
        var a = t.graphicsData[r];
        if (a.type === PIXI.Graphics.POLY) {
            if (a.points = a.shape.points.slice(), a.shape.closed && (a.points[0] !== a.points[a.points.length - 2] || a.points[1] !== a.points[a.points.length - 1]) && a.points.push(a.points[0], a.points[1]), a.fill && a.points.length >= 6) if (a.points.length < 12) {
                o = PIXI.WebGLGraphics.switchMode(i, 0);
                var s = PIXI.WebGLGraphics.buildPoly(a, o);
                s || (o = PIXI.WebGLGraphics.switchMode(i, 1), PIXI.WebGLGraphics.buildComplexPoly(a, o))
            } else o = PIXI.WebGLGraphics.switchMode(i, 1),
            PIXI.WebGLGraphics.buildComplexPoly(a, o);
            a.lineWidth > 0 && (o = PIXI.WebGLGraphics.switchMode(i, 0), PIXI.WebGLGraphics.buildLine(a, o))
        } else o = PIXI.WebGLGraphics.switchMode(i, 0),
        a.type === PIXI.Graphics.RECT ? PIXI.WebGLGraphics.buildRectangle(a, o) : a.type === PIXI.Graphics.CIRC || a.type === PIXI.Graphics.ELIP ? PIXI.WebGLGraphics.buildCircle(a, o) : a.type === PIXI.Graphics.RREC && PIXI.WebGLGraphics.buildRoundedRectangle(a, o);
        i.lastIndex++
    }
    for (r = 0; r < i.data.length; r++) o = i.data[r],
    o.dirty && o.upload()
},
PIXI.WebGLGraphics.switchMode = function(t, e) {
    var i;
    return t.data.length ? (i = t.data[t.data.length - 1], (i.mode !== e || 1 === e) && (i = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(t.gl), i.mode = e, t.data.push(i))) : (i = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(t.gl), i.mode = e, t.data.push(i)),
    i.dirty = !0,
    i
},
PIXI.WebGLGraphics.buildRectangle = function(t, e) {
    var i = t.shape,
    r = i.x,
    n = i.y,
    o = i.width,
    a = i.height;
    if (t.fill) {
        var s = PIXI.hex2rgb(t.fillColor),
        h = t.fillAlpha,
        l = s[0] * h,
        c = s[1] * h,
        d = s[2] * h,
        u = e.points,
        p = e.indices,
        f = u.length / 6;
        u.push(r, n),
        u.push(l, c, d, h),
        u.push(r + o, n),
        u.push(l, c, d, h),
        u.push(r, n + a),
        u.push(l, c, d, h),
        u.push(r + o, n + a),
        u.push(l, c, d, h),
        p.push(f, f, f + 1, f + 2, f + 3, f + 3)
    }
    if (t.lineWidth) {
        var I = t.points;
        t.points = [r, n, r + o, n, r + o, n + a, r, n + a, r, n],
        PIXI.WebGLGraphics.buildLine(t, e),
        t.points = I
    }
},
PIXI.WebGLGraphics.buildRoundedRectangle = function(t, e) {
    var i = t.shape,
    r = i.x,
    n = i.y,
    o = i.width,
    a = i.height,
    s = i.radius,
    h = [];
    if (h.push(r, n + s), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(r, n + a - s, r, n + a, r + s, n + a)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(r + o - s, n + a, r + o, n + a, r + o, n + a - s)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(r + o, n + s, r + o, n, r + o - s, n)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(r + s, n, r, n, r, n + s)), t.fill) {
        var l = PIXI.hex2rgb(t.fillColor),
        c = t.fillAlpha,
        d = l[0] * c,
        u = l[1] * c,
        p = l[2] * c,
        f = e.points,
        I = e.indices,
        g = f.length / 6,
        v = PIXI.PolyK.Triangulate(h),
        w = 0;
        for (w = 0; w < v.length; w += 3) I.push(v[w] + g),
        I.push(v[w] + g),
        I.push(v[w + 1] + g),
        I.push(v[w + 2] + g),
        I.push(v[w + 2] + g);
        for (w = 0; w < h.length; w++) f.push(h[w], h[++w], d, u, p, c)
    }
    if (t.lineWidth) {
        var m = t.points;
        t.points = h,
        PIXI.WebGLGraphics.buildLine(t, e),
        t.points = m
    }
},
PIXI.WebGLGraphics.quadraticBezierCurve = function(t, e, i, r, n, o) {
    function a(t, e, i) {
        var r = e - t;
        return t + r * i
    }
    for (var s, h, l, c, d, u, p = 20,
    f = [], I = 0, g = 0; p >= g; g++) I = g / p,
    s = a(t, i, I),
    h = a(e, r, I),
    l = a(i, n, I),
    c = a(r, o, I),
    d = a(s, l, I),
    u = a(h, c, I),
    f.push(d, u);
    return f
},
PIXI.WebGLGraphics.buildCircle = function(t, e) {
    var i, r, n = t.shape,
    o = n.x,
    a = n.y;
    t.type === PIXI.Graphics.CIRC ? (i = n.radius, r = n.radius) : (i = n.width, r = n.height);
    var s = 40,
    h = 2 * Math.PI / s,
    l = 0;
    if (t.fill) {
        var c = PIXI.hex2rgb(t.fillColor),
        d = t.fillAlpha,
        u = c[0] * d,
        p = c[1] * d,
        f = c[2] * d,
        I = e.points,
        g = e.indices,
        v = I.length / 6;
        for (g.push(v), l = 0; s + 1 > l; l++) I.push(o, a, u, p, f, d),
        I.push(o + Math.sin(h * l) * i, a + Math.cos(h * l) * r, u, p, f, d),
        g.push(v++, v++);
        g.push(v - 1)
    }
    if (t.lineWidth) {
        var w = t.points;
        for (t.points = [], l = 0; s + 1 > l; l++) t.points.push(o + Math.sin(h * l) * i, a + Math.cos(h * l) * r);
        PIXI.WebGLGraphics.buildLine(t, e),
        t.points = w
    }
},
PIXI.WebGLGraphics.buildLine = function(t, e) {
    var i = 0,
    r = t.points;
    if (0 !== r.length) {
        if (t.lineWidth % 2) for (i = 0; i < r.length; i++) r[i] += .5;
        var n = new PIXI.Point(r[0], r[1]),
        o = new PIXI.Point(r[r.length - 2], r[r.length - 1]);
        if (n.x === o.x && n.y === o.y) {
            r = r.slice(),
            r.pop(),
            r.pop(),
            o = new PIXI.Point(r[r.length - 2], r[r.length - 1]);
            var a = o.x + .5 * (n.x - o.x),
            s = o.y + .5 * (n.y - o.y);
            r.unshift(a, s),
            r.push(a, s)
        }
        var h, l, c, d, u, p, f, I, g, v, w, m, y, P, b, x, T, S, X, C, M, R, E, _ = e.points,
        A = e.indices,
        L = r.length / 2,
        B = r.length,
        G = _.length / 6,
        O = t.lineWidth / 2,
        F = PIXI.hex2rgb(t.lineColor),
        D = t.lineAlpha,
        U = F[0] * D,
        k = F[1] * D,
        W = F[2] * D;
        for (c = r[0], d = r[1], u = r[2], p = r[3], g = -(d - p), v = c - u, E = Math.sqrt(g * g + v * v), g /= E, v /= E, g *= O, v *= O, _.push(c - g, d - v, U, k, W, D), _.push(c + g, d + v, U, k, W, D), i = 1; L - 1 > i; i++) c = r[2 * (i - 1)],
        d = r[2 * (i - 1) + 1],
        u = r[2 * i],
        p = r[2 * i + 1],
        f = r[2 * (i + 1)],
        I = r[2 * (i + 1) + 1],
        g = -(d - p),
        v = c - u,
        E = Math.sqrt(g * g + v * v),
        g /= E,
        v /= E,
        g *= O,
        v *= O,
        w = -(p - I),
        m = u - f,
        E = Math.sqrt(w * w + m * m),
        w /= E,
        m /= E,
        w *= O,
        m *= O,
        b = -v + d - ( - v + p),
        x = -g + u - ( - g + c),
        T = ( - g + c) * ( - v + p) - ( - g + u) * ( - v + d),
        S = -m + I - ( - m + p),
        X = -w + u - ( - w + f),
        C = ( - w + f) * ( - m + p) - ( - w + u) * ( - m + I),
        M = b * X - S * x,
        Math.abs(M) < .1 ? (M += 10.1, _.push(u - g, p - v, U, k, W, D), _.push(u + g, p + v, U, k, W, D)) : (h = (x * C - X * T) / M, l = (S * T - b * C) / M, R = (h - u) * (h - u) + (l - p) + (l - p), R > 19600 ? (y = g - w, P = v - m, E = Math.sqrt(y * y + P * P), y /= E, P /= E, y *= O, P *= O, _.push(u - y, p - P), _.push(U, k, W, D), _.push(u + y, p + P), _.push(U, k, W, D), _.push(u - y, p - P), _.push(U, k, W, D), B++) : (_.push(h, l), _.push(U, k, W, D), _.push(u - (h - u), p - (l - p)), _.push(U, k, W, D)));
        for (c = r[2 * (L - 2)], d = r[2 * (L - 2) + 1], u = r[2 * (L - 1)], p = r[2 * (L - 1) + 1], g = -(d - p), v = c - u, E = Math.sqrt(g * g + v * v), g /= E, v /= E, g *= O, v *= O, _.push(u - g, p - v), _.push(U, k, W, D), _.push(u + g, p + v), _.push(U, k, W, D), A.push(G), i = 0; B > i; i++) A.push(G++);
        A.push(G - 1)
    }
},
PIXI.WebGLGraphics.buildComplexPoly = function(t, e) {
    var i = t.points.slice();
    if (! (i.length < 6)) {
        var r = e.indices;
        e.points = i,
        e.alpha = t.fillAlpha,
        e.color = PIXI.hex2rgb(t.fillColor);
        for (var n, o, a = 1 / 0,
        s = -(1 / 0), h = 1 / 0, l = -(1 / 0), c = 0; c < i.length; c += 2) n = i[c],
        o = i[c + 1],
        a = a > n ? n: a,
        s = n > s ? n: s,
        h = h > o ? o: h,
        l = o > l ? o: l;
        i.push(a, h, s, h, s, l, a, l);
        var d = i.length / 2;
        for (c = 0; d > c; c++) r.push(c)
    }
},
PIXI.WebGLGraphics.buildPoly = function(t, e) {
    var i = t.points;
    if (! (i.length < 6)) {
        var r = e.points,
        n = e.indices,
        o = i.length / 2,
        a = PIXI.hex2rgb(t.fillColor),
        s = t.fillAlpha,
        h = a[0] * s,
        l = a[1] * s,
        c = a[2] * s,
        d = PIXI.PolyK.Triangulate(i);
        if (!d) return ! 1;
        var u = r.length / 6,
        p = 0;
        for (p = 0; p < d.length; p += 3) n.push(d[p] + u),
        n.push(d[p] + u),
        n.push(d[p + 1] + u),
        n.push(d[p + 2] + u),
        n.push(d[p + 2] + u);
        for (p = 0; o > p; p++) r.push(i[2 * p], i[2 * p + 1], h, l, c, s);
        return ! 0
    }
},
PIXI.WebGLGraphics.graphicsDataPool = [],
PIXI.WebGLGraphicsData = function(t) {
    this.gl = t,
    this.color = [0, 0, 0],
    this.points = [],
    this.indices = [],
    this.buffer = t.createBuffer(),
    this.indexBuffer = t.createBuffer(),
    this.mode = 1,
    this.alpha = 1,
    this.dirty = !0
},
PIXI.WebGLGraphicsData.prototype.reset = function() {
    this.points = [],
    this.indices = []
},
PIXI.WebGLGraphicsData.prototype.upload = function() {
    var t = this.gl;
    this.glPoints = new PIXI.Float32Array(this.points),
    t.bindBuffer(t.ARRAY_BUFFER, this.buffer),
    t.bufferData(t.ARRAY_BUFFER, this.glPoints, t.STATIC_DRAW),
    this.glIndicies = new PIXI.Uint16Array(this.indices),
    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
    t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.glIndicies, t.STATIC_DRAW),
    this.dirty = !1
},
PIXI.glContexts = [],
PIXI.instances = [],
PIXI.WebGLRenderer = function(t, e, i) {
    if (i) for (var r in PIXI.defaultRenderOptions)"undefined" == typeof i[r] && (i[r] = PIXI.defaultRenderOptions[r]);
    else i = PIXI.defaultRenderOptions;
    PIXI.defaultRenderer || (PIXI.defaultRenderer = this),
    this.type = PIXI.WEBGL_RENDERER,
    this.transparent = i.transparent,
    this.autoResize = i.autoResize || !1,
    this.preserveDrawingBuffer = i.preserveDrawingBuffer,
    this.clearBeforeRender = i.clearBeforeRender,
    this.width = t || 800,
    this.height = e || 600,
    this.view = i.view || document.createElement("canvas"),
    this.contextLostBound = this.handleContextLost.bind(this),
    this.contextRestoredBound = this.handleContextRestored.bind(this),
    this.view.addEventListener("webglcontextlost", this.contextLostBound, !1),
    this.view.addEventListener("webglcontextrestored", this.contextRestoredBound, !1),
    this._contextOptions = {
        alpha: this.transparent,
        antialias: i.antialias,
        premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent,
        stencil: !0,
        preserveDrawingBuffer: i.preserveDrawingBuffer
    },
    this.projection = new PIXI.Point,
    this.offset = new PIXI.Point(0, 0),
    this.shaderManager = new PIXI.WebGLShaderManager,
    this.spriteBatch = new PIXI.WebGLSpriteBatch,
    this.maskManager = new PIXI.WebGLMaskManager,
    this.filterManager = new PIXI.WebGLFilterManager,
    this.stencilManager = new PIXI.WebGLStencilManager,
    this.blendModeManager = new PIXI.WebGLBlendModeManager,
    this.renderSession = {},
    this.renderSession.gl = this.gl,
    this.renderSession.drawCount = 0,
    this.renderSession.shaderManager = this.shaderManager,
    this.renderSession.maskManager = this.maskManager,
    this.renderSession.filterManager = this.filterManager,
    this.renderSession.blendModeManager = this.blendModeManager,
    this.renderSession.spriteBatch = this.spriteBatch,
    this.renderSession.stencilManager = this.stencilManager,
    this.renderSession.renderer = this,
    this.initContext(),
    this.mapBlendModes()
},
PIXI.WebGLRenderer.prototype.constructor = PIXI.WebGLRenderer,
PIXI.WebGLRenderer.prototype.initContext = function() {
    var t = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);
    if (this.gl = t, !t) throw new Error("This browser does not support webGL. Try using the canvas renderer");
    this.glContextId = t.id = PIXI.WebGLRenderer.glContextId++,
    PIXI.glContexts[this.glContextId] = t,
    PIXI.instances[this.glContextId] = this,
    t.disable(t.DEPTH_TEST),
    t.disable(t.CULL_FACE),
    t.enable(t.BLEND),
    this.shaderManager.setContext(t),
    this.spriteBatch.setContext(t),
    this.maskManager.setContext(t),
    this.filterManager.setContext(t),
    this.blendModeManager.setContext(t),
    this.stencilManager.setContext(t),
    this.renderSession.gl = this.gl,
    this.resize(this.width, this.height)
},
PIXI.WebGLRenderer.prototype.render = function(t) {
    if (!this.contextLost) {
        this.__stage !== t && (t.interactive && t.interactionManager.removeEvents(), this.__stage = t),
        t.updateTransform();
        var e = this.gl;
        t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this)),
        e.viewport(0, 0, this.width, this.height),
        e.bindFramebuffer(e.FRAMEBUFFER, null),
        e.clearColor(t.backgroundColorSplit[0], t.backgroundColorSplit[1], t.backgroundColorSplit[2], 1),
        e.clear(e.COLOR_BUFFER_BIT),
        this.renderDisplayObject(t, this.projection)
    }
},
PIXI.WebGLRenderer.prototype.renderDisplayObject = function(t, e, i) {
    this.renderSession.blendModeManager.setBlendMode(PIXI.blendModes.NORMAL),
    this.renderSession.drawCount = 0,
    this.renderSession.flipY = i ? -1 : 1,
    this.renderSession.projection = e,
    this.renderSession.offset = this.offset,
    this.spriteBatch.begin(this.renderSession),
    this.filterManager.begin(this.renderSession, i),
    t._renderWebGL(this.renderSession),
    this.spriteBatch.end()
},
PIXI.WebGLRenderer.prototype.resize = function(t, e) {
    this.width = t,
    this.height = e,
    this.view.width = this.width,
    this.view.height = this.height,
    this.gl.viewport(0, 0, this.width, this.height),
    this.projection.x = this.width / 2,
    this.projection.y = -this.height / 2
},
PIXI.WebGLRenderer.prototype.updateTexture = function(t) {
    if (t.hasLoaded) {
        var e = this.gl;
        return t._glTextures[e.id] || (t._glTextures[e.id] = e.createTexture()),
        e.bindTexture(e.TEXTURE_2D, t._glTextures[e.id]),
        e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultipliedAlpha),
        t.source.getContext ? e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, t.source.getContext("2d").getImageData(0, 0, t.source.width, t.source.height)) : e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, e.RGBA, e.UNSIGNED_BYTE, t.source),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, t.scaleMode === PIXI.scaleModes.LINEAR ? e.LINEAR: e.NEAREST),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, t.scaleMode === PIXI.scaleModes.LINEAR ? e.LINEAR: e.NEAREST),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
        t._dirty[e.id] = !1,
        t._glTextures[e.id]
    }
},
PIXI.WebGLRenderer.prototype.handleContextLost = function(t) {
    t.preventDefault(),
    this.contextLost = !0
},
PIXI.WebGLRenderer.prototype.handleContextRestored = function() {
    this.initContext();
    for (var t in PIXI.TextureCache) {
        var e = PIXI.TextureCache[t].baseTexture;
        e._glTextures = []
    }
    this.contextLost = !1
},
PIXI.WebGLRenderer.prototype.destroy = function() {
    this.view.removeEventListener("webglcontextlost", this.contextLostBound),
    this.view.removeEventListener("webglcontextrestored", this.contextRestoredBound),
    PIXI.glContexts[this.glContextId] = null,
    this.projection = null,
    this.offset = null,
    this.shaderManager.destroy(),
    this.spriteBatch.destroy(),
    this.maskManager.destroy(),
    this.filterManager.destroy(),
    this.shaderManager = null,
    this.spriteBatch = null,
    this.maskManager = null,
    this.filterManager = null,
    this.gl = null,
    this.renderSession = null
},
PIXI.WebGLRenderer.prototype.mapBlendModes = function() {
    var t = this.gl;
    PIXI.blendModesWebGL || (PIXI.blendModesWebGL = [], PIXI.blendModesWebGL[PIXI.blendModes.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.ADD] = [t.SRC_ALPHA, t.DST_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.SCREEN] = [t.SRC_ALPHA, t.ONE], PIXI.blendModesWebGL[PIXI.blendModes.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], PIXI.blendModesWebGL[PIXI.blendModes.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA])
},
PIXI.WebGLRenderer.glContextId = 0,
PIXI.WebGLBlendModeManager = function() {
    this.currentBlendMode = 99999
},
PIXI.WebGLBlendModeManager.prototype.constructor = PIXI.WebGLBlendModeManager,
PIXI.WebGLBlendModeManager.prototype.setContext = function(t) {
    this.gl = t
},
PIXI.WebGLBlendModeManager.prototype.setBlendMode = function(t) {
    if (this.currentBlendMode === t) return ! 1;
    this.currentBlendMode = t;
    var e = PIXI.blendModesWebGL[this.currentBlendMode];
    return this.gl.blendFunc(e[0], e[1]),
    !0
},
PIXI.WebGLBlendModeManager.prototype.destroy = function() {
    this.gl = null
},
PIXI.WebGLMaskManager = function() {},
PIXI.WebGLMaskManager.prototype.constructor = PIXI.WebGLMaskManager,
PIXI.WebGLMaskManager.prototype.setContext = function(t) {
    this.gl = t
},
PIXI.WebGLMaskManager.prototype.pushMask = function(t, e) {
    var i = e.gl;
    t.dirty && PIXI.WebGLGraphics.updateGraphics(t, i),
    t._webGL[i.id].data.length && e.stencilManager.pushStencil(t, t._webGL[i.id].data[0], e)
},
PIXI.WebGLMaskManager.prototype.popMask = function(t, e) {
    var i = this.gl;
    e.stencilManager.popStencil(t, t._webGL[i.id].data[0], e)
},
PIXI.WebGLMaskManager.prototype.destroy = function() {
    this.gl = null
},
PIXI.WebGLStencilManager = function() {
    this.stencilStack = [],
    this.reverse = !0,
    this.count = 0
},
PIXI.WebGLStencilManager.prototype.setContext = function(t) {
    this.gl = t
},
PIXI.WebGLStencilManager.prototype.pushStencil = function(t, e, i) {
    var r = this.gl;
    this.bindGraphics(t, e, i),
    0 === this.stencilStack.length && (r.enable(r.STENCIL_TEST), r.clear(r.STENCIL_BUFFER_BIT), this.reverse = !0, this.count = 0),
    this.stencilStack.push(e);
    var n = this.count;
    r.colorMask(!1, !1, !1, !1),
    r.stencilFunc(r.ALWAYS, 0, 255),
    r.stencilOp(r.KEEP, r.KEEP, r.INVERT),
    1 === e.mode ? (r.drawElements(r.TRIANGLE_FAN, e.indices.length - 4, r.UNSIGNED_SHORT, 0), this.reverse ? (r.stencilFunc(r.EQUAL, 255 - n, 255), r.stencilOp(r.KEEP, r.KEEP, r.DECR)) : (r.stencilFunc(r.EQUAL, n, 255), r.stencilOp(r.KEEP, r.KEEP, r.INCR)), r.drawElements(r.TRIANGLE_FAN, 4, r.UNSIGNED_SHORT, 2 * (e.indices.length - 4)), this.reverse ? r.stencilFunc(r.EQUAL, 255 - (n + 1), 255) : r.stencilFunc(r.EQUAL, n + 1, 255), this.reverse = !this.reverse) : (this.reverse ? (r.stencilFunc(r.EQUAL, n, 255), r.stencilOp(r.KEEP, r.KEEP, r.INCR)) : (r.stencilFunc(r.EQUAL, 255 - n, 255), r.stencilOp(r.KEEP, r.KEEP, r.DECR)), r.drawElements(r.TRIANGLE_STRIP, e.indices.length, r.UNSIGNED_SHORT, 0), this.reverse ? r.stencilFunc(r.EQUAL, n + 1, 255) : r.stencilFunc(r.EQUAL, 255 - (n + 1), 255)),
    r.colorMask(!0, !0, !0, !0),
    r.stencilOp(r.KEEP, r.KEEP, r.KEEP),
    this.count++
},
PIXI.WebGLStencilManager.prototype.bindGraphics = function(t, e, i) {
    this._currentGraphics = t;
    var r, n = this.gl,
    o = i.projection,
    a = i.offset;
    1 === e.mode ? (r = i.shaderManager.complexPrimitiveShader, i.shaderManager.setShader(r), n.uniform1f(r.flipY, i.flipY), n.uniformMatrix3fv(r.translationMatrix, !1, t.worldTransform.toArray(!0)), n.uniform2f(r.projectionVector, o.x, -o.y), n.uniform2f(r.offsetVector, -a.x, -a.y), n.uniform3fv(r.tintColor, PIXI.hex2rgb(t.tint)), n.uniform3fv(r.color, e.color), n.uniform1f(r.alpha, t.worldAlpha * e.alpha), n.bindBuffer(n.ARRAY_BUFFER, e.buffer), n.vertexAttribPointer(r.aVertexPosition, 2, n.FLOAT, !1, 8, 0), n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, e.indexBuffer)) : (r = i.shaderManager.primitiveShader, i.shaderManager.setShader(r), n.uniformMatrix3fv(r.translationMatrix, !1, t.worldTransform.toArray(!0)), n.uniform1f(r.flipY, i.flipY), n.uniform2f(r.projectionVector, o.x, -o.y), n.uniform2f(r.offsetVector, -a.x, -a.y), n.uniform3fv(r.tintColor, PIXI.hex2rgb(t.tint)), n.uniform1f(r.alpha, t.worldAlpha), n.bindBuffer(n.ARRAY_BUFFER, e.buffer), n.vertexAttribPointer(r.aVertexPosition, 2, n.FLOAT, !1, 24, 0), n.vertexAttribPointer(r.colorAttribute, 4, n.FLOAT, !1, 24, 8), n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, e.indexBuffer))
},
PIXI.WebGLStencilManager.prototype.popStencil = function(t, e, i) {
    var r = this.gl;
    if (this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length) r.disable(r.STENCIL_TEST);
    else {
        var n = this.count;
        this.bindGraphics(t, e, i),
        r.colorMask(!1, !1, !1, !1),
        1 === e.mode ? (this.reverse = !this.reverse, this.reverse ? (r.stencilFunc(r.EQUAL, 255 - (n + 1), 255), r.stencilOp(r.KEEP, r.KEEP, r.INCR)) : (r.stencilFunc(r.EQUAL, n + 1, 255), r.stencilOp(r.KEEP, r.KEEP, r.DECR)), r.drawElements(r.TRIANGLE_FAN, 4, r.UNSIGNED_SHORT, 2 * (e.indices.length - 4)), r.stencilFunc(r.ALWAYS, 0, 255), r.stencilOp(r.KEEP, r.KEEP, r.INVERT), r.drawElements(r.TRIANGLE_FAN, e.indices.length - 4, r.UNSIGNED_SHORT, 0), this.reverse ? r.stencilFunc(r.EQUAL, n, 255) : r.stencilFunc(r.EQUAL, 255 - n, 255)) : (this.reverse ? (r.stencilFunc(r.EQUAL, n + 1, 255), r.stencilOp(r.KEEP, r.KEEP, r.DECR)) : (r.stencilFunc(r.EQUAL, 255 - (n + 1), 255), r.stencilOp(r.KEEP, r.KEEP, r.INCR)), r.drawElements(r.TRIANGLE_STRIP, e.indices.length, r.UNSIGNED_SHORT, 0), this.reverse ? r.stencilFunc(r.EQUAL, n, 255) : r.stencilFunc(r.EQUAL, 255 - n, 255)),
        r.colorMask(!0, !0, !0, !0),
        r.stencilOp(r.KEEP, r.KEEP, r.KEEP)
    }
},
PIXI.WebGLStencilManager.prototype.destroy = function() {
    this.stencilStack = null,
    this.gl = null
},
PIXI.WebGLShaderManager = function() {
    this.maxAttibs = 10,
    this.attribState = [],
    this.tempAttribState = [];
    for (var t = 0; t < this.maxAttibs; t++) this.attribState[t] = !1;
    this.stack = []
},
PIXI.WebGLShaderManager.prototype.constructor = PIXI.WebGLShaderManager,
PIXI.WebGLShaderManager.prototype.setContext = function(t) {
    this.gl = t,
    this.primitiveShader = new PIXI.PrimitiveShader(t),
    this.complexPrimitiveShader = new PIXI.ComplexPrimitiveShader(t),
    this.defaultShader = new PIXI.PixiShader(t),
    this.fastShader = new PIXI.PixiFastShader(t),
    this.setShader(this.defaultShader)
},
PIXI.WebGLShaderManager.prototype.setAttribs = function(t) {
    var e;
    for (e = 0; e < this.tempAttribState.length; e++) this.tempAttribState[e] = !1;
    for (e = 0; e < t.length; e++) {
        var i = t[e];
        this.tempAttribState[i] = !0
    }
    var r = this.gl;
    for (e = 0; e < this.attribState.length; e++) this.attribState[e] !== this.tempAttribState[e] && (this.attribState[e] = this.tempAttribState[e], this.tempAttribState[e] ? r.enableVertexAttribArray(e) : r.disableVertexAttribArray(e))
},
PIXI.WebGLShaderManager.prototype.setShader = function(t) {
    return this._currentId === t._UID ? !1 : (this._currentId = t._UID, this.currentShader = t, this.gl.useProgram(t.program), this.setAttribs(t.attributes), !0)
},
PIXI.WebGLShaderManager.prototype.destroy = function() {
    this.attribState = null,
    this.tempAttribState = null,
    this.primitiveShader.destroy(),
    this.complexPrimitiveShader.destroy(),
    this.defaultShader.destroy(),
    this.fastShader.destroy(),
    this.gl = null
},
PIXI.WebGLSpriteBatch = function() {
    this.vertSize = 5,
    this.size = 2e3;
    var t = 4 * this.size * 4 * this.vertSize,
    e = 6 * this.size;
    this.vertices = new PIXI.ArrayBuffer(t),
    this.positions = new PIXI.Float32Array(this.vertices),
    this.colors = new PIXI.Uint32Array(this.vertices),
    this.indices = new PIXI.Uint16Array(e),
    this.lastIndexCount = 0;
    for (var i = 0,
    r = 0; e > i; i += 6, r += 4) this.indices[i + 0] = r + 0,
    this.indices[i + 1] = r + 1,
    this.indices[i + 2] = r + 2,
    this.indices[i + 3] = r + 0,
    this.indices[i + 4] = r + 2,
    this.indices[i + 5] = r + 3;
    this.drawing = !1,
    this.currentBatchSize = 0,
    this.currentBaseTexture = null,
    this.dirty = !0,
    this.textures = [],
    this.blendModes = [],
    this.shaders = [],
    this.sprites = [],
    this.defaultShader = new PIXI.AbstractFilter(["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"])
},
PIXI.WebGLSpriteBatch.prototype.setContext = function(t) {
    this.gl = t,
    this.vertexBuffer = t.createBuffer(),
    this.indexBuffer = t.createBuffer(),
    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
    t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW),
    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
    t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW),
    this.currentBlendMode = 99999;
    var e = new PIXI.PixiShader(t);
    e.fragmentSrc = this.defaultShader.fragmentSrc,
    e.uniforms = {},
    e.init(),
    this.defaultShader.shaders[t.id] = e
},
PIXI.WebGLSpriteBatch.prototype.begin = function(t) {
    this.renderSession = t,
    this.shader = this.renderSession.shaderManager.defaultShader,
    this.start()
},
PIXI.WebGLSpriteBatch.prototype.end = function() {
    this.flush()
},
PIXI.WebGLSpriteBatch.prototype.render = function(t) {
    var e = t.texture;
    this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = e.baseTexture);
    var i = e._uvs;
    if (i) {
        var r, n, o, a, s = t.anchor.x,
        h = t.anchor.y;
        if (e.trim) {
            var l = e.trim;
            n = l.x - s * l.width,
            r = n + e.crop.width,
            a = l.y - h * l.height,
            o = a + e.crop.height
        } else r = e.frame.width * (1 - s),
        n = e.frame.width * -s,
        o = e.frame.height * (1 - h),
        a = e.frame.height * -h;
        var c = 4 * this.currentBatchSize * this.vertSize,
        d = t.worldTransform,
        u = d.a,
        p = d.b,
        f = d.c,
        I = d.d,
        g = d.tx,
        v = d.ty,
        w = this.colors,
        m = this.positions;
        m[c] = u * n + f * a + g | 0,
        m[c + 1] = I * a + p * n + v | 0,
        m[c + 5] = u * r + f * a + g | 0,
        m[c + 6] = I * a + p * r + v | 0,
        m[c + 10] = u * r + f * o + g | 0,
        m[c + 11] = I * o + p * r + v | 0,
        m[c + 15] = u * n + f * o + g | 0,
        m[c + 16] = I * o + p * n + v | 0,
        m[c + 2] = i.x0,
        m[c + 3] = i.y0,
        m[c + 7] = i.x1,
        m[c + 8] = i.y1,
        m[c + 12] = i.x2,
        m[c + 13] = i.y2,
        m[c + 17] = i.x3,
        m[c + 18] = i.y3;
        var y = t.tint;
        w[c + 4] = w[c + 9] = w[c + 14] = w[c + 19] = (y >> 16) + (65280 & y) + ((255 & y) << 16) + (255 * t.worldAlpha << 24),
        this.sprites[this.currentBatchSize++] = t
    }
},
PIXI.WebGLSpriteBatch.prototype.renderTilingSprite = function(t) {
    var e = t.tilingTexture;
    this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = e.baseTexture),
    t._uvs || (t._uvs = new PIXI.TextureUvs);
    var i = t._uvs;
    t.tilePosition.x %= e.baseTexture.width * t.tileScaleOffset.x,
    t.tilePosition.y %= e.baseTexture.height * t.tileScaleOffset.y;
    var r = t.tilePosition.x / (e.baseTexture.width * t.tileScaleOffset.x),
    n = t.tilePosition.y / (e.baseTexture.height * t.tileScaleOffset.y),
    o = t.width / e.baseTexture.width / (t.tileScale.x * t.tileScaleOffset.x),
    a = t.height / e.baseTexture.height / (t.tileScale.y * t.tileScaleOffset.y);
    i.x0 = 0 - r,
    i.y0 = 0 - n,
    i.x1 = 1 * o - r,
    i.y1 = 0 - n,
    i.x2 = 1 * o - r,
    i.y2 = 1 * a - n,
    i.x3 = 0 - r,
    i.y3 = 1 * a - n;
    var s = t.tint,
    h = (s >> 16) + (65280 & s) + ((255 & s) << 16) + (255 * t.alpha << 24),
    l = this.positions,
    c = this.colors,
    d = t.width,
    u = t.height,
    p = t.anchor.x,
    f = t.anchor.y,
    I = d * (1 - p),
    g = d * -p,
    v = u * (1 - f),
    w = u * -f,
    m = 4 * this.currentBatchSize * this.vertSize,
    y = t.worldTransform,
    P = y.a,
    b = y.b,
    x = y.c,
    T = y.d,
    S = y.tx,
    X = y.ty;
    l[m++] = P * g + x * w + S,
    l[m++] = T * w + b * g + X,
    l[m++] = i.x0,
    l[m++] = i.y0,
    c[m++] = h,
    l[m++] = P * I + x * w + S,
    l[m++] = T * w + b * I + X,
    l[m++] = i.x1,
    l[m++] = i.y1,
    c[m++] = h,
    l[m++] = P * I + x * v + S,
    l[m++] = T * v + b * I + X,
    l[m++] = i.x2,
    l[m++] = i.y2,
    c[m++] = h,
    l[m++] = P * g + x * v + S,
    l[m++] = T * v + b * g + X,
    l[m++] = i.x3,
    l[m++] = i.y3,
    c[m++] = h,
    this.sprites[this.currentBatchSize++] = t
},
PIXI.WebGLSpriteBatch.prototype.flush = function() {
    if (0 !== this.currentBatchSize) {
        var t, e = this.gl;
        if (this.dirty) {
            this.dirty = !1,
            e.activeTexture(e.TEXTURE0),
            e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer),
            e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
            t = this.defaultShader.shaders[e.id];
            var i = 4 * this.vertSize;
            e.vertexAttribPointer(t.aVertexPosition, 2, e.FLOAT, !1, i, 0),
            e.vertexAttribPointer(t.aTextureCoord, 2, e.FLOAT, !1, i, 8),
            e.vertexAttribPointer(t.colorAttribute, 4, e.UNSIGNED_BYTE, !0, i, 16)
        }
        if (this.currentBatchSize > .5 * this.size) e.bufferSubData(e.ARRAY_BUFFER, 0, this.vertices);
        else {
            var r = this.positions.subarray(0, 4 * this.currentBatchSize * this.vertSize);
            e.bufferSubData(e.ARRAY_BUFFER, 0, r)
        }
        for (var n, o, a, s, h = 0,
        l = 0,
        c = null,
        d = this.renderSession.blendModeManager.currentBlendMode,
        u = null,
        p = !1,
        f = !1,
        I = 0,
        g = this.currentBatchSize; g > I; I++) {
            if (s = this.sprites[I], n = s.texture.baseTexture, o = s.blendMode, a = s.shader || this.defaultShader, p = d !== o, f = u !== a, (c !== n || p || f) && (this.renderBatch(c, h, l), l = I, h = 0, c = n, p && (d = o, this.renderSession.blendModeManager.setBlendMode(d)), f)) {
                u = a,
                t = u.shaders[e.id],
                t || (t = new PIXI.PixiShader(e), t.fragmentSrc = u.fragmentSrc, t.uniforms = u.uniforms, t.init(), u.shaders[e.id] = t),
                this.renderSession.shaderManager.setShader(t),
                t.dirty && t.syncUniforms();
                var v = this.renderSession.projection;
                e.uniform2f(t.projectionVector, v.x, v.y);
                var w = this.renderSession.offset;
                e.uniform2f(t.offsetVector, w.x, w.y)
            }
            h++
        }
        this.renderBatch(c, h, l),
        this.currentBatchSize = 0
    }
},
PIXI.WebGLSpriteBatch.prototype.renderBatch = function(t, e, i) {
    if (0 !== e) {
        var r = this.gl;
        t._dirty[r.id] ? this.renderSession.renderer.updateTexture(t) : r.bindTexture(r.TEXTURE_2D, t._glTextures[r.id]),
        r.drawElements(r.TRIANGLES, 6 * e, r.UNSIGNED_SHORT, 6 * i * 2),
        this.renderSession.drawCount++
    }
},
PIXI.WebGLSpriteBatch.prototype.stop = function() {
    this.flush(),
    this.dirty = !0
},
PIXI.WebGLSpriteBatch.prototype.start = function() {
    this.dirty = !0
},
PIXI.WebGLSpriteBatch.prototype.destroy = function() {
    this.vertices = null,
    this.indices = null,
    this.gl.deleteBuffer(this.vertexBuffer),
    this.gl.deleteBuffer(this.indexBuffer),
    this.currentBaseTexture = null,
    this.gl = null
},
PIXI.WebGLFastSpriteBatch = function(t) {
    this.vertSize = 10,
    this.maxSize = 6e3,
    this.size = this.maxSize;
    var e = 4 * this.size * this.vertSize,
    i = 6 * this.maxSize;
    this.vertices = new PIXI.Float32Array(e),
    this.indices = new PIXI.Uint16Array(i),
    this.vertexBuffer = null,
    this.indexBuffer = null,
    this.lastIndexCount = 0;
    for (var r = 0,
    n = 0; i > r; r += 6, n += 4) this.indices[r + 0] = n + 0,
    this.indices[r + 1] = n + 1,
    this.indices[r + 2] = n + 2,
    this.indices[r + 3] = n + 0,
    this.indices[r + 4] = n + 2,
    this.indices[r + 5] = n + 3;
    this.drawing = !1,
    this.currentBatchSize = 0,
    this.currentBaseTexture = null,
    this.currentBlendMode = 0,
    this.renderSession = null,
    this.shader = null,
    this.matrix = null,
    this.setContext(t)
},
PIXI.WebGLFastSpriteBatch.prototype.constructor = PIXI.WebGLFastSpriteBatch,
PIXI.WebGLFastSpriteBatch.prototype.setContext = function(t) {
    this.gl = t,
    this.vertexBuffer = t.createBuffer(),
    this.indexBuffer = t.createBuffer(),
    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
    t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW),
    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
    t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW)
},
PIXI.WebGLFastSpriteBatch.prototype.begin = function(t, e) {
    this.renderSession = e,
    this.shader = this.renderSession.shaderManager.fastShader,
    this.matrix = t.worldTransform.toArray(!0),
    this.start()
},
PIXI.WebGLFastSpriteBatch.prototype.end = function() {
    this.flush()
},
PIXI.WebGLFastSpriteBatch.prototype.render = function(t) {
    var e = t.children,
    i = e[0];
    if (i.texture._uvs) {
        this.currentBaseTexture = i.texture.baseTexture,
        i.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(i.blendMode));
        for (var r = 0,
        n = e.length; n > r; r++) this.renderSprite(e[r]);
        this.flush()
    }
},
PIXI.WebGLFastSpriteBatch.prototype.renderSprite = function(t) {
    if (t.visible && (t.texture.baseTexture === this.currentBaseTexture || (this.flush(), this.currentBaseTexture = t.texture.baseTexture, t.texture._uvs))) {
        var e, i, r, n, o, a, s, h, l = this.vertices;
        if (e = t.texture._uvs, i = t.texture.frame.width, r = t.texture.frame.height, t.texture.trim) {
            var c = t.texture.trim;
            o = c.x - t.anchor.x * c.width,
            n = o + t.texture.crop.width,
            s = c.y - t.anchor.y * c.height,
            a = s + t.texture.crop.height
        } else n = t.texture.frame.width * (1 - t.anchor.x),
        o = t.texture.frame.width * -t.anchor.x,
        a = t.texture.frame.height * (1 - t.anchor.y),
        s = t.texture.frame.height * -t.anchor.y;
        h = 4 * this.currentBatchSize * this.vertSize,
        l[h++] = o,
        l[h++] = s,
        l[h++] = t.position.x,
        l[h++] = t.position.y,
        l[h++] = t.scale.x,
        l[h++] = t.scale.y,
        l[h++] = t.rotation,
        l[h++] = e.x0,
        l[h++] = e.y1,
        l[h++] = t.alpha,
        l[h++] = n,
        l[h++] = s,
        l[h++] = t.position.x,
        l[h++] = t.position.y,
        l[h++] = t.scale.x,
        l[h++] = t.scale.y,
        l[h++] = t.rotation,
        l[h++] = e.x1,
        l[h++] = e.y1,
        l[h++] = t.alpha,
        l[h++] = n,
        l[h++] = a,
        l[h++] = t.position.x,
        l[h++] = t.position.y,
        l[h++] = t.scale.x,
        l[h++] = t.scale.y,
        l[h++] = t.rotation,
        l[h++] = e.x2,
        l[h++] = e.y2,
        l[h++] = t.alpha,
        l[h++] = o,
        l[h++] = a,
        l[h++] = t.position.x,
        l[h++] = t.position.y,
        l[h++] = t.scale.x,
        l[h++] = t.scale.y,
        l[h++] = t.rotation,
        l[h++] = e.x3,
        l[h++] = e.y3,
        l[h++] = t.alpha,
        this.currentBatchSize++,
        this.currentBatchSize >= this.size && this.flush()
    }
},
PIXI.WebGLFastSpriteBatch.prototype.flush = function() {
    if (0 !== this.currentBatchSize) {
        var t = this.gl;
        if (this.currentBaseTexture._glTextures[t.id] || this.renderSession.renderer.updateTexture(this.currentBaseTexture, t), t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id]), this.currentBatchSize > .5 * this.size) t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices);
        else {
            var e = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
            t.bufferSubData(t.ARRAY_BUFFER, 0, e)
        }
        t.drawElements(t.TRIANGLES, 6 * this.currentBatchSize, t.UNSIGNED_SHORT, 0),
        this.currentBatchSize = 0,
        this.renderSession.drawCount++
    }
},
PIXI.WebGLFastSpriteBatch.prototype.stop = function() {
    this.flush()
},
PIXI.WebGLFastSpriteBatch.prototype.start = function() {
    var t = this.gl;
    t.activeTexture(t.TEXTURE0),
    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    var e = this.renderSession.projection;
    t.uniform2f(this.shader.projectionVector, e.x, e.y),
    t.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
    var i = 4 * this.vertSize;
    t.vertexAttribPointer(this.shader.aVertexPosition, 2, t.FLOAT, !1, i, 0),
    t.vertexAttribPointer(this.shader.aPositionCoord, 2, t.FLOAT, !1, i, 8),
    t.vertexAttribPointer(this.shader.aScale, 2, t.FLOAT, !1, i, 16),
    t.vertexAttribPointer(this.shader.aRotation, 1, t.FLOAT, !1, i, 24),
    t.vertexAttribPointer(this.shader.aTextureCoord, 2, t.FLOAT, !1, i, 28),
    t.vertexAttribPointer(this.shader.colorAttribute, 1, t.FLOAT, !1, i, 36)
},
PIXI.WebGLFilterManager = function() {
    this.filterStack = [],
    this.offsetX = 0,
    this.offsetY = 0
},
PIXI.WebGLFilterManager.prototype.constructor = PIXI.WebGLFilterManager,
PIXI.WebGLFilterManager.prototype.setContext = function(t) {
    this.gl = t,
    this.texturePool = [],
    this.initShaderBuffers()
},
PIXI.WebGLFilterManager.prototype.begin = function(t, e) {
    this.renderSession = t,
    this.defaultShader = t.shaderManager.defaultShader;
    var i = this.renderSession.projection;
    this.width = 2 * i.x,
    this.height = 2 * -i.y,
    this.buffer = e
},
PIXI.WebGLFilterManager.prototype.pushFilter = function(t) {
    var e = this.gl,
    i = this.renderSession.projection,
    r = this.renderSession.offset;
    t._filterArea = t.target.filterArea || t.target.getBounds(),
    this.filterStack.push(t);
    var n = t.filterPasses[0];
    this.offsetX += t._filterArea.x,
    this.offsetY += t._filterArea.y;
    var o = this.texturePool.pop();
    o ? o.resize(this.width, this.height) : o = new PIXI.FilterTexture(this.gl, this.width, this.height),
    e.bindTexture(e.TEXTURE_2D, o.texture);
    var a = t._filterArea,
    s = n.padding;
    a.x -= s,
    a.y -= s,
    a.width += 2 * s,
    a.height += 2 * s,
    a.x < 0 && (a.x = 0),
    a.width > this.width && (a.width = this.width),
    a.y < 0 && (a.y = 0),
    a.height > this.height && (a.height = this.height),
    e.bindFramebuffer(e.FRAMEBUFFER, o.frameBuffer),
    e.viewport(0, 0, a.width, a.height),
    i.x = a.width / 2,
    i.y = -a.height / 2,
    r.x = -a.x,
    r.y = -a.y,
    e.colorMask(!0, !0, !0, !0),
    e.clearColor(0, 0, 0, 0),
    e.clear(e.COLOR_BUFFER_BIT),
    t._glFilterTexture = o
},
PIXI.WebGLFilterManager.prototype.popFilter = function() {
    var t = this.gl,
    e = this.filterStack.pop(),
    i = e._filterArea,
    r = e._glFilterTexture,
    n = this.renderSession.projection,
    o = this.renderSession.offset;
    if (e.filterPasses.length > 1) {
        t.viewport(0, 0, i.width, i.height),
        t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
        this.vertexArray[0] = 0,
        this.vertexArray[1] = i.height,
        this.vertexArray[2] = i.width,
        this.vertexArray[3] = i.height,
        this.vertexArray[4] = 0,
        this.vertexArray[5] = 0,
        this.vertexArray[6] = i.width,
        this.vertexArray[7] = 0,
        t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray),
        t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer),
        this.uvArray[2] = i.width / this.width,
        this.uvArray[5] = i.height / this.height,
        this.uvArray[6] = i.width / this.width,
        this.uvArray[7] = i.height / this.height,
        t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray);
        var a = r,
        s = this.texturePool.pop();
        s || (s = new PIXI.FilterTexture(this.gl, this.width, this.height)),
        s.resize(this.width, this.height),
        t.bindFramebuffer(t.FRAMEBUFFER, s.frameBuffer),
        t.clear(t.COLOR_BUFFER_BIT),
        t.disable(t.BLEND);
        for (var h = 0; h < e.filterPasses.length - 1; h++) {
            var l = e.filterPasses[h];
            t.bindFramebuffer(t.FRAMEBUFFER, s.frameBuffer),
            t.activeTexture(t.TEXTURE0),
            t.bindTexture(t.TEXTURE_2D, a.texture),
            this.applyFilterPass(l, i, i.width, i.height);
            var c = a;
            a = s,
            s = c
        }
        t.enable(t.BLEND),
        r = a,
        this.texturePool.push(s)
    }
    var d = e.filterPasses[e.filterPasses.length - 1];
    this.offsetX -= i.x,
    this.offsetY -= i.y;
    var u = this.width,
    p = this.height,
    f = 0,
    I = 0,
    g = this.buffer;
    if (0 === this.filterStack.length) t.colorMask(!0, !0, !0, !0);
    else {
        var v = this.filterStack[this.filterStack.length - 1];
        i = v._filterArea,
        u = i.width,
        p = i.height,
        f = i.x,
        I = i.y,
        g = v._glFilterTexture.frameBuffer
    }
    n.x = u / 2,
    n.y = -p / 2,
    o.x = f,
    o.y = I,
    i = e._filterArea;
    var w = i.x - f,
    m = i.y - I;
    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
    this.vertexArray[0] = w,
    this.vertexArray[1] = m + i.height,
    this.vertexArray[2] = w + i.width,
    this.vertexArray[3] = m + i.height,
    this.vertexArray[4] = w,
    this.vertexArray[5] = m,
    this.vertexArray[6] = w + i.width,
    this.vertexArray[7] = m,
    t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray),
    t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer),
    this.uvArray[2] = i.width / this.width,
    this.uvArray[5] = i.height / this.height,
    this.uvArray[6] = i.width / this.width,
    this.uvArray[7] = i.height / this.height,
    t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray),
    t.viewport(0, 0, u, p),
    t.bindFramebuffer(t.FRAMEBUFFER, g),
    t.activeTexture(t.TEXTURE0),
    t.bindTexture(t.TEXTURE_2D, r.texture),
    this.applyFilterPass(d, i, u, p),
    this.texturePool.push(r),
    e._glFilterTexture = null
},
PIXI.WebGLFilterManager.prototype.applyFilterPass = function(t, e, i, r) {
    var n = this.gl,
    o = t.shaders[n.id];
    o || (o = new PIXI.PixiShader(n), o.fragmentSrc = t.fragmentSrc, o.uniforms = t.uniforms, o.init(), t.shaders[n.id] = o),
    this.renderSession.shaderManager.setShader(o),
    n.uniform2f(o.projectionVector, i / 2, -r / 2),
    n.uniform2f(o.offsetVector, 0, 0),
    t.uniforms.dimensions && (t.uniforms.dimensions.value[0] = this.width, t.uniforms.dimensions.value[1] = this.height, t.uniforms.dimensions.value[2] = this.vertexArray[0], t.uniforms.dimensions.value[3] = this.vertexArray[5]),
    o.syncUniforms(),
    n.bindBuffer(n.ARRAY_BUFFER, this.vertexBuffer),
    n.vertexAttribPointer(o.aVertexPosition, 2, n.FLOAT, !1, 0, 0),
    n.bindBuffer(n.ARRAY_BUFFER, this.uvBuffer),
    n.vertexAttribPointer(o.aTextureCoord, 2, n.FLOAT, !1, 0, 0),
    n.bindBuffer(n.ARRAY_BUFFER, this.colorBuffer),
    n.vertexAttribPointer(o.colorAttribute, 2, n.FLOAT, !1, 0, 0),
    n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
    n.drawElements(n.TRIANGLES, 6, n.UNSIGNED_SHORT, 0),
    this.renderSession.drawCount++
},
PIXI.WebGLFilterManager.prototype.initShaderBuffers = function() {
    var t = this.gl;
    this.vertexBuffer = t.createBuffer(),
    this.uvBuffer = t.createBuffer(),
    this.colorBuffer = t.createBuffer(),
    this.indexBuffer = t.createBuffer(),
    this.vertexArray = new PIXI.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
    t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer),
    t.bufferData(t.ARRAY_BUFFER, this.vertexArray, t.STATIC_DRAW),
    this.uvArray = new PIXI.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]),
    t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer),
    t.bufferData(t.ARRAY_BUFFER, this.uvArray, t.STATIC_DRAW),
    this.colorArray = new PIXI.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]),
    t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer),
    t.bufferData(t.ARRAY_BUFFER, this.colorArray, t.STATIC_DRAW),
    t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
    t.bufferData(t.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), t.STATIC_DRAW)
},
PIXI.WebGLFilterManager.prototype.destroy = function() {
    var t = this.gl;
    this.filterStack = null,
    this.offsetX = 0,
    this.offsetY = 0;
    for (var e = 0; e < this.texturePool.length; e++) this.texturePool[e].destroy();
    this.texturePool = null,
    t.deleteBuffer(this.vertexBuffer),
    t.deleteBuffer(this.uvBuffer),
    t.deleteBuffer(this.colorBuffer),
    t.deleteBuffer(this.indexBuffer)
},
PIXI.FilterTexture = function(t, e, i, r) {
    this.gl = t,
    this.frameBuffer = t.createFramebuffer(),
    this.texture = t.createTexture(),
    r = r || PIXI.scaleModes.DEFAULT,
    t.bindTexture(t.TEXTURE_2D, this.texture),
    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, r === PIXI.scaleModes.LINEAR ? t.LINEAR: t.NEAREST),
    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, r === PIXI.scaleModes.LINEAR ? t.LINEAR: t.NEAREST),
    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE),
    t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE),
    t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer),
    t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer),
    t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0),
    this.renderBuffer = t.createRenderbuffer(),
    t.bindRenderbuffer(t.RENDERBUFFER, this.renderBuffer),
    t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.renderBuffer),
    this.resize(e, i)
},
PIXI.FilterTexture.prototype.constructor = PIXI.FilterTexture,
PIXI.FilterTexture.prototype.clear = function() {
    var t = this.gl;
    t.clearColor(0, 0, 0, 0),
    t.clear(t.COLOR_BUFFER_BIT)
},
PIXI.FilterTexture.prototype.resize = function(t, e) {
    if (this.width !== t || this.height !== e) {
        this.width = t,
        this.height = e;
        var i = this.gl;
        i.bindTexture(i.TEXTURE_2D, this.texture),
        i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, t, e, 0, i.RGBA, i.UNSIGNED_BYTE, null),
        i.bindRenderbuffer(i.RENDERBUFFER, this.renderBuffer),
        i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, t, e)
    }
},
PIXI.FilterTexture.prototype.destroy = function() {
    var t = this.gl;
    t.deleteFramebuffer(this.frameBuffer),
    t.deleteTexture(this.texture),
    this.frameBuffer = null,
    this.texture = null
},
PIXI.CanvasBuffer = function(t, e) {
    this.width = t,
    this.height = e,
    this.canvas = document.createElement("canvas"),
    this.context = this.canvas.getContext("2d"),
    this.canvas.width = t,
    this.canvas.height = e
},
PIXI.CanvasBuffer.prototype.constructor = PIXI.CanvasBuffer,
PIXI.CanvasBuffer.prototype.clear = function() {
    this.context.setTransform(1, 0, 0, 1, 0, 0),
    this.context.clearRect(0, 0, this.width, this.height)
},
PIXI.CanvasBuffer.prototype.resize = function(t, e) {
    this.width = this.canvas.width = t,
    this.height = this.canvas.height = e
},
PIXI.CanvasMaskManager = function() {},
PIXI.CanvasMaskManager.prototype.constructor = PIXI.CanvasMaskManager,
PIXI.CanvasMaskManager.prototype.pushMask = function(t, e) {
    var i = e.context;
    i.save();
    var r = t.alpha,
    n = t.worldTransform;
    i.setTransform(n.a, n.b, n.c, n.d, n.tx, n.ty),
    PIXI.CanvasGraphics.renderGraphicsMask(t, i),
    i.clip(),
    t.worldAlpha = r
},
PIXI.CanvasMaskManager.prototype.popMask = function(t) {
    t.context.restore()
},
PIXI.CanvasTinter = function() {},
PIXI.CanvasTinter.getTintedTexture = function(t, e) {
    var i = t.texture;
    e = PIXI.CanvasTinter.roundColor(e);
    var r = "#" + ("00000" + (0 | e).toString(16)).substr( - 6);
    if (i.tintCache = i.tintCache || {},
    i.tintCache[r]) return i.tintCache[r];
    var n = PIXI.CanvasTinter.canvas || document.createElement("canvas");
    if (PIXI.CanvasTinter.tintMethod(i, e, n), PIXI.CanvasTinter.convertTintToImage) {
        var o = new Image;
        o.src = n.toDataURL(),
        i.tintCache[r] = o
    } else i.tintCache[r] = n,
    PIXI.CanvasTinter.canvas = null;
    return n
},
PIXI.CanvasTinter.tintWithMultiply = function(t, e, i) {
    var r = i.getContext("2d"),
    n = t.crop;
    i.width = n.width,
    i.height = n.height,
    r.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr( - 6),
    r.fillRect(0, 0, n.width, n.height),
    r.globalCompositeOperation = "multiply",
    r.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height),
    r.globalCompositeOperation = "destination-atop",
    r.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height)
},
PIXI.CanvasTinter.tintWithPerPixel = function(t, e, i) {
    var r = i.getContext("2d"),
    n = t.crop;
    i.width = n.width,
    i.height = n.height,
    r.globalCompositeOperation = "copy",
    r.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height);
    for (var o = PIXI.hex2rgb(e), a = o[0], s = o[1], h = o[2], l = r.getImageData(0, 0, n.width, n.height), c = l.data, d = 0; d < c.length; d += 4) c[d + 0] = c[d + 0] * a >> 0,
    c[d + 1] = c[d + 1] * s >> 0,
    c[d + 2] = c[d + 2] * h >> 0;
    r.putImageData(l, 0, 0)
},
PIXI.CanvasTinter.roundColor = function(t) {
    var e = PIXI.CanvasTinter.cacheStepsPerColorChannel,
    i = PIXI.hex2rgb(t);
    return i[0] = Math.min(255, i[0] / e * e),
    i[1] = Math.min(255, i[1] / e * e),
    i[2] = Math.min(255, i[2] / e * e),
    PIXI.rgb2hex(i)
},
PIXI.CanvasTinter.cacheStepsPerColorChannel = 8,
PIXI.CanvasTinter.convertTintToImage = !1,
PIXI.CanvasTinter.canUseMultiply = PIXI.canUseNewCanvasBlendModes(),
PIXI.CanvasTinter.tintMethod = PIXI.CanvasTinter.tintWithPerPixel,
PIXI.CanvasRenderer = function(t, e, i) {
    if (i) for (var r in PIXI.defaultRenderOptions)"undefined" == typeof i[r] && (i[r] = PIXI.defaultRenderOptions[r]);
    else i = PIXI.defaultRenderOptions;
    PIXI.defaultRenderer || (PIXI.defaultRenderer = this),
    this.type = PIXI.CANVAS_RENDERER,
    this.clearBeforeRender = i.clearBeforeRender,
    this.transparent = i.transparent,
    this.autoResize = i.autoResize || !1,
    this.width = t || 800,
    this.height = e || 600,
    this.view = i.view || document.createElement("canvas"),
    this.context = this.view.getContext("2d", {
        alpha: this.transparent
    }),
    this.refresh = !0,
    this.count = 0,
    this.maskManager = new PIXI.CanvasMaskManager,
    this.renderSession = {
        context: this.context,
        maskManager: this.maskManager,
        scaleMode: null,
        smoothProperty: null
    },
    this.mapBlendModes(),
    this.resize(t, e),
    "imageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "imageSmoothingEnabled": "webkitImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "webkitImageSmoothingEnabled": "mozImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "mozImageSmoothingEnabled": "oImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "oImageSmoothingEnabled": "msImageSmoothingEnabled" in this.context && (this.renderSession.smoothProperty = "msImageSmoothingEnabled")
},
PIXI.CanvasRenderer.prototype.constructor = PIXI.CanvasRenderer,
PIXI.CanvasRenderer.prototype.render = function(t) {
    t.updateTransform(),
    this.context.setTransform(1, 0, 0, 1, 0, 0),
    this.context.globalAlpha = 1,
    this.renderSession.currentBlendMode = PIXI.blendModes.NORMAL,
    this.context.globalCompositeOperation = PIXI.blendModesCanvas[PIXI.blendModes.NORMAL],
    this.renderDisplayObject(t),
    t.interactive && (t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this)))
},
PIXI.CanvasRenderer.prototype.destroy = function(t) {
    "undefined" == typeof t && (t = !0),
    t && this.view.parent && this.view.parent.removeChild(this.view),
    this.view = null,
    this.context = null,
    this.maskManager = null,
    this.renderSession = null
},
PIXI.CanvasRenderer.prototype.resize = function(t, e) {
    this.width = t,
    this.height = e,
    this.view.width = this.width,
    this.view.height = this.height
},
PIXI.CanvasRenderer.prototype.renderDisplayObject = function(t, e) {
    this.renderSession.context = e || this.context,
    t._renderCanvas(this.renderSession)
},
PIXI.CanvasRenderer.prototype.mapBlendModes = function() {
    PIXI.blendModesCanvas || (PIXI.blendModesCanvas = [], PIXI.canUseNewCanvasBlendModes() ? (PIXI.blendModesCanvas[PIXI.blendModes.NORMAL] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.ADD] = "lighter", PIXI.blendModesCanvas[PIXI.blendModes.MULTIPLY] = "multiply", PIXI.blendModesCanvas[PIXI.blendModes.SCREEN] = "screen", PIXI.blendModesCanvas[PIXI.blendModes.OVERLAY] = "overlay", PIXI.blendModesCanvas[PIXI.blendModes.DARKEN] = "darken", PIXI.blendModesCanvas[PIXI.blendModes.LIGHTEN] = "lighten", PIXI.blendModesCanvas[PIXI.blendModes.COLOR_DODGE] = "color-dodge", PIXI.blendModesCanvas[PIXI.blendModes.COLOR_BURN] = "color-burn", PIXI.blendModesCanvas[PIXI.blendModes.HARD_LIGHT] = "hard-light", PIXI.blendModesCanvas[PIXI.blendModes.SOFT_LIGHT] = "soft-light", PIXI.blendModesCanvas[PIXI.blendModes.DIFFERENCE] = "difference", PIXI.blendModesCanvas[PIXI.blendModes.EXCLUSION] = "exclusion", PIXI.blendModesCanvas[PIXI.blendModes.HUE] = "hue", PIXI.blendModesCanvas[PIXI.blendModes.SATURATION] = "saturation", PIXI.blendModesCanvas[PIXI.blendModes.COLOR] = "color", PIXI.blendModesCanvas[PIXI.blendModes.LUMINOSITY] = "luminosity") : (PIXI.blendModesCanvas[PIXI.blendModes.NORMAL] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.ADD] = "lighter", PIXI.blendModesCanvas[PIXI.blendModes.MULTIPLY] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.SCREEN] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.OVERLAY] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.DARKEN] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.LIGHTEN] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.COLOR_DODGE] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.COLOR_BURN] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.HARD_LIGHT] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.SOFT_LIGHT] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.DIFFERENCE] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.EXCLUSION] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.HUE] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.SATURATION] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.COLOR] = "source-over", PIXI.blendModesCanvas[PIXI.blendModes.LUMINOSITY] = "source-over"))
},
PIXI.CanvasGraphics = function() {},
PIXI.CanvasGraphics.renderGraphics = function(t, e) {
    var i = t.worldAlpha;
    t.dirty && (this.updateGraphicsTint(t), t.dirty = !1);
    for (var r = 0; r < t.graphicsData.length; r++) {
        var n = t.graphicsData[r],
        o = n.shape,
        a = n._fillTint,
        s = n._lineTint;
        if (e.lineWidth = n.lineWidth, n.type === PIXI.Graphics.POLY) {
            e.beginPath();
            var h = o.points;
            e.moveTo(h[0], h[1]);
            for (var l = 1; l < h.length / 2; l++) e.lineTo(h[2 * l], h[2 * l + 1]);
            o.closed && e.lineTo(h[0], h[1]),
            h[0] === h[h.length - 2] && h[1] === h[h.length - 1] && e.closePath(),
            n.fill && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr( - 6), e.fill()),
            n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | s).toString(16)).substr( - 6), e.stroke())
        } else if (n.type === PIXI.Graphics.RECT)(n.fillColor || 0 === n.fillColor) && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr( - 6), e.fillRect(o.x, o.y, o.width, o.height)),
        n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | s).toString(16)).substr( - 6), e.strokeRect(o.x, o.y, o.width, o.height));
        else if (n.type === PIXI.Graphics.CIRC) e.beginPath(),
        e.arc(o.x, o.y, o.radius, 0, 2 * Math.PI),
        e.closePath(),
        n.fill && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr( - 6), e.fill()),
        n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | s).toString(16)).substr( - 6), e.stroke());
        else if (n.type === PIXI.Graphics.ELIP) {
            var c = 2 * o.width,
            d = 2 * o.height,
            u = o.x - c / 2,
            p = o.y - d / 2;
            e.beginPath();
            var f = .5522848,
            I = c / 2 * f,
            g = d / 2 * f,
            v = u + c,
            w = p + d,
            m = u + c / 2,
            y = p + d / 2;
            e.moveTo(u, y),
            e.bezierCurveTo(u, y - g, m - I, p, m, p),
            e.bezierCurveTo(m + I, p, v, y - g, v, y),
            e.bezierCurveTo(v, y + g, m + I, w, m, w),
            e.bezierCurveTo(m - I, w, u, y + g, u, y),
            e.closePath(),
            n.fill && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr( - 6), e.fill()),
            n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | s).toString(16)).substr( - 6), e.stroke())
        } else if (n.type === PIXI.Graphics.RREC) {
            var P = o.x,
            b = o.y,
            x = o.width,
            T = o.height,
            S = o.radius,
            X = Math.min(x, T) / 2 | 0;
            S = S > X ? X: S,
            e.beginPath(),
            e.moveTo(P, b + S),
            e.lineTo(P, b + T - S),
            e.quadraticCurveTo(P, b + T, P + S, b + T),
            e.lineTo(P + x - S, b + T),
            e.quadraticCurveTo(P + x, b + T, P + x, b + T - S),
            e.lineTo(P + x, b + S),
            e.quadraticCurveTo(P + x, b, P + x - S, b),
            e.lineTo(P + S, b),
            e.quadraticCurveTo(P, b, P, b + S),
            e.closePath(),
            (n.fillColor || 0 === n.fillColor) && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr( - 6), e.fill()),
            n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | s).toString(16)).substr( - 6), e.stroke())
        }
    }
},
PIXI.CanvasGraphics.renderGraphicsMask = function(t, e) {
    var i = t.graphicsData.length;
    if (0 !== i) {
        i > 1 && (i = 1, window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));
        for (var r = 0; 1 > r; r++) {
            var n = t.graphicsData[r],
            o = n.shape;
            if (n.type === PIXI.Graphics.POLY) {
                e.beginPath();
                var a = o.points;
                e.moveTo(a[0], a[1]);
                for (var s = 1; s < a.length / 2; s++) e.lineTo(a[2 * s], a[2 * s + 1]);
                a[0] === a[a.length - 2] && a[1] === a[a.length - 1] && e.closePath()
            } else if (n.type === PIXI.Graphics.RECT) e.beginPath(),
            e.rect(o.x, o.y, o.width, o.height),
            e.closePath();
            else if (n.type === PIXI.Graphics.CIRC) e.beginPath(),
            e.arc(o.x, o.y, o.radius, 0, 2 * Math.PI),
            e.closePath();
            else if (n.type === PIXI.Graphics.ELIP) {
                var h = 2 * o.width,
                l = 2 * o.height,
                c = o.x - h / 2,
                d = o.y - l / 2;
                e.beginPath();
                var u = .5522848,
                p = h / 2 * u,
                f = l / 2 * u,
                I = c + h,
                g = d + l,
                v = c + h / 2,
                w = d + l / 2;
                e.moveTo(c, w),
                e.bezierCurveTo(c, w - f, v - p, d, v, d),
                e.bezierCurveTo(v + p, d, I, w - f, I, w),
                e.bezierCurveTo(I, w + f, v + p, g, v, g),
                e.bezierCurveTo(v - p, g, c, w + f, c, w),
                e.closePath()
            } else if (n.type === PIXI.Graphics.RREC) {
                var m = o.points,
                y = m[0],
                P = m[1],
                b = m[2],
                x = m[3],
                T = m[4],
                S = Math.min(b, x) / 2 | 0;
                T = T > S ? S: T,
                e.beginPath(),
                e.moveTo(y, P + T),
                e.lineTo(y, P + x - T),
                e.quadraticCurveTo(y, P + x, y + T, P + x),
                e.lineTo(y + b - T, P + x),
                e.quadraticCurveTo(y + b, P + x, y + b, P + x - T),
                e.lineTo(y + b, P + T),
                e.quadraticCurveTo(y + b, P, y + b - T, P),
                e.lineTo(y + T, P),
                e.quadraticCurveTo(y, P, y, P + T),
                e.closePath()
            }
        }
    }
},
PIXI.CanvasGraphics.updateGraphicsTint = function(t) {
    if (16777215 !== t.tint) for (var e = (t.tint >> 16 & 255) / 255, i = (t.tint >> 8 & 255) / 255, r = (255 & t.tint) / 255, n = 0; n < t.graphicsData.length; n++) {
        var o = t.graphicsData[n],
        a = 0 | o.fillColor,
        s = 0 | o.lineColor;
        o._fillTint = ((a >> 16 & 255) / 255 * e * 255 << 16) + ((a >> 8 & 255) / 255 * i * 255 << 8) + (255 & a) / 255 * r * 255,
        o._lineTint = ((s >> 16 & 255) / 255 * e * 255 << 16) + ((s >> 8 & 255) / 255 * i * 255 << 8) + (255 & s) / 255 * r * 255
    }
},
PIXI.Graphics = function() {
    PIXI.DisplayObjectContainer.call(this),
    this.renderable = !0,
    this.fillAlpha = 1,
    this.lineWidth = 0,
    this.lineColor = 0,
    this.graphicsData = [],
    this.tint = 16777215,
    this.ondTint = 16777215,
    this.blendMode = PIXI.blendModes.NORMAL,
    this.currentPath = null,
    this._webGL = [],
    this.isMask = !1,
    this.boundsPadding = 0,
    this._localBounds = new PIXI.Rectangle(0, 0, 1, 1),
    this.dirty = !0,
    this.webGLDirty = !1,
    this.cachedSpriteDirty = !1
},
PIXI.Graphics.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
PIXI.Graphics.prototype.constructor = PIXI.Graphics,
PIXI.Graphics.prototype.lineStyle = function(t, e, i) {
    if (this.lineWidth = t || 0, this.lineColor = e || 0, this.lineAlpha = arguments.length < 3 ? 1 : i, this.currentPath) {
        if (this.currentPath.shape.points.length) return this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice( - 2))),
        this;
        this.currentPath.lineWidth = this.lineWidth,
        this.currentPath.lineColor = this.lineColor,
        this.currentPath.lineAlpha = this.lineAlpha
    }
    return this
},
PIXI.Graphics.prototype.moveTo = function(t, e) {
    return this.drawShape(new PIXI.Polygon([t, e])),
    this
},
PIXI.Graphics.prototype.lineTo = function(t, e) {
    return this.currentPath.shape.points.push(t, e),
    this.dirty = !0,
    this
},
PIXI.Graphics.prototype.quadraticCurveTo = function(t, e, i, r) {
    this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
    var n, o, a = 20,
    s = this.currentPath.shape.points;
    0 === s.length && this.moveTo(0, 0);
    for (var h = s[s.length - 2], l = s[s.length - 1], c = 0, d = 1; a >= d; d++) c = d / a,
    n = h + (t - h) * c,
    o = l + (e - l) * c,
    s.push(n + (t + (i - t) * c - n) * c, o + (e + (r - e) * c - o) * c);
    return this.dirty = !0,
    this
},
PIXI.Graphics.prototype.bezierCurveTo = function(t, e, i, r, n, o) {
    this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
    for (var a, s, h, l, c, d = 20,
    u = this.currentPath.shape.points,
    p = u[u.length - 2], f = u[u.length - 1], I = 0, g = 1; d >= g; g++) I = g / d,
    a = 1 - I,
    s = a * a,
    h = s * a,
    l = I * I,
    c = l * I,
    u.push(h * p + 3 * s * I * t + 3 * a * l * i + c * n, h * f + 3 * s * I * e + 3 * a * l * r + c * o);
    return this.dirty = !0,
    this
},
PIXI.Graphics.prototype.arcTo = function(t, e, i, r, n) {
    this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(t, e) : this.moveTo(t, e);
    var o = this.currentPath.shape.points,
    a = o[o.length - 2],
    s = o[o.length - 1],
    h = s - e,
    l = a - t,
    c = r - e,
    d = i - t,
    u = Math.abs(h * d - l * c);
    if (1e-8 > u || 0 === n)(o[o.length - 2] !== t || o[o.length - 1] !== e) && o.push(t, e);
    else {
        var p = h * h + l * l,
        f = c * c + d * d,
        I = h * c + l * d,
        g = n * Math.sqrt(p) / u,
        v = n * Math.sqrt(f) / u,
        w = g * I / p,
        m = v * I / f,
        y = g * d + v * l,
        P = g * c + v * h,
        b = l * (v + w),
        x = h * (v + w),
        T = d * (g + m),
        S = c * (g + m),
        X = Math.atan2(x - P, b - y),
        C = Math.atan2(S - P, T - y);
        this.arc(y + t, P + e, n, X, C, l * c > d * h)
    }
    return this.dirty = !0,
    this
},
PIXI.Graphics.prototype.arc = function(t, e, i, r, n, o) {
    var a, s = t + Math.cos(r) * i,
    h = e + Math.sin(r) * i;
    if (this.currentPath ? (a = this.currentPath.shape.points, 0 === a.length ? a.push(s, h) : (a[a.length - 2] !== s || a[a.length - 1] !== h) && a.push(s, h)) : (this.moveTo(s, h), a = this.currentPath.shape.points), r === n) return this; ! o && r >= n ? n += 2 * Math.PI: o && n >= r && (r += 2 * Math.PI);
    var l = o ? -1 * (r - n) : n - r,
    c = Math.abs(l) / (2 * Math.PI) * 40;
    if (0 === l) return this;
    for (var d = l / (2 * c), u = 2 * d, p = Math.cos(d), f = Math.sin(d), I = c - 1, g = I % 1 / I, v = 0; I >= v; v++) {
        var w = v + g * v,
        m = d + r + u * w,
        y = Math.cos(m),
        P = -Math.sin(m);
        a.push((p * y + f * P) * i + t, (p * -P + f * y) * i + e)
    }
    return this.dirty = !0,
    this
},
PIXI.Graphics.prototype.beginFill = function(t, e) {
    return this.filling = !0,
    this.fillColor = t || 0,
    this.fillAlpha = void 0 === e ? 1 : e,
    this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha),
    this
},
PIXI.Graphics.prototype.endFill = function() {
    return this.filling = !1,
    this.fillColor = null,
    this.fillAlpha = 1,
    this
},
PIXI.Graphics.prototype.drawRect = function(t, e, i, r) {
    return this.drawShape(new PIXI.Rectangle(t, e, i, r)),
    this
},
PIXI.Graphics.prototype.drawRoundedRect = function(t, e, i, r, n) {
    return this.drawShape(new PIXI.RoundedRectangle(t, e, i, r, n)),
    this
},
PIXI.Graphics.prototype.drawCircle = function(t, e, i) {
    return this.drawShape(new PIXI.Circle(t, e, i)),
    this
},
PIXI.Graphics.prototype.drawEllipse = function(t, e, i, r) {
    return this.drawShape(new PIXI.Ellipse(t, e, i, r)),
    this
},
PIXI.Graphics.prototype.drawPolygon = function(t) {
    return t instanceof Array || (t = Array.prototype.slice.call(arguments)),
    this.drawShape(new PIXI.Polygon(t)),
    this
},
PIXI.Graphics.prototype.clear = function() {
    return this.lineWidth = 0,
    this.filling = !1,
    this.dirty = !0,
    this.clearDirty = !0,
    this.graphicsData = [],
    this
},
PIXI.Graphics.prototype._renderWebGL = function(t) {
    if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
        if (t.spriteBatch.stop(), t.blendModeManager.setBlendMode(this.blendMode), this._mask && t.maskManager.pushMask(this._mask, t), this._filters && t.filterManager.pushFilter(this._filterBlock), this.blendMode !== t.spriteBatch.currentBlendMode) {
            t.spriteBatch.currentBlendMode = this.blendMode;
            var e = PIXI.blendModesWebGL[t.spriteBatch.currentBlendMode];
            t.spriteBatch.gl.blendFunc(e[0], e[1])
        }
        if (this.webGLDirty && (this.dirty = !0, this.webGLDirty = !1), PIXI.WebGLGraphics.renderGraphics(this, t), this.children.length) {
            t.spriteBatch.start();
            for (var i = 0,
            r = this.children.length; r > i; i++) this.children[i]._renderWebGL(t);
            t.spriteBatch.stop()
        }
        this._filters && t.filterManager.popFilter(),
        this._mask && t.maskManager.popMask(this.mask, t),
        t.drawCount++,
        t.spriteBatch.start()
    }
},
PIXI.Graphics.prototype._renderCanvas = function(t) {
    if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
        var e = t.context,
        i = this.worldTransform;
        this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, e.globalCompositeOperation = PIXI.blendModesCanvas[t.currentBlendMode]),
        this._mask && t.maskManager.pushMask(this._mask, t),
        e.setTransform(i.a, i.b, i.c, i.d, i.tx, i.ty),
        this.tint != this.oldTint && (this.dirty = !0, this.oldTint = this.tint),
        PIXI.CanvasGraphics.renderGraphics(this, e);
        for (var r = 0,
        n = this.children.length; n > r; r++) this.children[r]._renderCanvas(t);
        this._mask && t.maskManager.popMask(t)
    }
},
PIXI.Graphics.prototype.getBounds = function(t) {
    if (this.isMask) return PIXI.EmptyRectangle;
    this.dirty && (this.updateLocalBounds(), this.webGLDirty = !0, this.cachedSpriteDirty = !0, this.dirty = !1);
    var e = this._localBounds,
    i = e.x,
    r = e.width + e.x,
    n = e.y,
    o = e.height + e.y,
    a = t || this.worldTransform,
    s = a.a,
    h = a.b,
    l = a.c,
    c = a.d,
    d = a.tx,
    u = a.ty,
    p = s * r + l * o + d,
    f = c * o + h * r + u,
    I = s * i + l * o + d,
    g = c * o + h * i + u,
    v = s * i + l * n + d,
    w = c * n + h * i + u,
    m = s * r + l * n + d,
    y = c * n + h * r + u,
    P = p,
    b = f,
    x = p,
    T = f;
    return x = x > I ? I: x,
    x = x > v ? v: x,
    x = x > m ? m: x,
    T = T > g ? g: T,
    T = T > w ? w: T,
    T = T > y ? y: T,
    P = I > P ? I: P,
    P = v > P ? v: P,
    P = m > P ? m: P,
    b = g > b ? g: b,
    b = w > b ? w: b,
    b = y > b ? y: b,
    this._bounds.x = x,
    this._bounds.width = P - x,
    this._bounds.y = T,
    this._bounds.height = b - T,
    this._bounds
},
PIXI.Graphics.prototype.updateLocalBounds = function() {
    var t = 1 / 0,
    e = -(1 / 0),
    i = 1 / 0,
    r = -(1 / 0);
    if (this.graphicsData.length) for (var n, o, a, s, h, l, c = 0; c < this.graphicsData.length; c++) {
        var d = this.graphicsData[c],
        u = d.type,
        p = d.lineWidth;
        if (n = d.shape, u === PIXI.Graphics.RECT || u === PIXI.Graphics.RREC) a = n.x - p / 2,
        s = n.y - p / 2,
        h = n.width + p,
        l = n.height + p,
        t = t > a ? a: t,
        e = a + h > e ? a + h: e,
        i = i > s ? s: i,
        r = s + l > r ? s + l: r;
        else if (u === PIXI.Graphics.CIRC) a = n.x,
        s = n.y,
        h = n.radius + p / 2,
        l = n.radius + p / 2,
        t = t > a - h ? a - h: t,
        e = a + h > e ? a + h: e,
        i = i > s - l ? s - l: i,
        r = s + l > r ? s + l: r;
        else if (u === PIXI.Graphics.ELIP) a = n.x,
        s = n.y,
        h = n.width + p / 2,
        l = n.height + p / 2,
        t = t > a - h ? a - h: t,
        e = a + h > e ? a + h: e,
        i = i > s - l ? s - l: i,
        r = s + l > r ? s + l: r;
        else {
            o = n.points;
            for (var f = 0; f < o.length; f += 2) a = o[f],
            s = o[f + 1],
            t = t > a - p ? a - p: t,
            e = a + p > e ? a + p: e,
            i = i > s - p ? s - p: i,
            r = s + p > r ? s + p: r
        }
    } else t = 0,
    e = 0,
    i = 0,
    r = 0;
    var I = this.boundsPadding;
    this._localBounds.x = t - I,
    this._localBounds.width = e - t + 2 * I,
    this._localBounds.y = i - I,
    this._localBounds.height = r - i + 2 * I
},
PIXI.Graphics.prototype.drawShape = function(t) {
    this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(),
    this.currentPath = null;
    var e = new PIXI.GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, t);
    return this.graphicsData.push(e),
    e.type === PIXI.Graphics.POLY && (e.shape.closed = this.filling, this.currentPath = e),
    this.dirty = !0,
    e
},
PIXI.GraphicsData = function(t, e, i, r, n, o, a) {
    this.lineWidth = t,
    this.lineColor = e,
    this.lineAlpha = i,
    this._lineTint = e,
    this.fillColor = r,
    this.fillAlpha = n,
    this._fillTint = r,
    this.fill = o,
    this.shape = a,
    this.type = a.type
},
PIXI.Graphics.POLY = 0,
PIXI.Graphics.RECT = 1,
PIXI.Graphics.CIRC = 2,
PIXI.Graphics.ELIP = 3,
PIXI.Graphics.RREC = 4,
PIXI.Polygon.prototype.type = PIXI.Graphics.POLY,
PIXI.Rectangle.prototype.type = PIXI.Graphics.RECT,
PIXI.Circle.prototype.type = PIXI.Graphics.CIRC,
PIXI.Ellipse.prototype.type = PIXI.Graphics.ELIP,
PIXI.RoundedRectangle.prototype.type = PIXI.Graphics.RREC,
PIXI.BaseTextureCache = {},
PIXI.BaseTextureCacheIdGenerator = 0,
PIXI.BaseTexture = function(t, e) {
    if (this.width = 100, this.height = 100, this.scaleMode = e || PIXI.scaleModes.DEFAULT, this.hasLoaded = !1, this.source = t, this._UID = PIXI._UID++, this.premultipliedAlpha = !0, this._glTextures = [], this._dirty = [!0, !0, !0, !0], t) {
        if ((this.source.complete || this.source.getContext) && this.source.width && this.source.height) this.hasLoaded = !0,
        this.width = this.source.naturalWidth || this.source.width,
        this.height = this.source.naturalHeight || this.source.height,
        this.dirty();
        else {
            var i = this;
            this.source.onload = function() {
                i.hasLoaded = !0,
                i.width = i.source.naturalWidth || i.source.width,
                i.height = i.source.naturalHeight || i.source.height,
                i.dirty(),
                window.dirty = !0,
                i.dispatchEvent({
                    type: "loaded",
                    content: i
                })
            },
            this.source.onerror = function() {
                i.dispatchEvent({
                    type: "error",
                    content: i
                })
            }
        }
        this.imageUrl = null
    }
},
PIXI.BaseTexture.prototype.constructor = PIXI.BaseTexture,
PIXI.EventTarget.mixin(PIXI.BaseTexture.prototype),
PIXI.BaseTexture.prototype.destroy = function() {
    this.imageUrl ? (delete PIXI.BaseTextureCache[this.imageUrl], delete PIXI.TextureCache[this.imageUrl], this.imageUrl = null, this.source.src = "") : this.source && this.source._pixiId && delete PIXI.BaseTextureCache[this.source._pixiId],
    this.source = null,
    this.unloadFromGPU()
},
PIXI.BaseTexture.prototype.dirty = function() {
    for (var t = 0; t < this._glTextures.length; t++) this._dirty[t] = !0
},
PIXI.BaseTexture.prototype.unloadFromGPU = function() {
    this.dirty();
    for (var t = this._glTextures.length - 1; t >= 0; t--) {
        var e = this._glTextures[t],
        i = PIXI.glContexts[t];
        i && e && i.deleteTexture(e)
    }
    this._glTextures.length = 0,
    this.dirty()
},
PIXI.BaseTexture.fromImage = function(t, e, i) {
    var r = PIXI.BaseTextureCache[t];
    if (void 0 === e && -1 === t.indexOf("data:") && (e = !0), !r) {
        var n = new Image;
        e && (n.crossOrigin = ""),
        n.src = t,
        r = new PIXI.BaseTexture(n, i),
        r.imageUrl = t,
        PIXI.BaseTextureCache[t] = r
    }
    return r
},
PIXI.BaseTexture.fromCanvas = function(t, e) {
    t._pixiId || (t._pixiId = "canvas_" + PIXI.TextureCacheIdGenerator++);
    var i = PIXI.BaseTextureCache[t._pixiId];
    return i || (i = new PIXI.BaseTexture(t, e), PIXI.BaseTextureCache[t._pixiId] = i),
    i
},
PIXI.TextureCache = {},
PIXI.FrameCache = {},
PIXI.TextureCacheIdGenerator = 0,
PIXI.Texture = function(t, e, i, r) {
    this.noFrame = !1,
    e || (this.noFrame = !0, e = new PIXI.Rectangle(0, 0, 1, 1)),
    t instanceof PIXI.Texture && (t = t.baseTexture),
    this.baseTexture = t,
    this.frame = e,
    this.trim = r,
    this.valid = !1,
    this.requiresUpdate = !1,
    this._uvs = null,
    this.width = 0,
    this.height = 0,
    this.crop = i || new PIXI.Rectangle(0, 0, 1, 1),
    t.hasLoaded ? (this.noFrame && (e = new PIXI.Rectangle(0, 0, t.width, t.height)), this.setFrame(e)) : t.addEventListener("loaded", this.onBaseTextureLoaded.bind(this))
},
PIXI.Texture.prototype.constructor = PIXI.Texture,
PIXI.EventTarget.mixin(PIXI.Texture.prototype),
PIXI.Texture.prototype.onBaseTextureLoaded = function() {
    var t = this.baseTexture;
    t.removeEventListener("loaded", this.onLoaded),
    this.noFrame && (this.frame = new PIXI.Rectangle(0, 0, t.width, t.height)),
    this.setFrame(this.frame),
    this.dispatchEvent({
        type: "update",
        content: this
    })
},
PIXI.Texture.prototype.destroy = function(t) {
    t && this.baseTexture.destroy(),
    this.valid = !1
},
PIXI.Texture.prototype.setFrame = function(t) {
    if (this.noFrame = !1, this.frame = t, this.width = t.width, this.height = t.height, this.crop.x = t.x, this.crop.y = t.y, this.crop.width = t.width, this.crop.height = t.height, !this.trim && (t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height)) throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
    this.valid = t && t.width && t.height && this.baseTexture.source && this.baseTexture.hasLoaded,
    this.trim && (this.width = this.trim.width, this.height = this.trim.height, this.frame.width = this.trim.width, this.frame.height = this.trim.height),
    this.valid && this._updateUvs()
},
PIXI.Texture.prototype._updateUvs = function() {
    this._uvs || (this._uvs = new PIXI.TextureUvs);
    var t = this.crop,
    e = this.baseTexture.width,
    i = this.baseTexture.height;
    this._uvs.x0 = t.x / e,
    this._uvs.y0 = t.y / i,
    this._uvs.x1 = (t.x + t.width) / e,
    this._uvs.y1 = t.y / i,
    this._uvs.x2 = (t.x + t.width) / e,
    this._uvs.y2 = (t.y + t.height) / i,
    this._uvs.x3 = t.x / e,
    this._uvs.y3 = (t.y + t.height) / i
},
PIXI.Texture.fromImage = function(t, e, i) {
    var r = PIXI.TextureCache[t];
    return r || (r = new PIXI.Texture(PIXI.BaseTexture.fromImage(t, e, i)), PIXI.TextureCache[t] = r),
    r
},
PIXI.Texture.fromFrame = function(t) {
    var e = PIXI.TextureCache[t];
    if (!e) throw new Error('The frameId "' + t + '" does not exist in the texture cache ');
    return e
},
PIXI.Texture.fromCanvas = function(t, e) {
    var i = PIXI.BaseTexture.fromCanvas(t, e);
    return new PIXI.Texture(i)
},
PIXI.Texture.addTextureToCache = function(t, e) {
    PIXI.TextureCache[e] = t
},
PIXI.Texture.removeTextureFromCache = function(t) {
    var e = PIXI.TextureCache[t];
    return delete PIXI.TextureCache[t],
    delete PIXI.BaseTextureCache[t],
    e
},
PIXI.TextureUvs = function() {
    this.x0 = 0,
    this.y0 = 0,
    this.x1 = 0,
    this.y1 = 0,
    this.x2 = 0,
    this.y2 = 0,
    this.x3 = 0,
    this.y3 = 0
},
PIXI.Texture.emptyTexture = new PIXI.Texture(new PIXI.BaseTexture),
PIXI.RenderTexture = function(t, e, i, r) {
    if (this.width = t || 100, this.height = e || 100, this.frame = new PIXI.Rectangle(0, 0, this.width, this.height), this.crop = new PIXI.Rectangle(0, 0, this.width, this.height), this.baseTexture = new PIXI.BaseTexture, this.baseTexture.width = this.width, this.baseTexture.height = this.height, this.baseTexture._glTextures = [], this.baseTexture.scaleMode = r || PIXI.scaleModes.DEFAULT, this.baseTexture.hasLoaded = !0, PIXI.Texture.call(this, this.baseTexture, new PIXI.Rectangle(0, 0, this.width, this.height)), this.renderer = i || PIXI.defaultRenderer, this.renderer.type === PIXI.WEBGL_RENDERER) {
        var n = this.renderer.gl;
        this.baseTexture._dirty[n.id] = !1,
        this.textureBuffer = new PIXI.FilterTexture(n, this.width, this.height, this.baseTexture.scaleMode),
        this.baseTexture._glTextures[n.id] = this.textureBuffer.texture,
        this.render = this.renderWebGL,
        this.projection = new PIXI.Point(.5 * this.width, .5 * -this.height)
    } else this.render = this.renderCanvas,
    this.textureBuffer = new PIXI.CanvasBuffer(this.width, this.height),
    this.baseTexture.source = this.textureBuffer.canvas;
    this.valid = !0,
    this._updateUvs()
},
PIXI.RenderTexture.prototype = Object.create(PIXI.Texture.prototype),
PIXI.RenderTexture.prototype.constructor = PIXI.RenderTexture,
PIXI.RenderTexture.prototype.resize = function(t, e, i) { (t !== this.width || e !== this.height) && (this.valid = t > 0 && e > 0, this.width = this.frame.width = this.crop.width = t, this.height = this.frame.height = this.crop.height = e, i && (this.baseTexture.width = this.width, this.baseTexture.height = this.height), this.renderer.type === PIXI.WEBGL_RENDERER && (this.projection.x = this.width / 2, this.projection.y = -this.height / 2), this.valid && this.textureBuffer.resize(this.width, this.height))
},
PIXI.RenderTexture.prototype.clear = function() {
    this.valid && (this.renderer.type === PIXI.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear())
},
PIXI.RenderTexture.prototype.renderWebGL = function(t, e, i) {
    if (this.valid) {
        var r = t.worldTransform;
        r.identity(),
        r.translate(0, 2 * this.projection.y),
        e && r.append(e),
        r.scale(1, -1),
        t.worldAlpha = 1;
        for (var n = t.children,
        o = 0,
        a = n.length; a > o; o++) n[o].updateTransform();
        var s = this.renderer.gl;
        s.viewport(0, 0, this.width, this.height),
        s.bindFramebuffer(s.FRAMEBUFFER, this.textureBuffer.frameBuffer),
        i && this.textureBuffer.clear(),
        this.renderer.spriteBatch.dirty = !0,
        this.renderer.renderDisplayObject(t, this.projection, this.textureBuffer.frameBuffer),
        this.renderer.spriteBatch.dirty = !0
    }
},
PIXI.RenderTexture.prototype.renderCanvas = function(t, e, i) {
    if (this.valid) {
        var r = t.worldTransform;
        r.identity(),
        e && r.append(e),
        t.worldAlpha = 1;
        for (var n = t.children,
        o = 0,
        a = n.length; a > o; o++) n[o].updateTransform();
        i && this.textureBuffer.clear();
        var s = this.textureBuffer.context;
        this.renderer.renderDisplayObject(t, s)
    }
},
PIXI.AbstractFilter = function(t, e) {
    this.passes = [this],
    this.shaders = [],
    this.dirty = !0,
    this.padding = 0,
    this.uniforms = e || {},
    this.fragmentSrc = t || []
},
PIXI.AbstractFilter.prototype.constructor = PIXI.AbstractFilter,
PIXI.AbstractFilter.prototype.syncUniforms = function() {
    for (var t = 0,
    e = this.shaders.length; e > t; t++) this.shaders[t].dirty = !0
},
window.isAndroid = /(android)/i.test(navigator.userAgent) && !/(Windows)/i.test(navigator.userAgent),
window.isiOS = /(ipod|iphone|ipad)/i.test(navigator.userAgent),
window.isFirefoxMobile = /(Mobile)/i.test(navigator.userAgent) && /(Firefox)/i.test(navigator.userAgent),
window.isWindowsMobile = /(IEMobile)/i.test(navigator.userAgent),
window.isSilk = /(silk)/i.test(navigator.userAgent),
window.isClay = /(clay\.io)/i.test(document.location),
window.isFacebookApp = /(fb_canvas)/i.test(document.location),
window.isFacebookAppWeb = /(fb_canvas_web)/i.test(document.location),
window.isIframed = window.top !== window.self,
window.isStandalone = "standalone" in window.navigator && window.navigator.standalone,
window.isMobileiOSDevice = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i),
window.isKongregate = /(kongregateiframe)/i.test(document.location),
window.httpPrefix = 0 == window.location.protocol.indexOf("http") ? "//": "https://",
window.isKik = /(kik_canvas)/i.test(document.location),
window.isStickRun = /(stickrun)/i.test(document.location),
window.isTwitter = /(twitter)/gi.test(navigator.userAgent),
window.isChrome = /Chrome\//.test(navigator.userAgent),
window.isMobile = window.isAndroid || window.isWindowsMobile || window.isiOS || window.isSilk || window.isFirefoxMobile,
window.isWildTangent = !1,
window.isiOSWrapper = window.isiOSWrapper || !1,
window.isAndroidWrapper = window.isAndroidWrapper || !1,
window.isChromeWrapper = window.isChromeWrapper || !1,
window.isAppWrapper = window.isiOSWrapper || window.isAndroidWrapper || window.isChromeWrapper;
var canvas = document.getElementById("gameCanvas"),
stageContainer = new PIXI.Stage(2105376),
renderer = PIXI.autoDetectRenderer(width, height, {
    view: canvas,
    antialiasing: !1,
    transparent: !1,
    clearBeforeRender: !0
}),
ratio = Math.min(window.devicePixelRatio || 1, 2);
window.isiOS ? ratio = Math.min(window.devicePixelRatio || 1, 3) : renderer.type == PIXI.CANVAS_RENDERER && (ratio = 1),
window.marginBottom = 0,
window.marginTop = (window.isiOSWrapper || window.isStandalone) && window.isiOS ? 20 : 0,
window.ga || (window.ga = function() {}),
window.vpath = window.vpath || "./",
window.onParseLoginSuccess = function(t) {},
window.showGameOverAd = function() {},
window.hideGameOverAd = function() {},
window.showInterstitialAd = function() {},
window.resizeAd = function() {},
window.showRateGame = function() {},
window.submitHighscore = function(t) {},
window.submitLowscore = function(t) {},
window.configLoadCallback = function() {},
window.insertRemoveAdsButton = function() {},
window.removeAdsButton = function() {},
window.resizeCallbacks = [],
window.onresize = function(t) {
    for (var e = 0; e < resizeCallbacks.length; e++) resizeCallbacks[e](t)
},
window.removeResizeCallback = function(t) {
    for (var e = 0; e < resizeCallbacks.length; e++) if (resizeCallbacks[e] == t) return void resizeCallbacks.splice(e, 1)
},
window.overlayToggleCallbacks = [],
window.toggleOverlay = function(t) {
    for (var e = 0; e < overlayToggleCallbacks.length; e++) overlayToggleCallbacks[e](t)
},
Math.seed = function(t) {
    var e = t,
    i = 22984849,
    r = 4294967295;
    return function() {
        i = 36969 * (65535 & i) + (i >> 16) & r,
        e = 18e3 * (65535 & e) + (e >> 16) & r;
        var t = (i << 16) + e & r;
        return t /= 4294967296,
        t + .5
    }
};
var SoundPlayer;
window.Host && window.Host.Sound ? (Host.Log("Using SoundPlayer!"), SoundPlayer = function(t) {
    function e(t, e) {
        return r[t] = new i(t, e)
    }
    function i(e, i) {
        var r = this;
        r.playing = !1;
        var o = i;
        this.resetGain = function() {
            this.setGain(i)
        },
        this.setGain = function(t) {
            o = t,
            Host.Sound.SetVolume(e, t)
        },
        this.play = function(i, a) {
            function s() {
                Host.Sound.Play(e, e, a, o, t)
            }
            n.muted || t && r.playing || (r.playing = !0, i ? setTimeout(s, 1e3 * i) : s())
        },
        this.stop = function(t) {
            r.playing = !1,
            Host.Sound.Stop(e)
        }
    }
    t = t ? !0 : !1;
    var r = [],
    n = this;
    this.muted = !1,
    this.setMuted = function(t) {
        n.muted = t
    },
    this.get = function(i, n) {
        return Host.Sound.Preload(i, i, t),
        r[i] || e(i, n)
    }
}) : SoundPlayer = function(t) {
    function e() {
        h = !0,
        s.length && s.shift().send()
    }
    function i(i, r) {
        function a(t, e) {
            if (!o.muted && c.loaded) {
                p = {
                    stop: function() {}
                };
                try {
                    c.playing = !0,
                    p = n.createBufferSource(),
                    p.buffer = l,
                    p.loop = e || !1,
                    c.resetGain(),
                    p.connect(d),
                    d.connect(n.destination),
                    p.start(n.currentTime + (t || 0))
                } catch(i) {}
                return p
            }
        }
        var l, c = this;
        c.targetGain = r,
        c.loaded = !1,
        c.playing = !1;
        var d = {
            gain: {
                value: 0
            }
        };
        if (n) {
            var u = new XMLHttpRequest;
            u.open("GET.html", vpath + i, !0),
            u.responseType = "arraybuffer",
            u.onload = function() {
                e(),
                n.decodeAudioData(u.response,
                function(t) {
                    l = t,
                    c.loaded = !0
                })
            },
            s.push(u),
            h || (e(), t || e()),
            d = n.createGain ? n.createGain() : {
                gain: {
                    value: 1
                }
            }
        }
        this.gain = d.gain,
        this.setGain = function(t) {
            this.gain.value = t
        },
        this.resetGain = function() {
            this.gain.value = r
        };
        var p = void 0;
        this.play = function(e, i) {
			return;
            if (c.loaded) {
                if (t) {
                    if (c.playing) return
                } else c.stop(0);
                a(e, i)
            }
        },
        this.stop = function(t) {
			return;
            if (p && c.playing) try {
                p.stop(t)
            } catch(e) {}
            c.playing = !1
        }
    }
    function r(t, e) {
        return a[t] = new i(t, e)
    }
    var n, o = this; (window.AudioContext || window.webkitAudioContext) && (SoundPlayer.context = n = SoundPlayer.context || new(window.AudioContext || window.webkitAudioContext));
    var a = [];
    this.muted = !1,
    this.setMuted = function(t) {
        o.muted = t
    },
    this.get = function(t, e) {
		return {play:function(){},stop:function(){},setGain:function(){},resetGain:function(){}};
        //return a[t] || r(t, e)
    };
    var s = [],
    h = !1;
    this.currentTrack = null
},
SoundPlayer.unblocked = !1,
window.Sound = new SoundPlayer,
window.Music = new SoundPlayer(!0),
window.backgroundMusic = null,
window.clickSound = null,
window.remoteConfig = {};
var Tween = function(t, e, i, r) {
    i = void 0 == i ? 1 : i;
    var n = {};
    this.offset = 0,
    this.method = r || Tween.easeout,
    this.length = 1e3 * i / (1e3 / 60),
    this.target = t,
    this.call = function(t) {
        return this.callback = t,
        this
    },
    this.wait = function(t) {
        return this.delay = 1e3 * (t || 0) / (1e3 / 60),
        this
    },
    this.tick = function() {
        if (this.delay > 0) return void this.delay--;
        this.target.dirty = !0;
        for (var t in n) {
            var e = n[t];
            this.target[t] = this.method(e.start, e.end, this.offset / this.length)
        }
        return this.offset++,
        this.offset > this.length ? !0 : void 0
    },
    this.complete = function() {
        for (var t in n) this.target[t] = n[t].end;
        if (this.callback) {
            var e = this;
            setTimeout(function() {
                e.callback.apply(e.target, null)
            },
            50)
        }
    };
    for (var o in e) n[o] = {
        start: t[o],
        end: e[o]
    };
    Tween.tweens.push(this)
};
Tween.tweens = [],
Tween.linary = function(t, e, i) {
    return t + (e - t) * i
},
Tween.easein = function(t, e, i) {
    var r = 1 - Math.sin(i * Math.PI / 2 + Math.PI / 2);
    return t + (e - t) * r
},
Tween.easeout = function(t, e, i) {
    var r = Math.sin(i * Math.PI / 2);
    return t + (e - t) * r
},
Tween.easeinout = function(t, e, i) {
    var r = (Math.sin(i * Math.PI + Math.PI / 2) + 1) / 2;
    return t + (e - t) * r
},
Tween.bounce = function(t, e, i) {
    var r = Math.sin(i * Math.PI);
    return t + (e - t) * r
},
Tween.tick = function() {
    for (var t = 0; t < Tween.tweens.length; t++) {
        var e = Tween.tweens[t];
        e.tick() && (window.dirtyOnce = !0, Tween.tweens.splice(t--, 1), e.complete())
    }
},
Tween.complete = function(t) {
    for (var e = 0; e < Tween.tweens.length; e++) {
        var i = Tween.tweens[e];
        i.target == t && (window.dirtyOnce = !0, Tween.tweens.splice(e--, 1), i.complete())
    }
},
Tween.clear = function(t) {
    for (var e = 0; e < Tween.tweens.length; e++) {
        var i = Tween.tweens[e];
        i.target == t && Tween.tweens.splice(e--, 1)
    }
};
var preloadCache = {};
window.embed = function(t) {
    if (t = vpath + t, void 0 === preloadCache[t]) throw "You can only use the embed method in conjuction with preload";
    return preloadCache[t]
},
PIXI.dontSayHello = !0;
var scaledCache = {};
PIXI.Texture.getScaled = function(t, e) {
    function i(t, e) {
        for (;.5 > e;) t = i(t, .5),
        e /= .5;
        var r = document.createElement("canvas"),
        n = Math.ceil(t.width * e),
        o = Math.ceil(t.height * e);
        return r.width = n + 2,
        r.height = o + 2,
        r.getContext("2d").drawImage(t, 0, 0, t.width, t.height, 1, 1, n, o),
        r.path = t.path,
        r
    }
    var r = t.path + ":" + e;
    return void 0 !== scaledCache[r] ? scaledCache[r] : (canvas = document.createElement("canvas"), canvas.width = t.width + 2, canvas.height = t.height + 2, canvas.getContext("2d").drawImage(t, 0, 0, t.width, t.height, 1, 1, t.width, t.height), scaledCache[r] = PIXI.Texture.fromCanvas(i(canvas, e)))
};
var Container = function() {
    PIXI.DisplayObjectContainer.call(this);
    var t = void 0;
    Object.defineProperty(this, "ratio", {
        get: function() {
            return t
        },
        set: function(e) {
            if (t !== e) {
                t = e,
                this.x = this.x,
                this.y = this.y;
                for (var i = 0; i < this.children.length; i++) this.children[i].ratio = t;
                this.setRatio(e)
            }
        }
    }),
    this.setRatio = function(t) {},
    this.inside = function(t, e, i) {
        return ! 1
    };
    var e = 0;
    Object.defineProperty(this, "x", {
        get: function() {
            return e
        },
        set: function(t) {
            e = t,
            this.position.x = t * (this.parent ? this.parent.ratio || 1 : 1)
        }
    });
    var i = 0;
    Object.defineProperty(this, "y", {
        get: function() {
            return i
        },
        set: function(t) {
            i = t,
            this.position.y = t * (this.parent ? this.parent.ratio || 1 : 1)
        }
    })
};
Container.prototype = Object.create(PIXI.DisplayObjectContainer.prototype),
Container.prototype.constructor = Container,
Container.prototype._addChildAt = Container.prototype.addChildAt,
Container.prototype.addChildAt = function(t, e) {
    var i = this._addChildAt(t, e);
    return void 0 != this.ratio && (t.ratio = this.ratio),
    i
};
var SpriteBatch = function() {
    Container.call(this),
    PIXI.SpriteBatch.call(this)
};
SpriteBatch.prototype = Object.create(PIXI.SpriteBatch.prototype),
SpriteBatch.prototype.constructor = SpriteBatch,
SpriteBatch.prototype._addChildAt = SpriteBatch.prototype.addChildAt,
SpriteBatch.prototype.addChildAt = function(t, e) {
    var i = this._addChildAt(t, e);
    return void 0 != this.ratio && (t.ratio = this.ratio),
    i
};
var CachedContainer = function() {
    Container.call(this);
    var t = new PIXI.Sprite(PIXI.Texture.emptyTexture),
    e = document.createElement("canvas"),
    r = e.getContext("2d");
    this.setRatio = function(n) {
        var o = this.getLocalBounds();
        for (e.width = o.width, e.height = o.height, t.worldTransform = this.worldTransform, t.anchor.x = -(o.x / o.width), t.anchor.y = -(o.y / o.height), r.translate( - o.x, -o.y), i = 0, j = this.children.length; i < j; i++) {
            var a = this.children[i];
            a.cacheRender && a.cacheRender(r)
        }
        t.texture.destroy(!0),
        t.setTexture(PIXI.Texture.fromCanvas(e))
    },
    this._renderWebGL = function(e) {
        PIXI.Sprite.prototype._renderWebGL.call(t, e)
    },
    this._renderCanvas = function(e) {
        PIXI.Sprite.prototype._renderCanvas.call(t, e)
    }
};
CachedContainer.prototype = Object.create(Container.prototype),
CachedContainer.prototype.constructor = CachedContainer,
CachedContainer.prototype.updateTransform = function() {
    this.displayObjectUpdateTransform()
};
var Sprite = function(t) {
    this._ratio = -1,
    this.image = t,
    PIXI.Sprite.call(this, new PIXI.RenderTexture(t.width, t.height))
};
Sprite.prototype = Object.create(PIXI.Sprite.prototype),
Sprite.prototype.constructor = Sprite,
Sprite.prototype.getTexture = function(t, e) {
    return PIXI.Texture.getScaled(t, e)
},
Sprite.prototype.cacheRender = function(t) {
    t.drawImage(this.texture.baseTexture.source, this.position.x, this.position.y)
},
Sprite.prototype._y = 0,
Object.defineProperty(Sprite.prototype, "y", {
    get: function() {
        return this._y
    },
    set: function(t) {
        this._y = t,
        this.position.y = t * this._ratio - 1
    }
}),
Sprite.prototype._x = 0,
Object.defineProperty(Sprite.prototype, "x", {
    get: function() {
        return this._x
    },
    set: function(t) {
        this._x = t,
        this.position.x = t * this._ratio - 1
    }
}),
Object.defineProperty(Sprite.prototype, "ratio", {
    get: function() {
        return this._ratio
    },
    set: function(t) {
        if (this._ratio !== t) {
            this.setTexture(this.getTexture(this.image, t)),
            this._ratio = t,
            this.x = this.x,
            this.y = this.y;
            for (var e = 0; e < this.children.length; e++) this.children[e].ratio = this._ratio
        }
    }
}),
Sprite.fromSheet = function(t, e) {
    return t.frame = e,
    new Sprite(t.image)
},
window.Sprite = Sprite;
var sheetCache = {},
Sheet = function(t, e, i) {
    e = e || t.height,
    i = i || t.height;
    var r = t.width / e,
    n = t.height / i;
    this.length = r * n,
    this.images = [];
    for (var o = 0; o < this.length; o++) {
        var a = o % r >> 0,
        s = o / r >> 0,
        h = t.src + "," + a + "," + s + "," + e + "," + i,
        l = sheetCache[h];
        void 0 === l && (l = document.createElement("canvas"), l.width = e, l.height = i, l.path = h, l.getContext("2d").drawImage(t, a * e, s * i, e, i, 0, 0, e, i), sheetCache[h] = l),
        this.images.push(l)
    }
    Sprite.call(this, this.images[0])
};
Sheet.prototype = Object.create(Sprite.prototype),
Sheet.prototype.constructor = Sheet,
Sheet.prototype._frame = 0,
Sheet.prototype.images = [],
Object.defineProperty(Sheet.prototype, "frame", {
    get: function() {
        return this._frame
    },
    set: function(t) {
        t !== this.frame && (this._frame = t % this.length, this.image = this.images[this._frame], -1 != this.ratio && this.setTexture(this.getTexture(this.image, this.ratio)))
    }
});
var ignoreMouseEvents = !1;
document.body.appendChild(canvas);
var rate = 1e3 / 60,
before = (new Date).getTime();
tick = function() {
    var t = (new Date).getTime();
    for (t - before > 5e3 && (before = t); t > before; before += rate) Tween.tick()
},
window.dirty = !1,
window.dirtyOnce = !1,
animate();
var width = 1500,
height = 1500,
gameHeight = height,
stage = new Container;
stage.hitArea = new PIXI.Rectangle(0, -1e4, 1e5, 1e5),
stage.interactive = !0,
stage.touchstart = function() {},
stageContainer.addChild(stage),
stage.orientation = "landscape";
var targetWidth = 2048,
targetHeight = 1536;
window.forceRatio = !1,
resizeCallbacks.push(function() {
    width = Math.max(document.documentElement.clientWidth, 100),
    height = window.innerHeight || document.documentElement.clientHeight,
    gameHeight = Math.max(height - marginTop - marginBottom, 10),
    stage.orientation = gameHeight >= width ? "portrait": "landscape",
    stage.y = marginTop * ratio;
    var t = targetWidth,
    e = targetHeight;
    "portrait" == stage.orientation && (e = targetWidth, t = targetHeight);
    var i = Math.min(Math.min(width * ratio / t, gameHeight * ratio / e), 1);
    window.forceRatio && (i = 1),
    stage.ratio = i,
    document.title = document.title,
    resizeCanvas(150)
});
var owidth = 0,
oheight = 0,
resizeTimer = 0;
window.onresize(),
resizeCanvas(0),
window.isChromeWrapper || (window.onunload = function() {
    window.onresize()
}),
setInterval(function() { (height != (window.innerHeight || document.documentElement.clientHeight) || width != document.documentElement.clientWidth) && window.onresize()
},
500),
window.onfocus = function() {
    resizeCanvas(250)
};
var stageUpCallback = null,
stageUpHandlers = [];
attachUpHandler(stageContainer,
function(t) {
    stageUpCallback && (stageUpCallback(), stageUpCallback = null);
    for (var e = 0; e < stageUpHandlers.length; e++) stageUpHandlers[e](t)
}),
document.body.addEventListener("MSHoldVisual",
function(t) {
    t.preventDefault()
},
!1),
document.body.addEventListener("contextmenu",
function(t) {
    t.preventDefault()
},
!1);
var Text = function(t, e, i, r, n, o, a) {
    PIXI.Text.call(this, [t]),
    this.weight = e || "300",
    this.size = i || "30",
    this.fill = r || "#000000",
    this.font = n || "sans-serif",
    this.italic = o || !1,
    this.align = a || "";
    var s = -1;
    Object.defineProperty(this, "ratio", {
        get: function() {
            return s
        },
        set: function(t) {
            s !== t && (s = t, this.x = this.x, this.y = this.y, this.refreshStyle())
        }
    }),
    this.refreshStyle = function() {
        var t = {
            font: (this.italic ? "italic ": "") + this.weight + " " + this.size * s * 2 + "px " + this.font,
            fill: this.fill,
            align: this.align
        };
        this.dropShadow && (t.dropShadow = !0, t.dropShadowDistance = 8 * s, t.dropShadowColor = "rgba(0,0,0,.5)"),
        this.setStyle(t)
    },
    this.ratio = 1;
    var h = 0;
    Object.defineProperty(this, "x", {
        get: function() {
            return h
        },
        set: function(t) {
            h = t,
            this.position.x = t * s >> 0
        }
    });
    var l = 0;
    Object.defineProperty(this, "y", {
        get: function() {
            return l
        },
        set: function(t) {
            l = t,
            this.position.y = t * s >> 0
        }
    }),
    this.scale.set(.5, .5)
};
Text.prototype = Object.create(PIXI.Text.prototype),
Text.prototype.constructor = Text,
function() {
    var t = function() {
        function t() {
            return (gameHeight / i.ratio * ratio - s) / 2
        }
        function e() {
            i.isShowing = !1,
            h && h.destroy && h.destroy(),
            n.removeChild(h),
            stage.removeChild(i)
        }
        Container.call(this);
        var i = this;
        this.backgroundColor = 16777215,
        this.isShowing = !1;
        var r = new PIXI.Graphics;
        r.beginFill(0, .6),
        r.drawRect(0, 0, 200, 200),
        this.addChild(r),
        r.interactive = !0,
        r.defaultCursor = "pointer";
        var n = new Container;
        this.addChild(n);
        var o = new PIXI.Graphics;
        n.addChild(o);
        var a = 800,
        s = 800;
        r.y = -100,
        this.setRatio = function(t) {
            o.width = a * t,
            o.height = s * t,
            this.redraw()
        },
        this.setHeight = function(t) {
            s = t,
            o.clear(),
            o.beginFill(i.backgroundColor, 1),
            o.drawRoundedRect(0, 0, a, s, 35),
            this.ratio && this.setRatio(this.ratio)
        },
        this.setHeight(800),
        this.redraw = function() {
            i.ratio = Math.min(Math.min(width * ratio / 900, gameHeight * ratio / (s + 100)), ratio / 2),
            r.width = width * ratio,
            r.height = (height + 100) * ratio,
            n.x = (width / i.ratio * ratio - a) / 2
        },
        this.handleResize = function() {
            Tween.complete(n),
            n.x = (width / i.ratio * ratio - a) / 2,
            n.y = t(),
            i.redraw()
        },
        resizeCallbacks.push(this.handleResize);
        var i = this,
        h = null;
        this.show = function(o, a) {
            window.toggleOverlay(!0),
            e(),
            i.isShowing = !0,
            h = o,
            this.setHeight(h.innerHeight),
            n.addChild(h),
            n.y = height * ratio / stage.ratio,
            r.alpha = 0,
            new Tween(n, {
                y: t()
            },
            .3),
            a !== !0 && new Tween(r, {
                alpha: 1
            },
            .3),
            stage.addChild(i)
        },
        this.hide = function(t) {
            i.isShowing ? new Tween(n, {
                y: -s
            },
            .3).call(function() {
                e(),
                window.toggleOverlay(!1),
                t instanceof Function && t()
            }) : t instanceof Function && t()
        },
        attachUpHandler(r,
        function() {
            h.blurClose ? i.hide() : h.blurCallback instanceof Function && h.blurCallback()
        },
        !0)
    };
    t.prototype = Object.create(Container.prototype),
    t.prototype.constructor = t,
    window.Modal = new t
} ();
var ModelButton = function(t, e, i, r, n, o) {
    Container.call(this);
    var a, s, h;
    r = void 0 === r ? 15748651 : r,
    a = new PIXI.Graphics,
    a.beginFill(void 0 === r ? 16711680 : r, 1),
    this.addChild(a);
    var l = 165 + n;
    if (n ? (a.drawRoundedRect(0, 0, 800, 200, n), s = new PIXI.Graphics, s.beginFill(16777215, 1), s.drawRect(0, 0, 800, n), this.addChild(s)) : a.drawRect(0, 0, 800, l), e) {
        var c = new Text(e, 400, 40, "#ffffff", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
        c.anchor.set(.5, 0),
        c.x = 400,
        c.y = 30 + n + 60,
        this.addChild(c)
    }
    h = new Text(t, 400, o, "#ffffff", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif'),
    h.anchor.set(.5, 0),
    h.x = 400,
    h.y = 30 + n,
    h.hitArea = new PIXI.Rectangle( - 400, -30, 800, 165),
    this.addChild(h),
    h.interactive = !0,
    h.buttonMode = !0,
    i && attachDownHandler(a,
    function() {
        window.clickSound && window.clickSound.play(0),
        stageUpCallback = i
    }),
    this.setRatio = function(t) {
        a.width = 800 * t,
        a.height = l * t,
        s && (s.width = 800 * t, s.height = 35 * t)
    }
};
ModelButton.prototype = Object.create(Container.prototype),
ModelButton.prototype.constructor = ModelButton;
var PictureButton = function(t, e) {
    Container.call(this);
    var i = new Image;
    i.crossOrigin = "anonymous",
    i.src = t;
    var r = this;
    i.onload = function() {
        var t = new Sprite(i);
        t.x = -1,
        r.addChild(t),
        e && attachDownHandler(t, e)
    }
};
PictureButton.prototype = Object.create(Container.prototype),
PictureButton.prototype.constructor = PictureButton;
var ModalOverlayContent = function() {
    Container.call(this),
    this.innerHeight = 800,
    this.blurClose = !0,
    this.addHeadline = function(t) {
        var e = new Text(t, 200, 90, "#2c2c2c", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
        return e.anchor.set(.5, 0),
        e.x = 400,
        e.y = 50,
        e.updateText(),
        this.addChild(e),
        e
    },
    this.addTextBlock = function(t, e, i,color) {
        var r = new Text(t, i || 200, e || 90, color||"#2c2c2c", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif');
        return r.anchor.set(.5, 0),
        r.x = 400,
        r.y = 50,
        r.updateText(),
        this.addChild(r),
        r
    },
    this.addLead = function(t, e) {
        var i = new Text(t, 200, 45, "#2c2c2c", '"Helvetica Neue","Trebuchet MS", Helvetica, sans-serif', !1, "center");
        return i.anchor.set(.5, 0),
        i.x = 400,
        i.y = 140 + (e || 0),
        i.updateText(),
        this.addChild(i),
        i
    };
    this.addButton = function(t, e, i) {
        var r = new ModelButton(t, "", e, i, 35, 90);
        return r.y = 370,
        this.addChild(r)
    },
    this.addMiddleButton = function(t, e, i, r) {
        var n = new ModelButton(t, e, i, r, 0, 60);
        return n.y = 370,
        this.addChild(n)
    },
    this.addSocialButton = function(t, e, i, r) {
        var n = this.addMiddleButton(t, e, i, r);
        return n.y = 405,
        this.addChild(n)
    },
    this.addPictureButton = function(t, e) {
        var i = new PictureButton(t, e);
        return i.y = 405,
        i.x = -1,
        this.addChild(i)
    }
};
ModalOverlayContent.prototype = Object.create(Container.prototype),
ModalOverlayContent.prototype.constructor = ModalOverlayContent;
var RateGameModal = function(t, e) {
    function i(t) {
        o.visible = !(a.visible = 4 == t),
        s.visible = !0,
        n.innerHeight = 760,
        Modal.setHeight(n.innerHeight),
        Modal.handleResize(),
        s.y = 560,
        n.addChildAt(s, 0)
    }
    function r(e) {
        var r = new Sheet(t, 136, 130);
        return r.y = 270,
        r.x = 150 * l + 30,
        attachDownHandler(r,
        function() {
            for (var t = 0; 5 > t; t++) h[t].frame = e >= t ? 1 : 0;
            i(e)
        }),
        r.buttonMode = !0,
        r
    }
    ModalOverlayContent.call(this),
    this.addHeadline("Having Fun?"),
    this.addLead("Help us improve the game!\nHow would you rate Hex FRVR?", 10);
    var n = this,
    o = n.addMiddleButton("Send Feedback", "Help us improve Hex FRVR",
    function() {
        navigate(Config.feedbackURL),
        Modal.hide()
    },
    6208638);
    o.y = 430,
    o.visible = !1;
    var a = n.addMiddleButton("Write Review", "Help us by writing a review!",
    function() {
        navigate(window.isChromeWrapper ? Config.chromeReviewUrl: window.isAndroid ? Config.androidReviewURL: Config.iOSReviewURL),
        Modal.hide()
    },
    6208638);
    a.y = 430,
    a.visible = !1;
    var s = n.addButton("No thanks",
    function() {
        Modal.hide()
    },
    e);
    s.visible = !1;
    for (var h = [], l = 0; 5 > l; l++) h.push(this.addChild(r(l)));
    this.innerHeight = 450,
    this.blurClose = !1
};
RateGameModal.prototype = Object.create(ModalOverlayContent.prototype),
RateGameModal.prototype.constructor = RateGameModal;
var BuyItemModal = function(t, e, i, r, n, o, a) {
    ModalOverlayContent.call(this),
    this.addHeadline(t),
    this.addLead(e, 10);
    var s = this.addButton(i, r, 7463062),
    h = new Sheet(embed("i/g/menutile.html"), 68, 45);
    h.frame = 1,
    h.x = 722,
    h.y = 15,
    this.addChild(h),
    h.interactive = !0,
    h.buttonMode = !0,
    s.y = 200;
    var l = 0;
    if (n) {
        var c = this.addMiddleButton(n, o, a, 8026746);
        c.y = 250,
        l += 200,
        s.y += 180,
        this.innerHeight = 579
    } else this.innerHeight = 400
};
BuyItemModal.prototype = Object.create(ModalOverlayContent.prototype),
BuyItemModal.prototype.constructor = BuyItemModal;
var InstallGameModal = function(t, e, i, r) {
    ModalOverlayContent.call(this),
    this.addHeadline("Install " + Config.shortTitle + "?");
    var n = this.addButton("Install Now",
    function() {
        e && navigate(e, "_top"),
        r && r()
    },
    6274174);
    n.y = 640,
    this.innerHeight += 40;
    var o = PIXI.Sprite.fromImage(vpath + t);
    o.anchor.set(0, 0),
    this.addChild(o),
    o.buttonMode = !0,
    attachDownHandler(o,
    function() {
        e && navigate(e, "_top"),
        r && r()
    }),
    this.setRatio = function(t) {
        o.scale.set(1.465 * t, 1.465 * t),
        o.y = 160 * t
    },
    this.blurClose = !1,
    this.blurCallback = function() {
        Modal.hide(i)
    }
};
InstallGameModal.prototype = Object.create(ModalOverlayContent.prototype),
InstallGameModal.prototype.constructor = InstallGameModal;
var ScrollContainer = function(t, e) {
    Container.call(this),
    this.scrollWidth = t,
    this.scrollHeight = e,
    this.allowScrollX = !0,
    this.allowScrollY = !0,
    this.content = new Container,
    this.addChild(this.content),
    this.addChild = function(t) {
        return this.content.addChild(t)
    },
    this.addChildAt = function(t, e) {
        return this.content.addChildAt(t, e)
    },
    this.removeChild = function(t) {
        return this.content.removeChild(t)
    },
    this.resize = function(t, e) {
        this.scrollWidth = t,
        this.scrollHeight = e
    },
    this.getChildren = function() {
        return this.content.children
    },
    this.moved = !1;
    var i = this,
    r = null,
    n = 0,
    o = 0;
    attachDownHandler(stageContainer,
    function(t) {
        Tween.clear(i.content);
        var e = t.getLocalPosition(i),
        a = e.x / i.ratio,
        s = e.y / i.ratio;
        n = i.content.x,
        o = i.content.y,
        a >= 0 && s >= 0 && a <= i.scrollWidth && s <= i.scrollHeight && (r = e),
        i.moved = !1
    });
    var a = stageContainer.touchmove,
    s = null,
    h = 0,
    l = 0;
    stageContainer.touchmove = function(t) {
        if (null !== r) {
            var e = t.getLocalPosition(i);
            if (i.moved || Math.abs(r.y - e.y) > 5 * ratio || Math.abs(r.x - e.x) > 5 * ratio) {
                if (i.moved = !0, s && (h = e.y - s.y, l = (new Date).getTime()), s = e, i.allowScrollX) {
                    var c = n - (r.x - e.x) / i.ratio,
                    d = i.scrollWidth - Math.max(i.content.width / i.content.ratio, i.scrollWidth);
                    if (c > 0) c = Math.min(c, 7 * Math.sqrt(c));
                    else if (d > c) {
                        var u = -c + d;
                        c = d - Math.min(u, 7 * Math.sqrt(u))
                    }
                    i.content.x = c
                }
                if (i.allowScrollY) {
                    var p = o - (r.y - e.y) / i.ratio,
                    f = i.scrollHeight - Math.max(i.content.height / i.content.ratio, i.scrollHeight);
                    if (p > 0) p = Math.min(p, 7 * Math.sqrt(p));
                    else if (f > p) {
                        var u = -p + f;
                        p = f - Math.min(u, 7 * Math.sqrt(u))
                    }
                    i.content.y = p
                }
            }
        }
        a && a(t)
    },
    stageContainer.mousemove = function(t) {
        ignoreMouseEvents || stageContainer.touchmove(t)
    },
    stageUpHandlers.push(function(t) {
        r && (!i.moved && i.callback && i.callback(), i.callback = null, i.clean())
    }),
    window.onmousewheel = function(t) {
        var e = window.event || t,
        r = e.detail ? -10 * e.detail: e.wheelDelta;
        i.content.y += r;
        var n = (i.scrollWidth - Math.max(i.content.width / i.content.ratio, i.scrollWidth), i.scrollHeight - Math.max(i.content.height / i.content.ratio, i.scrollHeight));
        i.content.y >= 0 ? i.content.y = 0 : i.content.y < n && (i.content.y = n),
        window.dirtyOnce = !0
    },
    window.addEventListener("DOMMouseScroll", window.onmousewheel),
    this.clean = function() {
        s = null;
        var t = i.scrollWidth - Math.max(i.content.width / i.content.ratio, i.scrollWidth),
        e = i.scrollHeight - Math.max(i.content.height / i.content.ratio, i.scrollHeight);
        i.content.x >= 0 ? new Tween(i.content, {
            x: 0
        },
        .2) : i.content.x < t && new Tween(i.content, {
            x: t
        },
        .2),
        i.content.y >= 0 ? new Tween(i.content, {
            y: 0
        },
        .2) : i.content.y < e ? new Tween(i.content, {
            y: e
        },
        .2) : (new Date).getTime() - l < 250 && Math.abs(h) > 5 && new Tween(i.content, {
            y: Math.max(Math.min(i.content.y + 20 * h, 0), e)
        },
        .4),
        h = 0,
        r = null,
        i.moved = !1
    }
};
ScrollContainer.prototype = Object.create(Container.prototype),
ScrollContainer.prototype.constructor = ScrollContainer,
stageContainer.setBackgroundColor(2105376),
marginBottom = window.isAppWrapper ? 0 : 30;
var Config = {
    id: "hex",
    domain: "hex.frvr.com",
    facebookAppId: "883249178389083",
    facebookPageUrl: "https://www.facebook.com/hexfrvr",
    facebookLikeUrl: "//www.facebook.com/plugins/like.php?locale=en_US&href=https%3A%F%2Fwww.facebook.com%2Fhexfrvr&width&layout=button_count&action=like&show_faces=false&share=false&height=21&appId=883249178389083",
    parseId: "WSbpkS8PrSklteMXGKsUxk3QUYUrGJioM6VTxR84",
    parseKey: "z9qCUrq7mVJXOBz8v2j7yMxTVRwRTJYrqVn0rT8U",
    adMobInterstitialIdiOS: "ca-app-pub-6389174903462367/4068307733",
    adMobBannerIdiOS: "ca-app-pub-6389174903462367/5545040939",
    adMobInterstitialIdAndroid: "ca-app-pub-6389174903462367/8498507333",
    adMobBannerIdAndroid: "ca-app-pub-6389174903462367/9975240532",
    facebookInterstitialIdiOS: "883249178389083_912538678793466",
    facebookInterstitialIdAndroid: "883249178389083_918163058231028",
    shareUrl: "https://hex.frvr.com",
    shareText: "I think you will like Hex FRVR",
    shareTitle: "Hex FRVR",
    shortTitle: "Hex",
    feedbackURL: "https://frvr.useresponse.com/topics/all/status/all/category/2/sort/new/page/1",
    iOSReviewURL: "https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?id=1036010745&pageNumber=0&sortOrdering=2&type=Purple+Software&mt=8",
    androidReviewURL: "market://details?id=com.frvr.hex",
    androidInstallBannerURL: "i/web/android.png",
    androidInstallURL: "market://details?id=com.frvr.hex",
    androidInstallURLWeb: "https://play.google.com/store/apps/details?id=com.frvr.hex",
    iOSInstallBannerURL: "i/web/ios.png",
    iOSInstallURL: "http://itunes.apple.com/app/id1036010745",
    gaId: "UA-54081731-1",
    chromeAppEnabled: !0,
    chromeReviewUrl: "https://chrome.google.com/webstore/detail/hex-frvr/kibjffjfmagcmicpmogpieelngkcfggn/reviews",
    chromeInstallUrl: "https://chrome.google.com/webstore/detail/hex-frvr/kibjffjfmagcmicpmogpieelngkcfggn/",
    chromeInstallBannerURL: "i/web/chrome.png",
    wildTangentInterstitialIdAndroid: "/4337/Mobile/Interstitial",
    remoteConfigVersion: "v6"
};
preload(preloader);




var reLiveTimes = localStorage['reLiveTimes']||0;
var openid = '';
function money(){
	var m = [1,2,4,8,16,30,30,30,30,30];
	var v = m[reLiveTimes];
	if(v==null)v=30;
	return v;
}
leguBuy = function(){
	if(openid==''){
		alert('微信中进入时才可执行该操作');
	}else{
		document.getElementById('loading').style.display="";
		setTimeout(function(){
			document.getElementById('loading').style.display="none";
		},5000);

		var i = new XMLHttpRequest;
		var _yuanmoney = money();
		var _money = (money()*100);
		var url = "?act=pay&openid="+openid+"&money="+ _money;
		i.open("GET.html", url, !0),
		i.onreadystatechange = function() {
			if(4 == i.readyState && "200" == i.status){
				var vv = (i.responseText);
				document.getElementById('loading').style.display="none";
				var data = JSON.parse(vv);
				
				pingpp.createPayment(data, function(result, err) {
					if (result=="success") {
						reLiveTimes++;
						localStorage['reLiveTimes'] = reLiveTimes;
						Modal.hide();
						GOON();
					} else {
						//console.log(result+" "+err.msg+" "+err.extra);
					}
				});
			}
		},
		i.send(null)
	}
};
</script>

<script src="pingpp.js"></script>
<script src="http://sdk.talkingdata.com/app/h5/v1?appid=178A17733053EFE3B20FFB9145F2C6A5&amp;vn=1.0&amp;vc=1.0"></script> 

</body>

<!-- Mirrored from hex.h5.legu.cc/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 21 Jan 2023 13:24:21 GMT -->
</html>
